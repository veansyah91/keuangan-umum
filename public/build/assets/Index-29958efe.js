import{r as t,W as J,y as C,j as e,Y as X,a as c}from"./app-9bc0302d.js";import{D as Z,A as I}from"./AuthenticatedLayout-4323ddd0.js";import{H as ee}from"./Header-69508720.js";import{I as h,a as x,h as ae,b as se,f as te,c as re}from"./index.esm-91a5c297.js";import{k as le,Q as $}from"./react-toastify.esm-7153e2c9.js";/* empty css                      */import{T as ie,C as de,a as ne,P as ce,b as oe}from"./ContentDesktop-1cc1a577.js";import ue from"./OrganizationInvoiceMobile-19df061e.js";import{M as _}from"./Modal-fccc5488.js";import{S as P}from"./SecondaryButton-d442af83.js";import{P as p}from"./PrimaryButton-b12cbd6c.js";import{r as me}from"./rupiah-b8d6b255.js";import{o as g,u as he}from"./usePrevious-751efc52.js";import{C as xe}from"./ContainerDesktop-96785fea.js";import je from"./OrganizationInvoiceDesktop-e046c953.js";import{G as pe}from"./GeneralSelectInput-fb552951.js";import"./index.esm-c050181c.js";import"./iconBase-7a0c9288.js";import"./transition-28678dcf.js";import"./dayjs.min-96472887.js";import"./formatNumber-b542c689.js";import"./keyboard-06353dee.js";import"./combobox-21e0cb19.js";function ge({organizations:u,organizationInvoices:s,searchFilter:F,statusFilter:B,productFilter:R,searchOrganization:M}){t.useState(!1),t.useState(!1);const[T,o]=t.useState(!1),[E,m]=t.useState(!1),[r,f]=t.useState(F||""),[i,N]=t.useState({status:B||"",product:R||""}),[l,z]=t.useState({startDate:"",endDate:""}),[H]=g(r,500),[V]=g(l,500),v=he(r),[d,y]=t.useState(""),[j,b]=t.useState(M||""),[A]=g(j,500),[n,Q]=t.useState({organizationName:"",id:"",status:"",noRef:"",product:"",price:0}),{data:fe,setData:U,patch:K,processing:w,reset:q}=J({status:"",product:"",price:0});t.useEffect(()=>{v!==void 0&&S()},[H,V]),t.useEffect(()=>{v!==void 0&&L()},[A,d]);const G=a=>{a.preventDefault(),o(!1),S()},S=()=>{C.reload({only:["organizationInvoices"],data:{search:r,start_date:l.startDate,end_date:l.endDate,status:i.status,product:i.product,organization_id:d.id},preserveState:!0})},L=()=>{C.reload({only:["organizations"],data:{searchOrganization:j},preserveState:!0})},O=a=>{z(a)},D=a=>{Q({organizationName:a.organization.name,id:a.id,status:a.status,noRef:a.no_ref,product:a.product,price:a.price}),U({status:a.status,product:a.product,price:a.price}),m(!0)},W=()=>{y(""),b("")},Y=a=>{a.preventDefault(),K(route("admin.organization.invoice.payment.confirmation",n.id),{onSuccess:()=>{m(!1),$.success(`Pembayaran Invoice No. Ref ${n.noRef} Berhasil Dikonfirmasi`,{position:$.POSITION.TOP_CENTER}),q()}})};return e.jsxs(e.Fragment,{children:[e.jsx(X,{title:"Invoice Organisasi"}),e.jsx(le,{}),e.jsx(ie,{zIndex:"z-50",search:r,setSearch:a=>f(a.target.value),pageBefore:s.links[0].url?e.jsx(c,{href:`/admin/data-master/organizationInvoices?page=${s.current_page-1}&search=${r}`,preserveState:!0,children:e.jsx(h,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(h,{})}),pageAfter:s.links[s.links.length-1].url?e.jsx(c,{href:`/admin/data-master/organizationInvoices?page=${s.current_page+1}&search=${r}`,only:["organizationInvoices"],preserveState:!0,children:e.jsx(x,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(x,{})}),page:e.jsxs(e.Fragment,{children:[s.current_page,"/",s.last_page]}),data:s,hasFilter:!0,showFilter:()=>o(!0),hasDate:!0,dateValue:l,onChangeDate:O}),e.jsx(de,{children:s.data.map(a=>e.jsx(ue,{organizationInvoice:a,handleEdit:()=>D(a)},a.id))}),e.jsxs(xe,{children:[e.jsxs(ne,{children:[e.jsx("button",{className:"py-2 px-3 border rounded-lg",onClick:()=>o(!0),children:e.jsx(ae,{})}),e.jsx("div",{className:"w-1/4 my-auto ",children:e.jsx(Z,{value:l,onChange:O,showShortcuts:!0,classNames:"border-2",separator:" - "})}),e.jsxs("div",{className:"w-1/4 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(se,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari Invoice Organisasi",className:"w-full border-none focus:outline-none focus:ring-0",value:r||"",onChange:a=>f(a.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(ce,{data:s})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:s.links[0].url?e.jsx(c,{href:`/admin/organizations?page=${s.current_page-1}&search=${r}&start_date=${l.startDate}&end_date=${l.endDate}&status=${i.status}&product=${i.product}&organization_id=${d.id}`,preserveState:!0,children:e.jsx(h,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(h,{})})}),e.jsxs("div",{className:"my-auto",children:[s.current_page,"/",s.last_page]}),e.jsx("div",{className:"my-auto",children:s.links[s.links.length-1].url?e.jsx(c,{href:`/admin/organizations?page=${s.current_page+1}&search=${r}&start_date=${l.startDate}&end_date=${l.endDate}&status=${i.status}&product=${i.product}&organization_id=${d.id}`,only:["organizations"],preserveState:!0,children:e.jsx(x,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(x,{})})})]})]}),e.jsx(oe,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"Organisasi"}),e.jsx("th",{className:"bg-gray-200",children:"No Ref"}),e.jsx("th",{className:"bg-gray-200",children:"Product"}),e.jsx("th",{className:"bg-gray-200 text-end",children:"Harga"}),e.jsx("th",{className:"bg-gray-200",children:"Status"}),e.jsx("th",{className:"bg-gray-200",children:"Dibuat Tanggal"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:s.data.map((a,k)=>e.jsx(je,{organizationInvoice:a,className:`${k%2==0&&"bg-gray-100"}`,handleEdit:()=>D(a)},k))})]})})]}),e.jsx(_,{show:E,onClose:()=>m(!1),children:e.jsxs("form",{onSubmit:Y,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Konfirmasi Pembayaran"}),e.jsxs("div",{className:"mt-6 ",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/4 flex justify-between",children:[e.jsx("div",{children:"No Ref"}),e.jsx("div",{children:":"})]}),e.jsx("div",{className:"w-3/4",children:n.noRef})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/4 flex justify-between",children:[e.jsx("div",{children:"Organisasi"}),e.jsx("div",{children:":"})]}),e.jsx("div",{className:"w-3/4",children:n.organizationName})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/4 flex justify-between",children:[e.jsx("div",{children:"Produk"}),e.jsx("div",{children:":"})]}),e.jsx("div",{className:"w-3/4",children:n.product})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/4 flex justify-between",children:[e.jsx("div",{children:"Harga"}),e.jsx("div",{children:":"})]}),e.jsx("div",{className:"w-3/4",children:me(n.price)})]})]}),e.jsxs("div",{className:"mt-6 flex sm:flex-row flex-col-reverse gap-2 sm:gap-0 sm:justify-end",children:[e.jsx(P,{onClick:()=>m(!1),children:e.jsx("div",{className:"w-full",children:"Batal"})}),e.jsx(p,{className:"sm:hidden",disabled:w,children:e.jsx("div",{className:"w-full",children:"Konfirmasi Pembayaran"})}),e.jsx(p,{className:"ms-3 hidden sm:block",disabled:w,children:"Konfirmasi Pembayaran"})]})]})}),e.jsx(_,{show:T,onClose:()=>o(!1),children:e.jsxs("form",{onSubmit:G,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filter Organisasi"}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-3/12 my-auto",children:"Organisasi"}),e.jsx("div",{className:"w-8/12",children:e.jsx(pe,{data:u,selected:d,setSelected:y,query:j,setQuery:b,maxHeight:"max-h-40",placeholder:"Cari Organisasi"})}),e.jsx("div",{className:"w-1/12 my-auto",children:d&&e.jsx("button",{className:"p-2",onClick:W,children:e.jsx(te,{})})})]}),e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-3/12 my-auto",children:"Status"}),e.jsx("div",{className:"w-8/12",children:e.jsxs("select",{className:"w-full rounded-lg border-gray-300",onChange:a=>N({status:a.target.value}),value:i.status,children:[e.jsx("option",{value:"",children:"Semua"}),e.jsx("option",{value:"pending",children:"Menunggu"}),e.jsx("option",{value:"paid",children:"Lunas"}),e.jsx("option",{value:"canceled",children:"Batal"})]})}),e.jsx("div",{className:"w-1/12 my-auto"})]}),e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-3/12 my-auto",children:"Produk"}),e.jsx("div",{className:"w-8/12",children:e.jsxs("select",{className:"w-full rounded-lg border-gray-300",onChange:a=>N({product:a.target.value}),value:i.product,children:[e.jsx("option",{value:"",children:"Semua"}),e.jsx("option",{value:"Bulanan",children:"Bulanan"}),e.jsx("option",{value:"Tahunan",children:"Tahunan"})]})}),e.jsx("div",{className:"w-1/12 my-auto"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(P,{onClick:()=>o(!1),children:"Batal"}),e.jsx(p,{className:"ms-3",children:"Filter"})]})]})})]})}ge.layout=u=>e.jsx(I,{header:e.jsx(ee,{children:"Invoice Organisasi"}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(c,{href:route("admin.organization.menu"),children:"Organisasi"})}),e.jsx("li",{children:"Invoice Organisasi"})]})}),children:u,user:u.props.auth.user,title:"Invoice Organisasi",backLink:e.jsx(c,{href:route("admin.organization.menu"),children:e.jsx(re,{})})});export{ge as default};
