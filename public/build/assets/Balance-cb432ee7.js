import{r as o,j as e,Y as R,y as V,a as D}from"./app-f3916a1a.js";import{D as K,A as $}from"./AuthenticatedLayout-ee6e7afa.js";import{H as U}from"./Header-026ae316.js";import{p as G,c as J}from"./index.esm-e9d04fa1.js";import{S as Q}from"./SecondaryButton-7ab0cfb6.js";import{F as L}from"./index.esm-cca437c2.js";import{P as W}from"./PrimaryButton-5f80bdf0.js";import{d as S}from"./dayjs.min-0f1cdf93.js";import j from"./BalanceContent-36e5d903.js";import{A as y}from"./disclosure-26cba0c4.js";import{q as X}from"./transition-a6db7282.js";import"./index.esm-55229e1f.js";import"./iconBase-dd13dc9c.js";/* empty css                      */import"./formatNumber-b542c689.js";import"./keyboard-94fa1eb3.js";import"./use-resolve-button-type-b9a318bd.js";function Z({organization:s,ledgers:Y,endDateFilter:u,account:M}){const[h,E]=o.useState([]),[c,I]=o.useState(u||""),[A,F]=o.useState({startDate:u||"",endDate:u||""}),[r,B]=o.useState({accountCode:!1}),[b,P]=o.useState(0),[v,_]=o.useState(0),[N,q]=o.useState(0),[T,d]=o.useState(!1);o.useEffect(()=>{w(Y,M)},[]);const w=(a,m)=>{let k=0,g=0,p=0,x=0,l=0,n=null;a.map((t,f)=>{t.code>="100000000"&&t.code<="199999999"&&(k+=parseInt(t.total),x+=parseInt(t.total)),t.code>="200000000"&&t.code<="299999999"&&(g+=parseInt(t.total),l+=parseInt(t.total)),t.code>="300000000"&&t.code<="399999999"&&(p+=parseInt(t.total),l+=parseInt(t.total),t.can_be_deleted||(n=f))});let i=[...a];if(n){let t=x+l-parseInt(i[n].total);i[n]={...i[n],total:t*-1},p+=t*-1}else i=[...i,{code:m.code,name:m.name,account_id:m.id,can_be_deleted:m.can_be_deleted,total:(x+l)*-1}],i.sort((t,f)=>t.code-f.code),p+=(x+l)*-1;E(i),P(k),_(g*-1),q(p*-1)},H=a=>{F(a),I(a.endDate)},O=()=>{V.reload({only:["ledgers","account"],data:{endDate:c},onBefore:a=>{a.completed?d(!1):d(!0)},onSuccess:a=>{w(a.props.ledgers,a.props.account)},onError:a=>{console.log(a)},onFinish:a=>{a.completed?d(!1):d(!0)},preserveState:!0})},C=()=>{window.print()};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:`Laporan Neraca Periode : ${S(c).format("MMMM DD, YYYY")}`}),e.jsx("div",{className:"sm:pt-0 pb-16 pt-12",children:e.jsxs("div",{className:"bg-white py-2 sm:pt-0 px-5",children:[e.jsxs("div",{className:"flex sm:flex-row justify-between gap-2 print:hidden",children:[e.jsxs("div",{className:"px-3 my-auto flex gap-3",children:[e.jsx("div",{className:"my-auto",children:e.jsx(K,{value:A,onChange:H,useRange:!1,asSingle:!0,placeholder:"Tanggal Akhir",id:"date",displayFormat:"MMMM DD, YYYY"})}),e.jsx("div",{className:"my-auto",children:e.jsx(W,{disabled:!c||T,onClick:O,children:"Filter"})})]}),e.jsx("div",{className:"text-end px-3 hidden sm:block",children:e.jsx(Q,{onClick:C,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"my-auto",children:e.jsx(L,{})}),e.jsx("div",{className:"my-auto",children:"Print"})]})})}),e.jsx("div",{className:"fixed sm:hidden bottom-2 right-2",children:e.jsx("button",{onClick:C,className:"bg-white border-2 border-slate-900 p-2 rounded-full h-14 w-14",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"my-auto mx-auto",children:e.jsx(L,{})})})})})]}),e.jsx(y,{as:"div",className:"mt-3 print:hidden",children:({open:a})=>e.jsxs(e.Fragment,{children:[e.jsx(X,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:e.jsx(y.Panel,{children:e.jsx("div",{className:"flex flex-col sm:flex-row justify-start gap-3 sm:py-5 mb-3",children:e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer gap-2",htmlFor:"checkbox",children:[e.jsx("input",{type:"checkbox",className:"checkbox",id:"checkbox",value:r.accountCode,onChange:()=>B({...r.accountCode,accountCode:!r.accountCode}),checked:r.accountCode}),e.jsx("span",{className:"label-text",children:"Tampilkan Kode Akun"})]})})})})}),e.jsx(y.Button,{className:"flex w-full justify-between rounded-lg bg-slate-100 px-4 py-2 text-left text-sm font-medium text-slate-900 hover:bg-slate-200 focus:outline-none focus-visible:ring focus-visible:ring-slate-500/75",children:e.jsxs("div",{className:"flex justify-center w-full gap-3",children:[e.jsx("span",{children:"Tampilkan Lebih Banyak"}),e.jsx(G,{className:`${a?"":"rotate-180 transform"} h-5 w-5 text-slate-500`})]})})]})}),e.jsxs("div",{className:"uppercase pt-9 pb-3 border-b hidden print:flex print:justify-between",children:[e.jsx("div",{className:"w-1/2 text-2xl my-auto",children:"Laporan Neraca"}),e.jsxs("div",{className:"w-1/2 text-end mt-auto",children:[e.jsx("div",{children:s.name}),e.jsx("div",{className:"text-xs",children:s.address}),e.jsxs("div",{className:"text-xs",children:[s.village,", ",s.district,", ",s.regency,", ",s.province]})]})]}),e.jsxs("div",{className:"w-full text-end italic mt-3 hidden print:block",children:["Periode : ",S(c).format("MMMM DD, YYYY")]}),e.jsx("div",{className:"my-2 space-y-3 mx-3 print:font-['Open_Sans'] overflow-auto",children:e.jsxs("div",{className:"sm:w-3/4 w-[550px] print:w-full",children:[b>0&&e.jsx(j,{ledgers:h,title:"Harta",showCode:r.accountCode,type:"asset",amount:b}),v>0&&e.jsx(j,{ledgers:h,title:"Kewajiban",showCode:r.accountCode,type:"liability",amount:v}),N>0&&e.jsx(j,{ledgers:h,title:"Modal",showCode:r.accountCode,type:"equity",amount:N})]})})]})})]})}Z.layout=s=>e.jsx($,{header:e.jsx(U,{children:"Laporan Neraca"}),children:s,user:s.props.auth.user,organization:s.props.organization,title:"Laporan Neraca",backLink:e.jsx(D,{href:route("report",s.props.organization.id),children:e.jsx(J,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(D,{href:route("report",s.props.organization.id),children:"Laporan"})}),e.jsx("li",{children:"Laporan Neraca"})]})}),role:s.props.role});export{Z as default};
