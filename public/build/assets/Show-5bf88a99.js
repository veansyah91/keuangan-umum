import{q as B,r as o,W as _,y as E,j as e,Y as M,a as r}from"./app-a32b9fee.js";import{A as O}from"./AuthenticatedLayout-d85d1243.js";import{H as R}from"./Header-57a5809c.js";import{Q as c,k as z}from"./react-toastify.esm-8b7ace3e.js";/* empty css                      */import{I as u,a as x,b as A,c as F}from"./index.esm-e8f6b728.js";import{F as H}from"./index.esm-5a6db5d9.js";import{A as $}from"./AddButtonMobile-494910e4.js";import{M as q}from"./Modal-f51c1575.js";import{S as J}from"./SecondaryButton-cc98d738.js";import{P as K}from"./PrimaryButton-611e4b8f.js";import{u as L,o as Q}from"./index.module-63367142.js";import{C as V}from"./ContainerDesktop-cc83283a.js";import{T as W,C as Y,a as G,P as U,b as X}from"./ContentDesktop-d2de6801.js";import{D as Z}from"./DangerButton-4659e09a.js";import ee from"./StudentMonthlyReceivableDetailMobile-5fa14032.js";import ae from"./StudentMonthlyReceivableDetailDesktop-f0bfe8ac.js";import"./ApplicationLogo-3600c114.js";import"./iconBase-55b2c5a6.js";import"./transition-a190b099.js";import"./dayjs.min-1711e039.js";import"./portal-28911e26.js";import"./close-provider-43ee790a.js";import"./formatNumber-b542c689.js";import"./BadgeDanger-af318d3c.js";import"./BadgeSuccess-3310ecbe.js";function se({role:t,organization:n,receivables:a,searchFilter:y,receivable:d,contact:m}){const{errors:p}=B().props;o.useState(!1);const[N,h]=o.useState(!1),[l,j]=o.useState(y||""),[b,w]=o.useState(""),{data:f,setData:v,delete:S,processing:P,reset:D}=_({id:null,receivable_id:null}),I=L(l),[T]=Q(l,500);o.useEffect(()=>{I!==void 0&&k()},[T]),o.useEffect(()=>{p&&c.error(p.message,{position:c.POSITION.TOP_CENTER})},[]);const k=()=>{E.reload({only:["receivables"],data:{search:l}})},g=s=>{w(`Hapus Piutang ${s.no_ref}`),h(!0),v({id:s.id,receivable:s.receivable_id})},C=s=>{s.preventDefault(),S(route("cashflow.student-monthly-receivable.delete",{organization:n.id,receivable:f.receivable,ledger:f.id}),{onSuccess:()=>{h(!1),c.success("Piutang Berhasil Dihapus",{position:c.POSITION.TOP_CENTER}),D()},onError:i=>{h(!1),c.error(i.message,{position:c.POSITION.TOP_CENTER})}})};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Piutang Iuran Siswa"}),e.jsx(z,{}),t!=="viewer"&&e.jsx(r,{href:route("cashflow.student-monthly-receivable.create",{organization:n.id,contact:m.name,selectedContact:m.id}),children:e.jsx($,{label:"Tambah"})}),e.jsx(W,{zIndex:"z-50",search:l,setSearch:s=>j(s.target.value),pageBefore:a.links[0].url?e.jsx(r,{href:route("cashflow.student-monthly-receivable.show",{organization:n.id,receivable:d.id,page:a.current_page-1,search:l}),preserveState:!0,only:["receivables"],children:e.jsx(u,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(u,{})}),pageAfter:a.links[a.links.length-1].url?e.jsx(r,{href:route("cashflow.student-monthly-receivable.show",{organization:n.id,receivable:d.id,page:a.current_page+1,search:l}),only:["receivables"],preserveState:!0,children:e.jsx(x,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(x,{})}),page:e.jsxs(e.Fragment,{children:[a.current_page,"/",a.last_page]}),data:a}),e.jsx(Y,{children:a.data.map((s,i)=>e.jsx(ee,{receivable:s,handleDelete:()=>g(s),role:t},i))}),e.jsxs(V,{children:[e.jsxs(G,{children:[e.jsx("div",{className:"my-auto w-7/12",children:t!=="viewer"&&e.jsx("div",{className:"space-x-2",children:e.jsx(r,{href:route("cashflow.student-monthly-receivable.create",{organization:n.id,contact:m.name,selectedContact:m.id}),children:e.jsx(K,{className:"py-3",children:"Tambah Data"})})})}),e.jsx("div",{className:"my-auto w-4/12 flex gap-5 justify-end",children:e.jsx(r,{className:"py-3 px-3 border rounded-lg h-full",href:route("cashflow.student-monthly-receivable.print",{organization:n.id,receivable:d.id}),children:e.jsx(H,{})})}),e.jsxs("div",{className:"w-3/12 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(A,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari No Ref",className:"w-full border-none focus:outline-none focus:ring-0",value:l||"",onChange:s=>j(s.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(U,{data:a})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:a.links[0].url?e.jsx(r,{href:route("cashflow.student-monthly-receivable.show",{organization:n.id,receivable:d.id,page:a.current_page-1,search:l}),preserveState:!0,only:["receivables"],children:e.jsx(u,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(u,{})})}),e.jsxs("div",{className:"my-auto",children:[a.current_page,"/",a.last_page]}),e.jsx("div",{className:"my-auto",children:a.links[a.links.length-1].url?e.jsx(r,{href:route("cashflow.student-monthly-receivable.show",{organization:n.id,receivable:d.id,page:a.current_page+1,search:l}),only:["receivables"],preserveState:!0,children:e.jsx(x,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(x,{})})})]})]}),e.jsx("div",{className:"sm:flex hidden gap-5",children:e.jsx("div",{className:"w-full",children:e.jsx(X,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"No Ref"}),e.jsx("th",{className:"bg-gray-200",children:"Tanggal Input"}),e.jsx("th",{className:"bg-gray-200",children:"Bulan"}),e.jsx("th",{className:"bg-gray-200",children:"Tahun Ajaran"}),e.jsx("th",{className:"bg-gray-200 text-end",children:"Jumlah"}),e.jsx("th",{className:"bg-gray-200",children:"Status"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:a.data.map((s,i)=>e.jsx(ae,{receivable:s,className:`${i%2==0&&"bg-gray-100"}`,handleDelete:()=>g(s),role:t},i))})]})})})})]}),e.jsx(q,{show:N,onClose:()=>h(!1),children:e.jsxs("form",{onSubmit:C,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 text-center",children:b}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(J,{onClick:()=>h(!1),children:"Batal"}),e.jsx(Z,{className:"ms-3",disabled:P,children:"Hapus"})]})]})})]})}se.layout=t=>e.jsx(O,{header:e.jsxs(R,{children:["Piutang Iuran Bulanan Siswa ",t.props.contact.name]}),children:t,user:t.props.auth.user,organization:t.props.organization,title:"Piutang Iuran Bulanan",backLink:e.jsx(r,{href:route("cashflow.student-monthly-receivable",t.props.organization.id),children:e.jsx(F,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(r,{href:route("cashflow",t.props.organization.id),children:"Arus Kas"})}),e.jsx("li",{className:"font-bold",children:e.jsx(r,{href:route("cashflow.student-monthly-receivable",t.props.organization.id),children:"Piutang Iuran Bulanan Siswa"})}),e.jsx("li",{children:"Detail Piutang Iuran Bulanan Siswa"})]})}),role:t.props.role});export{se as default};
