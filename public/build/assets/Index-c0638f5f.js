import{W as ae,r as c,y as K,j as e,Y as le,a as m}from"./app-c35e44ea.js";import{A as te}from"./AuthenticatedLayout-8650b6a1.js";import{H as ie}from"./Header-8998d68d.js";import{I as N,a as v,h as re,b as ce,c as ne}from"./index.esm-7bb33f87.js";import{k as de,Q as n}from"./react-toastify.esm-f4382caf.js";import{A as oe}from"./AddButtonMobile-ab630ef4.js";import{T as me,C as xe,a as he,P as ue,b as pe}from"./ContentDesktop-e0960b1d.js";import{o as je,u as fe}from"./usePrevious-9cda1477.js";import{M as g}from"./Modal-baa06cb2.js";import{S as b}from"./SecondaryButton-d72803b0.js";import{P as S}from"./PrimaryButton-cf25e388.js";import{C as Ne}from"./ContainerDesktop-77e31537.js";import{D as ve}from"./DangerButton-267f5ed2.js";import ge from"./DepartmentDesktop-d9e55df7.js";import be from"./DepartmentMobile-f1e3077d.js";import{I as k}from"./InputLabel-f20874bf.js";import{T as C}from"./TextInput-1b317183.js";import{B as we}from"./BadgeSuccess-82c5a169.js";import{B as ye}from"./BadgeDanger-d80b8cba.js";import"./index.esm-d7f28cc5.js";import"./iconBase-b0136dc9.js";import"./transition-eca15743.js";/* empty css                      */import"./dayjs.min-17ff4607.js";import"./formatNumber-b542c689.js";import"./active-element-history-c9a8d777.js";import"./keyboard-bf5f0610.js";function De({role:t,organization:x,departments:l,searchFilter:R,code:Se}){const{data:i,setData:d,post:z,patch:H,delete:U,processing:_,errors:a,setError:L,reset:o}=ae({code:"",description:"",name:"",is_active:!0,user_name:""}),[Q,h]=c.useState(!1),[V,p]=c.useState(!1),[W,T]=c.useState(!1),[Y,u]=c.useState(!1),[j,I]=c.useState(!1),[w,E]=c.useState({id:0,name:""}),[r,F]=c.useState(R||""),[y,q]=c.useState({status:""}),[G]=je(r,500),J=fe(r);c.useEffect(()=>{J!==void 0&&A()},[G]);const X=s=>{s.preventDefault(),j?H(route("data-master.department.update",{organization:x.id,department:w.id}),{onSuccess:()=>{n.success("Departemen Berhasil Diubah",{position:n.POSITION.TOP_CENTER}),o(),h(!1)}}):z(route("data-master.department.post",x.id),{onSuccess:()=>{n.success("Departemen Berhasil Ditambahkan",{position:n.POSITION.TOP_CENTER}),o(),h(!1)}})},Z=s=>{s.preventDefault(),U(route("data-master.department.destroy",{organization:x.id,department:w.id}),{onSuccess:()=>{n.success("Departemen Berhasil Dihapus",{position:n.POSITION.TOP_CENTER}),o(),p(!1)},onError:f=>{n.error(f.delete,{position:n.POSITION.TOP_CENTER}),o(),p(!1)}})},P=()=>{I(!1),h(!1),L({code:"",description:"",name:"",is_active:""}),o()},B=()=>{h(!0),se()},D=()=>{T(!1),o()},M=s=>{d({code:s.code||"",description:s.description||"",name:s.name||"",is_active:s.is_active,user_name:s.user.name}),T(!0)},O=s=>{h(!0),I(!0),E({id:s.id,name:s.name}),d({code:s.code||"",description:s.description||"",name:s.name||"",is_active:s.is_active})},$=s=>{p(!0),E({id:s.id,name:s.name})},ee=s=>{s.preventDefault(),A(),u(!1)},se=()=>{K.reload({only:["code"],onSuccess:s=>{d("code",s.props.code)}})},A=()=>{K.reload({only:["departments"],data:{search:r,is_active:y.status},preserveState:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Data Prgram Kegiatan"}),e.jsx(de,{}),t!=="viewer"&&e.jsx(oe,{label:"Tambah",handleShowInputModal:B}),e.jsx(me,{zIndex:"z-50",search:r,setSearch:s=>F(s.target.value),pageBefore:l.links[0].url?e.jsx(m,{href:`/data-master/departments?page=${l.current_page-1}&search=${r}`,preserveState:!0,only:["departments"],children:e.jsx(N,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(N,{})}),pageAfter:l.links[l.links.length-1].url?e.jsx(m,{href:`/data-master/departments?page=${l.current_page+1}&search=${r}`,only:["departments"],preserveState:!0,children:e.jsx(v,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(v,{})}),page:e.jsxs(e.Fragment,{children:[l.current_page,"/",l.last_page]}),data:l,hasFilter:!0,showFilter:()=>u(!0)}),e.jsx(xe,{children:l.data.map(s=>e.jsx(be,{department:s,handleDelete:()=>$(s),handleEdit:()=>O(s),handleShow:()=>M(s),role:t},s.id))}),e.jsxs(Ne,{children:[e.jsxs(he,{children:[e.jsx("div",{className:"my-auto w-5/12",children:t!=="viewer"&&e.jsx(S,{className:"py-3",onClick:B,children:"Tambah Data"})}),e.jsx("div",{className:"my-auto w-4/12 gap-5 justify-end",children:e.jsx("div",{className:"text-end",children:e.jsx("button",{className:"py-3 px-3 border rounded-lg",onClick:()=>u(!0),children:e.jsx(re,{})})})}),e.jsxs("div",{className:"w-3/12 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(ce,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari Departemen Kegiatan",className:"w-full border-none focus:outline-none focus:ring-0",value:r||"",onChange:s=>F(s.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(ue,{data:l})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:l.links[0].url?e.jsx(m,{href:`/data-master/${x.id}/departments?page=${l.current_page-1}&search=${r}`,preserveState:!0,only:["departments"],children:e.jsx(N,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(N,{})})}),e.jsxs("div",{className:"my-auto",children:[l.current_page,"/",l.last_page]}),e.jsx("div",{className:"my-auto",children:l.links[l.links.length-1].url?e.jsx(m,{href:`/data-master/${x.id}/departments?page=${l.current_page+1}&search=${r}`,only:["departments"],preserveState:!0,children:e.jsx(v,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(v,{})})})]})]}),e.jsx("div",{className:"sm:flex hidden gap-5",children:e.jsx("div",{className:"w-full",children:e.jsx(pe,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"Kode"}),e.jsx("th",{className:"bg-gray-200",children:"Nama Proyek"}),e.jsx("th",{className:"bg-gray-200",children:"Deksripsi"}),e.jsx("th",{className:"bg-gray-200 text-center",children:"Status Aktif"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:l.data.map((s,f)=>e.jsx(ge,{department:s,className:`${f%2==0&&"bg-gray-100"}`,handleDelete:()=>$(s),handleEdit:()=>O(s),handleShow:()=>M(s),role:t},f))})]})})})})]}),e.jsx(g,{show:Q,onClose:P,children:e.jsxs("form",{onSubmit:X,className:"p-6",id:"Tambah",name:"Tambah",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:[j?"Edit":"Tambah"," Departemen"]}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-1/4 my-auto",children:e.jsx(k,{value:"Nama",className:" mx-auto my-auto",htmlFor:"name"})}),e.jsxs("div",{className:"w-3/4 relative",children:[e.jsx(C,{id:"name",name:"name",className:`w-full ${(a==null?void 0:a.name)&&"border-red-500"}`,placeholder:"Nama Departemen Kegiatan",value:i.name,onChange:s=>d("name",s.target.value.toUpperCase())}),(a==null?void 0:a.name)&&e.jsx("div",{className:"text-red-500 text-xs absolute",children:a.name})]})]})}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-1/4 my-auto",children:e.jsx(k,{value:"Kode",className:" mx-auto my-auto",htmlFor:"code"})}),e.jsxs("div",{className:"w-3/4 relative",children:[e.jsx(C,{id:"code",name:"code",className:`w-full ${(a==null?void 0:a.code)&&"border-red-500"}`,placeholder:"Kode",value:i.code,onChange:s=>d("code",s.target.value.toUpperCase()),autoComplete:"false"}),(a==null?void 0:a.code)&&e.jsx("div",{className:"text-red-500 text-xs absolute",children:a.code})]})]})}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-1/4 my-auto",children:e.jsx(k,{value:"Deskripsi",className:" mx-auto my-auto",htmlFor:"description"})}),e.jsxs("div",{className:"w-3/4 flex",children:[e.jsx(C,{id:"description",name:"description",className:`w-full ${(a==null?void 0:a.description)&&"border-red-500"}`,placeholder:"Deskripsi",value:i.description,onChange:s=>d("description",s.target.value.toUpperCase()),autoComplete:"false"}),(a==null?void 0:a.description)&&e.jsx("div",{className:"text-red-500 text-xs",children:a.description})]})]})}),j&&e.jsx("div",{className:"flex justify-start w-full gap-1 mt-5",children:e.jsxs("div",{className:"w-1/12",children:[e.jsx("div",{className:"form-control ",children:e.jsxs("label",{className:"label cursor-pointer gap-2",htmlFor:"is_active",children:[e.jsx("input",{type:"checkbox",className:"checkbox",id:"is_active",value:i.is_active,onChange:()=>d("is_active",!i.is_active),checked:i.is_active}),e.jsx("span",{className:"label-text font-bold",children:"Aktif"})]})}),a&&a.is_active&&e.jsx("div",{className:"-mb-3",children:e.jsx("div",{className:"text-xs text-red-500",children:a.is_active})})]})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(b,{onClick:P,children:"Batal"}),e.jsx(S,{className:"ms-3",disabled:_,children:j?"Edit":"Tambah"})]})]})}),e.jsx(g,{show:W,onClose:D,children:e.jsxs("div",{className:"px-5 py-2",children:[e.jsx("div",{className:"text-lg font-bold py-3 border-b",children:"Detail Departemen"}),e.jsxs("div",{className:"py-3 space-y-2",children:[e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal",children:"Nama Kegiatan"}),e.jsxs("div",{className:"sm:w-2/3 flex flex-row gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:": "}),i.name]})]}),e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal",children:"Kode"}),e.jsxs("div",{className:"sm:w-2/3 flex flex-row gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:": "}),i.code]})]}),e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal",children:"Deskripsi"}),e.jsxs("div",{className:"sm:w-2/3 flex flex-row gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:": "}),i.description]})]}),e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal",children:"Status"}),e.jsxs("div",{className:"sm:w-2/3 flex flex-row gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:": "}),i.is_active?e.jsx(we,{children:"Aktif"}):e.jsx(ye,{children:"Tidak Aktif"})]})]}),e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal",children:"Dibuat Oleh"}),e.jsxs("div",{className:"sm:w-2/3 flex flex-row gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:": "}),i.user_name]})]}),e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal"}),e.jsx("div",{className:"sm:w-2/3 text-end",children:e.jsx(b,{onClick:D,children:"Tutup"})})]})]})]})}),e.jsx(g,{show:V,onClose:D,children:e.jsxs("form",{onSubmit:Z,className:"p-6",id:"deleteForm",name:"deleteForm",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 text-center",children:["Hapus Departemen ",w.name]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(b,{onClick:()=>p(!1),children:"Batal"}),e.jsx(ve,{className:"ms-3",disabled:_,children:"Hapus"})]})]})}),e.jsx(g,{show:Y,onClose:()=>u(!1),children:e.jsxs("form",{onSubmit:ee,className:"p-6",id:"filter",name:"filter",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filter Departemen"}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-1/4 my-auto",children:"Status"}),e.jsx("div",{className:"w-3/4 flex",children:e.jsxs("select",{className:"select select-bordered w-full",id:"status",value:y.status,onChange:s=>q({...y,status:s.target.value}),children:[e.jsx("option",{disabled:!0,value:"",children:"--Pilih Status Aktif--"}),e.jsx("option",{value:"",children:"Semua"}),e.jsx("option",{value:!0,children:"Aktif"}),e.jsx("option",{value:!1,children:"Tidak Aktif"})]})})]})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(b,{onClick:()=>u(!1),children:"Batal"}),e.jsx(S,{className:"ms-3",children:"Filter"})]})]})})]})}De.layout=t=>e.jsx(te,{header:e.jsx(ie,{children:"Data Departemen Kegiatan"}),children:t,user:t.props.auth.user,organization:t.props.organization,title:"Data Departemen Kegiatan",backLink:e.jsx(m,{href:route("data-master",t.props.organization.id),children:e.jsx(ne,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(m,{href:route("data-master",t.props.organization.id),children:"Data Master"})}),e.jsx("li",{children:"Data Departemen Kegiatan"})]})}),role:t.props.role});export{De as default};
