import{W as $,r as u,j as e,Y as Q,a as c}from"./app-7f8a8ea8.js";import{A as W}from"./AuthenticatedLayout-4f5014dd.js";import{H as Y}from"./Header-048f8c3f.js";import{k as q,Q as i}from"./react-toastify.esm-50d5ca0b.js";/* empty css                      */import{I as b,a as N,b as G,c as J}from"./index.esm-bb594f4e.js";import{A as V}from"./AddButtonMobile-b002f18f.js";import{M as D}from"./Modal-fac143d0.js";import{S as E}from"./SecondaryButton-e63b9410.js";import{P as K}from"./PrimaryButton-ab709b7e.js";import{C as X}from"./ContainerDesktop-73046740.js";import{T as Z,a as ee,P as ae,C as se}from"./ContentDesktop-d2db494e.js";import{C as te}from"./ContentMobile-3682975c.js";import le from"./SavingCategoryMobile-d847142b.js";import re from"./SavingCategoryDesktop-fcee4ca2.js";import{I as O}from"./InputLabel-79a28923.js";import{T as ne}from"./TextInput-74c3860a.js";import{C as ie}from"./ClientSelectInput-819708c3.js";import{D as oe}from"./DangerButton-4b3a95f0.js";import"./ApplicationLogo-a305f28a.js";import"./iconBase-71402c28.js";import"./transition-edcb3542.js";import"./dayjs.min-08530bd6.js";import"./portal-90ac47ec.js";import"./close-provider-0c681dba.js";import"./formatNumber-b542c689.js";import"./combobox-d6e0d419.js";function ce({organization:l,categories:s,role:j,accounts:P,querySearch:A}){const{data:r,setData:h,post:M,patch:B,errors:n,processing:v,reset:f,delete:z}=$({id:null,name:"",account_id:null,auto_adjust:!0}),[x,w]=u.useState({id:null,name:"",code:"",is_cash:!1}),[d,y]=u.useState(A||""),[F,g]=u.useState(!1),[H,m]=u.useState(!1),[S,_]=u.useState({title:"Tambah Kategori",submit:"Tambah"}),[T,p]=u.useState(!1),C=()=>{m(!0),p(!1),f(),_({title:"Tambah Kategori",submit:"Tambah"})},k=a=>{g(!0);let t={...r};t={account_id:a.account_id,name:a.name,id:a.id,auto_adjust:!0},h(t)},I=a=>{m(!0),p(!0),_({title:"Ubah Kategori",submit:"Ubah"});let t={...r};t={account_id:a.account_id,name:a.name,id:a.id,auto_adjust:!0},h(t);let o={id:a.account.id,name:a.account.name,code:a.account.code,is_cash:!1};w(o)},R=a=>{a.preventDefault(),T?B(route("cashflow.saving-category.update",{organization:l.id,category:r.id}),{onSuccess:({props:t})=>{const{flash:o}=t;i.success(o.success,{position:i.POSITION.TOP_CENTER}),m(!1),p(!1),f()}}):M(route("cashflow.saving-category.store",{organization:l.id}),{onSuccess:({props:t})=>{const{flash:o}=t;i.success(o.success,{position:i.POSITION.TOP_CENTER}),m(!1),p(!1),f()}})},U=a=>{a.preventDefault(),z(route("cashflow.saving-category.delete",{organization:l.id,category:r.id}),{onSuccess:({props:t})=>{const{flash:o}=t;i.success(o.success,{position:i.POSITION.TOP_CENTER}),g(!1),p(!1),f()},onError:t=>{i.error(t.error,{position:i.POSITION.TOP_CENTER})}})},L=a=>{a&&(n.prepaid_student=null,w({id:a.id,name:a.name,code:a.code,is_cash:a.is_cash}),h("account_id",a.id))};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{title:"Data Kategori Tabungan"}),e.jsx(q,{}),j!=="viewer"&&e.jsx(V,{label:"Tambah",handleShowInputModal:C}),e.jsx(Z,{zIndex:"z-50",search:d,setSearch:a=>y(a.target.value),pageBefore:s.links[0].url?e.jsx(c,{href:route("cashflow.saving-category",{organization:l.id,page:s.current_page-1,search:d}),preserveState:!0,only:["categories"],children:e.jsx(b,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(b,{})}),pageAfter:s.links[s.links.length-1].url?e.jsx(c,{href:route("cashflow.saving-category",{organization:l.id,page:s.current_page+1,search:d}),only:["categories"],preserveState:!0,children:e.jsx(N,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(N,{})}),page:e.jsxs(e.Fragment,{children:[s.current_page,"/",s.last_page]}),data:s}),e.jsx(te,{children:s.data.map(a=>e.jsx(le,{category:a,handleDelete:()=>k(a),handleEdit:()=>I(a),role:j},a.id))}),e.jsxs(X,{children:[e.jsxs(ee,{children:[e.jsx("div",{className:"my-auto w-7/12",children:j!=="viewer"&&e.jsx("div",{className:"space-x-2",children:e.jsx(K,{className:"py-3",onClick:C,children:"Tambah Data"})})}),e.jsxs("div",{className:"w-3/12 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(G,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari Kategori",className:"w-full border-none focus:outline-none focus:ring-0",value:d||"",onChange:a=>y(a.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(ae,{data:s})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:s.links[0].url?e.jsx(c,{href:route("cashflow.saving-category",{organization:l.id,page:s.current_page-1,search:d}),preserveState:!0,only:["categories"],children:e.jsx(b,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(b,{})})}),e.jsxs("div",{className:"my-auto",children:[s.current_page,"/",s.last_page]}),e.jsx("div",{className:"my-auto",children:s.links[s.links.length-1].url?e.jsx(c,{href:route("cashflow.saving-category",{organization:l.id,page:s.current_page+1,search:d}),only:["categories"],preserveState:!0,children:e.jsx(N,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(N,{})})})]})]}),e.jsx("div",{className:"sm:flex hidden gap-5",children:e.jsx("div",{className:"w-full",children:e.jsx(se,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"Nama Kategori"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:s.data.map((a,t)=>e.jsx(re,{category:a,className:`${t%2==0&&"bg-gray-100"}`,handleDelete:()=>k(a),handleEdit:()=>I(a),role:j},t))})]})})})})]}),e.jsx(D,{show:H,onClose:()=>m(!1),children:e.jsxs("form",{onSubmit:R,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 border-b-2 py-1",children:S.title}),e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(O,{htmlFor:"name",value:"Nama Kategori",className:"mx-auto my-auto"})}),e.jsxs("div",{className:"sm:w-2/3 w-full",children:[e.jsx(ne,{id:"name",type:"text",name:"name",value:r.name,className:`mt-1 w-full ${n&&n.name&&"border-red-500"}`,isFocused:!0,onChange:a=>h("name",a.target.value.toUpperCase()),placeholder:"Nama Kategori"}),n&&n.name&&e.jsx("div",{className:"-mb-3",children:e.jsx("div",{className:"text-xs text-red-500",children:n.name})})]})]}),T&&e.jsx("div",{className:"flex justify-start w-full gap-1 mt-5",children:e.jsxs("div",{className:"w-12/12",children:[e.jsx("div",{className:"form-control ",children:e.jsxs("label",{className:"label cursor-pointer gap-2",htmlFor:"auto_adjust",children:[e.jsx("input",{type:"checkbox",className:"checkbox",id:"auto_adjust",value:r.auto_adjust,onChange:()=>h("auto_adjust",!r.auto_adjust),checked:r.auto_adjust}),e.jsx("span",{className:"label-text font-bold",children:"Sesuaikan Akun Tabungan Otomatis"})]})}),n&&n.auto_adjust&&e.jsx("div",{className:"-mb-3",children:e.jsx("div",{className:"text-xs text-red-500",children:n.auto_adjust})})]})}),!r.auto_adjust&&e.jsxs("div",{className:"md:flex gap-1",children:[e.jsx("div",{className:"w-full md:w-1/3 font-bold md:font-normal my-auto",children:e.jsx(O,{value:"Akun Tabungan",htmlFor:"account_id"})}),e.jsxs("div",{className:"w-full md:w-2/3 my-auto",children:[e.jsx(ie,{resources:P,selected:x,setSelected:a=>L(a),maxHeight:"max-h-40",placeholder:"Cari Akun",id:"account_id",isError:!!(n!=null&&n.account_id)}),(x==null?void 0:x.code)&&e.jsxs("div",{className:"absolute text-xs",children:["Kode: ",x.code]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(E,{onClick:a=>m(!1),children:"Batal"}),e.jsx(K,{className:"ms-3",disabled:v,children:S.submit})]})]})]})}),e.jsx(D,{show:F,onClose:()=>g(!1),children:e.jsxs("form",{onSubmit:U,className:"p-6",id:"delete-confirmation",name:"delete-confirmation",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 text-center",children:e.jsxs("div",{children:["Hapus Kategori Tabungan ",r==null?void 0:r.name,"?"]})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(E,{onClick:()=>g(!1),children:"Batal"}),e.jsx(oe,{className:"ms-3",disabled:v,children:"Hapus"})]})]})})]})}ce.layout=l=>e.jsx(W,{header:e.jsx(Y,{children:"Kategori Tabungan"}),children:l,user:l.props.auth.user,organization:l.props.organization,title:"Kategori Tabungan",backLink:e.jsx(c,{href:route("cashflow.saving",l.props.organization.id),children:e.jsx(J,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(c,{href:route("cashflow",l.props.organization.id),children:"Arus Kas"})}),e.jsx("li",{className:"font-bold",children:e.jsx(c,{href:route("cashflow.saving",l.props.organization.id),children:"Tabungan"})}),e.jsx("li",{children:"Kategori Tabungan"})]})}),role:l.props.role});export{ce as default};
