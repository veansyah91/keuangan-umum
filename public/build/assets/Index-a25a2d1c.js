import{r as o,m as Z,S as ee,j as e,L as se,$ as h}from"./app-c3de5fa6.js";import{A as ae}from"./AuthenticatedLayout-2f82e08a.js";import{H as le}from"./Header-ee160182.js";import{Q as m,k as te}from"./react-toastify.esm-94b2ee7c.js";/* empty css                      */import{I as w,a as b,b as ie,c as re}from"./index.esm-234976fb.js";import{A as de}from"./AddButtonMobile-0d121cb0.js";import{M as S}from"./Modal-5f8d8618.js";import{S as _}from"./SecondaryButton-fcf7be1a.js";import{P as U}from"./PrimaryButton-02cc0a94.js";import{u as ne,a as oe}from"./index.module-1bc829eb.js";import{C as me}from"./ContainerDesktop-744bb52e.js";import{T as ce,a as xe,P as he,C as fe}from"./ContentDesktop-8217dec4.js";import{C as pe}from"./ContentMobile-168e507c.js";import{D as ue}from"./DangerButton-9faf9837.js";import je from"./StaffMobile-ffdeee88.js";import Ne from"./StaffDesktop-155e6815.js";import{I as x}from"./InputLabel-60badb3d.js";import{T as p}from"./TextInput-ebb8b1c3.js";import{d as ve}from"./dayjs.min-c211a108.js";import{B as ye}from"./BadgeSuccess-83002f6d.js";import{B as we}from"./BadgeDanger-1384f98a.js";import{S as be}from"./SuccessButton-b844c36a.js";import"./ApplicationLogo-33e039c9.js";import"./iconBase-23c1fa9a.js";import"./transition-294d1a88.js";import"./portal-97852d2d.js";import"./close-provider-c2a46ce3.js";import"./formatNumber-b542c689.js";const k=()=>{const i=ve().year(),n=i-20;let l=[];for(let u=n;u<i+1;u++)l=[...l,u];return l};function ge({role:i,organization:n,contacts:l,category:u,searchFilter:$,flash:v}){o.useState(!1);const[L,j]=o.useState(!1),[R,g]=o.useState(!1),[H,f]=o.useState(!1),[C,D]=o.useState({title:"",submit:""}),[I,T]=o.useState(!1),[c,E]=o.useState($||""),[z,V]=o.useState(""),{data:t,setData:d,post:J,patch:Q,processing:P,errors:a,reset:y,delete:Y,setError:M}=Z({id:null,name:"",phone:"",address:"",description:"",no_ref:"",position:"",entry_year:k()[20],category:u.id}),q=ne(c),[G]=oe(c,500);o.useEffect(()=>{v!=null&&v.error&&m.error(v.error,{position:m.POSITION.TOP_CENTER})},[]),o.useEffect(()=>{q!==void 0&&K()},[G]);const K=()=>{ee.reload({only:["contacts"],data:{search:c}})},O=s=>{V(`Hapus Data Staff ${s.name} ?`),j(!0),d("id",s.id)},W=s=>{s.preventDefault(),I?Q(route("data-master.staff.update",{organization:n.id,contact:t.id}),{onSuccess:({props:r})=>{const{flash:N}=r;m.success(N.success,{position:m.POSITION.TOP_CENTER}),f(!1),y()},onError:r=>{console.log(r)}}):J(route("data-master.staff.store",n.id),{onSuccess:({props:r})=>{const{flash:N}=r;m.success(N.success,{position:m.POSITION.TOP_CENTER}),f(!1),y()},onError:r=>{console.log(r)}})},X=s=>{s.preventDefault(),Y(route("data-master.staff.destroy",{organization:n.id,contact:t.id}),{onSuccess:({props:r})=>{const{flash:N}=r;m.success(N.success,{position:m.POSITION.TOP_CENTER}),j(!1),y()},onError:r=>{j(!1),m.error(r.message,{position:m.POSITION.TOP_CENTER})}})},B=()=>{y(),T(!1),D({title:"Tambah Staf",submit:"Tambah"}),M("name",""),f(!0)},F=s=>{g(!0),d({id:s.id,name:s.name,is_active:s.is_active>0,phone:s.phone||"",address:s.address||"",description:s.description||"",no_ref:s.staff.no_ref||"",position:s.staff.position||"",entry_year:s.staff.entry_year||""})},A=s=>{T(!0),M("name",""),f(!0),D({title:"Ubah Staf",submit:"Ubah"}),d({id:s.id,name:s.name,is_active:s.is_active>0,phone:s.phone||"",address:s.address||"",description:s.description||"",no_ref:s.staff.no_ref||"",position:s.staff.position||"",entry_year:s.staff.entry_year||k()[20]})};return e.jsxs(e.Fragment,{children:[e.jsx(se,{title:"Data Staf"}),e.jsx(te,{}),i!=="viewer"&&e.jsx(de,{label:"Tambah",handleShowInputModal:B}),e.jsx(ce,{zIndex:"z-50",search:c,setSearch:s=>E(s.target.value),pageBefore:l.links[0].url?e.jsx(h,{href:route("data-master.staff",{organization:n.id,page:l.current_page-1,search:c}),preserveState:!0,only:["contacts"],children:e.jsx(w,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(w,{})}),pageAfter:l.links[l.links.length-1].url?e.jsx(h,{href:route("data-master.staff",{organization:n.id,page:l.current_page+1,search:c}),only:["contacts"],preserveState:!0,children:e.jsx(b,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(b,{})}),page:e.jsxs(e.Fragment,{children:[l.current_page,"/",l.last_page]}),data:l}),e.jsx(pe,{children:l.data.map(s=>e.jsx(je,{contact:s,handleDelete:()=>O(s),handleEdit:()=>A(s),handleShow:()=>F(s),role:i},s.id))}),e.jsxs(me,{children:[e.jsxs(xe,{children:[e.jsx("div",{className:"my-auto w-7/12",children:i!=="viewer"&&e.jsxs("div",{className:"space-x-2",children:[e.jsx(U,{className:"py-3",onClick:B,children:"Tambah Data"}),e.jsx(h,{href:route("data-master.staff.import",n.id),children:e.jsx(be,{className:"py-3",children:"Import Data (.csv)"})})]})}),e.jsxs("div",{className:"w-3/12 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(ie,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari Staf",className:"w-full border-none focus:outline-none focus:ring-0",value:c||"",onChange:s=>E(s.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(he,{data:l})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:l.links[0].url?e.jsx(h,{href:route("data-master.staff",{organization:n.id,page:l.current_page-1,search:c}),preserveState:!0,only:["contacts"],children:e.jsx(w,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(w,{})})}),e.jsxs("div",{className:"my-auto",children:[l.current_page,"/",l.last_page]}),e.jsx("div",{className:"my-auto",children:l.links[l.links.length-1].url?e.jsx(h,{href:route("data-master.staff",{organization:n.id,page:l.current_page+1,search:c}),only:["contacts"],preserveState:!0,children:e.jsx(b,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(b,{})})})]})]}),e.jsx("div",{className:"sm:flex hidden gap-5",children:e.jsx("div",{className:"w-full",children:e.jsx(fe,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"Nama Staf"}),e.jsx("th",{className:"bg-gray-200",children:"Posisi"}),e.jsx("th",{className:"bg-gray-200",children:"Tahun Masuk"}),e.jsx("th",{className:"bg-gray-200",children:"Status"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:l.data.map((s,r)=>e.jsx(Ne,{contact:s,className:`${r%2==0&&"bg-gray-100"}`,handleDelete:()=>O(s),handleEdit:()=>A(s),handleShow:()=>F(s),role:i},r))})]})})})})]}),e.jsx(S,{show:H,onClose:()=>f(!1),children:e.jsxs("form",{onSubmit:W,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 border-b-2 py-1",children:C.title}),e.jsxs("div",{className:"mt-5 space-y-5 overflow-y-auto h-[400px]",id:"body-input",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(x,{htmlFor:"name",value:"Nama Staf",className:"mx-auto my-auto"})}),e.jsxs("div",{className:"sm:w-2/3 w-full",children:[e.jsx(p,{id:"name",type:"text",name:"name",value:t.name,className:`mt-1 w-full ${a&&a.name&&"border-red-500"}`,isFocused:!0,onChange:s=>d("name",s.target.value.toUpperCase()),placeholder:"Nama Staf"}),a&&a.name&&e.jsx("div",{className:"-mb-3",children:e.jsx("div",{className:"text-xs text-red-500",children:a.name})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1 mt-5 sm:mt-2",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(x,{value:"No. Handphone (opsional)",htmlFor:"phone",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(p,{id:"phone",name:"phone",className:`w-full ${(a==null?void 0:a.phone)&&"border-red-500"}`,placeholder:"628xxxx",value:t.phone,onChange:s=>d("phone",s.target.value.toUpperCase())}),(a==null?void 0:a.phone)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.phone})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1 mt-5 sm:mt-2",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(x,{value:"Alamat (opsional)",htmlFor:"address",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(p,{id:"address",name:"address",className:`w-full ${(a==null?void 0:a.address)&&"border-red-500"}`,placeholder:"Alamat",value:t.address,onChange:s=>d("address",s.target.value.toUpperCase())}),(a==null?void 0:a.address)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.address})]})]}),e.jsx("div",{className:"text-center font-bold",children:"Detail Staf"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1 mt-5 sm:mt-2",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(x,{value:"Tahun Masuk",htmlFor:"entry_year",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx("select",{className:"select select-bordered w-full",defaultValue:t.entry_year,onChange:s=>d("entry_year",parseInt(s.target.value)),id:"entry_year",children:k().map(s=>e.jsx("option",{children:s},s))}),(a==null?void 0:a.entry_year)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.entry_year})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1 mt-5 sm:mt-2",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(x,{value:"No Staf (opsional)",htmlFor:"no_ref",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(p,{id:"no_ref",name:"no_ref",className:`w-full ${(a==null?void 0:a.no_ref)&&"border-red-500"}`,placeholder:"No Staf",value:t.no_ref,onChange:s=>d("no_ref",s.target.value.toUpperCase())}),(a==null?void 0:a.no_ref)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.no_ref})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1 mt-5 sm:mt-2",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(x,{value:"Posisi (opsional)",htmlFor:"position",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(p,{id:"position",name:"position",className:`w-full ${(a==null?void 0:a.position)&&"border-red-500"}`,placeholder:"Posisi",value:t.position,onChange:s=>d("position",s.target.value.toUpperCase())}),(a==null?void 0:a.position)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.position})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1 mt-5 sm:mt-2",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(x,{value:"Informasi Tambahan (opsional)",htmlFor:"description",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(p,{id:"description",name:"description",className:`w-full ${(a==null?void 0:a.description)&&"border-red-500"}`,placeholder:"Informasi Tambahan",value:t.description,onChange:s=>d("description",s.target.value.toUpperCase())}),(a==null?void 0:a.description)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.description})]})]}),I&&e.jsx("div",{className:"w-1/6 mt-5",children:e.jsx("div",{className:"form-control ",children:e.jsxs("label",{className:"label cursor-pointer gap-2",htmlFor:"is_active",children:[e.jsx("input",{type:"checkbox",className:"checkbox",id:"is_active",value:t.is_active,onChange:()=>d("is_active",!t.is_active),checked:t.is_active}),e.jsx("span",{className:"label-text font-bold",children:"Aktif"})]})})})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(_,{onClick:s=>f(!1),children:"Batal"}),e.jsx(U,{className:"ms-3",disabled:P,children:C.submit})]})]})}),e.jsx(S,{show:R,onClose:()=>g(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 border-b-2 py-1",children:"Detail Staff"}),e.jsxs("div",{className:"mt-5 space-y-5 overflow-y-auto h-[400px]",children:[e.jsx("div",{className:"sm:mx-auto px-3 sm:px-0 space-y-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"sm:w-1/3 font-bold",children:"Nama"}),e.jsxs("div",{className:"sm:w-2/3 flex gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:":"}),t.name]})]})}),e.jsx("div",{className:"sm:mx-auto px-3 sm:px-0 space-y-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"sm:w-1/3 font-bold",children:"No Staf"}),e.jsxs("div",{className:"sm:w-2/3 flex gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:":"}),t.no_ref??"-"]})]})}),e.jsx("div",{className:"sm:mx-auto px-3 sm:px-0 space-y-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"sm:w-1/3 font-bold",children:"Jabatan"}),e.jsxs("div",{className:"sm:w-2/3 flex gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:":"}),t.position]})]})}),e.jsx("div",{className:"sm:mx-auto px-3 sm:px-0 space-y-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"sm:w-1/3 font-bold",children:"Tahun Masuk"}),e.jsxs("div",{className:"sm:w-2/3 flex gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:":"}),t.entry_year]})]})}),e.jsx("div",{className:"sm:mx-auto px-3 sm:px-0 space-y-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"sm:w-1/3 font-bold",children:"No. Handphone"}),e.jsxs("div",{className:"sm:w-2/3 flex gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:":"}),t.phone]})]})}),e.jsx("div",{className:"sm:mx-auto px-3 sm:px-0 space-y-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"sm:w-1/3 font-bold",children:"Alamat"}),e.jsxs("div",{className:"sm:w-2/3 flex gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:":"}),t.address]})]})}),e.jsx("div",{className:"sm:mx-auto px-3 sm:px-0 space-y-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"sm:w-1/3 font-bold",children:"Informasi Lain"}),e.jsxs("div",{className:"sm:w-2/3 flex gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:":"}),t.description]})]})}),e.jsx("div",{className:"sm:mx-auto px-3 sm:px-0 space-y-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"sm:w-1/3 font-bold",children:"Status"}),e.jsxs("div",{className:"sm:w-2/3 flex gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:":"}),t.is_active?e.jsx(ye,{children:"Aktif"}):e.jsx(we,{children:"Tidak Aktif"})]})]})})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(_,{onClick:s=>g(!1),children:"Batal"})})]})}),e.jsx(S,{show:L,onClose:()=>j(!1),children:e.jsxs("form",{onSubmit:X,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 text-center",children:z}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(_,{onClick:()=>j(!1),children:"Batal"}),e.jsx(ue,{className:"ms-3",disabled:P,children:"Hapus"})]})]})})]})}ge.layout=i=>e.jsx(ae,{header:e.jsx(le,{children:"Data Staf"}),children:i,user:i.props.auth.user,organization:i.props.organization,title:"Data Staf",backLink:e.jsx(h,{href:route("data-master",i.props.organization.id),children:e.jsx(re,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(h,{href:route("data-master",i.props.organization.id),children:"Data Master"})}),e.jsx("li",{children:"Data Staf"})]})}),role:i.props.role});export{ge as default};
