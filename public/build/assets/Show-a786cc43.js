import{q as v,r as i,W as S,y as k,j as e,Y as D,a as n}from"./app-404c1d62.js";import{A as P}from"./AuthenticatedLayout-d0f4642d.js";import{H as T}from"./Header-7ddea49a.js";import{Q as x,k as I}from"./react-toastify.esm-fe90371e.js";/* empty css                      */import{I as c,a as u,b as _,c as C}from"./index.esm-6826a6ec.js";import{F as E}from"./index.esm-f39d2458.js";import{u as R,o as z}from"./index.module-bf903e5f.js";import{C as A}from"./ContainerDesktop-2d0e922f.js";import{T as F,C as M,a as O,P as B,b as H}from"./ContentDesktop-4e741aac.js";import $ from"./StudentEntryReceivableDetailMobile-90b80c3c.js";import q from"./StudentEntryReceivableDetailDesktop-64306bb8.js";import{f as J}from"./formatNumber-b542c689.js";import"./ApplicationLogo-b3a0808c.js";import"./iconBase-516d5930.js";import"./transition-a5f8161b.js";import"./dayjs.min-b356c38e.js";import"./BadgeDanger-cd8ff050.js";import"./BadgeSuccess-7f75696a.js";import"./index.esm-16a5ad5a.js";import"./index.esm-52714ea0.js";function K({role:t,organization:o,receivables:a,searchFilter:p,receivable:l}){const{errors:h}=v().props;i.useState(!1);const[L,j]=i.useState(!1),[r,m]=i.useState(p||""),[Q,f]=i.useState(""),{data:V,setData:g,delete:W,processing:Y,reset:G}=S({id:null,receivable_id:null}),y=R(r),[N]=z(r,500);i.useEffect(()=>{y!==void 0&&b()},[N]),i.useEffect(()=>{h&&x.error(h.message,{position:x.POSITION.TOP_CENTER})},[]);const b=()=>{k.reload({only:["receivables"],data:{search:r}})},w=s=>{f(`Hapus Piutang ${s.no_ref}`),j(!0),g({id:s.id,receivable:s.receivable_id})};return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:"Piutang Iuran Siswa"}),e.jsx(I,{}),e.jsx(F,{zIndex:"z-50",search:r,setSearch:s=>m(s.target.value),pageBefore:a.links[0].url?e.jsx(n,{href:route("cashflow.student-entry-receivable.show",{organization:o.id,receivable:l.id,page:a.current_page-1,search:r}),preserveState:!0,only:["receivables"],children:e.jsx(c,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(c,{})}),pageAfter:a.links[a.links.length-1].url?e.jsx(n,{href:route("cashflow.student-entry-receivable.show",{organization:o.id,receivable:l.id,page:a.current_page+1,search:r}),only:["receivables"],preserveState:!0,children:e.jsx(u,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(u,{})}),page:e.jsxs(e.Fragment,{children:[a.current_page,"/",a.last_page]}),data:a}),e.jsx(M,{children:a.data.map((s,d)=>e.jsx($,{receivable:s,handleDelete:()=>w(s),role:t},d))}),e.jsxs(A,{children:[e.jsxs(O,{children:[e.jsxs("div",{className:"my-auto w-7/12 text-2xl",children:["Total: ",e.jsxs("span",{className:"font-bold",children:["IDR. ",J(l.value)]})]}),e.jsx("div",{className:"my-auto w-4/12 flex gap-5 justify-end",children:e.jsx(n,{className:"py-3 px-3 border rounded-lg h-full",href:route("cashflow.student-entry-receivable.print",{organization:o.id,studentEntryReceivable:l.id}),children:e.jsx(E,{})})}),e.jsxs("div",{className:"w-3/12 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(_,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari No Ref",className:"w-full border-none focus:outline-none focus:ring-0",value:r||"",onChange:s=>m(s.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(B,{data:a})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:a.links[0].url?e.jsx(n,{href:route("cashflow.student-entry-receivable.show",{organization:o.id,receivable:l.id,page:a.current_page-1,search:r}),preserveState:!0,only:["receivables"],children:e.jsx(c,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(c,{})})}),e.jsxs("div",{className:"my-auto",children:[a.current_page,"/",a.last_page]}),e.jsx("div",{className:"my-auto",children:a.links[a.links.length-1].url?e.jsx(n,{href:route("cashflow.student-entry-receivable.show",{organization:o.id,receivable:l.id,page:a.current_page+1,search:r}),only:["receivables"],preserveState:!0,children:e.jsx(u,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(u,{})})})]})]}),e.jsx("div",{className:"sm:flex hidden gap-5",children:e.jsx("div",{className:"w-full",children:e.jsx(H,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"Tanggal Transaksi"}),e.jsx("th",{className:"bg-gray-200",children:"No Ref"}),e.jsx("th",{className:"bg-gray-200",children:"Tahun Ajaran"}),e.jsx("th",{className:"bg-gray-200 text-end",children:"Jumlah"}),e.jsx("th",{className:"bg-gray-200",children:"Status"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:a.data.map((s,d)=>e.jsx(q,{receivable:s,className:`${d%2==0&&"bg-gray-100"}`,role:t},d))})]})})})})]})]})}K.layout=t=>e.jsx(P,{header:e.jsxs(T,{children:["Piutang Iuran Tahunan Siswa ",t.props.contact.name]}),children:t,user:t.props.auth.user,organization:t.props.organization,title:"Piutang Iuran Tahunan",backLink:e.jsx(n,{href:route("cashflow.student-entry-receivable",t.props.organization.id),children:e.jsx(C,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(n,{href:route("cashflow",t.props.organization.id),children:"Arus Kas"})}),e.jsx("li",{className:"font-bold",children:e.jsx(n,{href:route("cashflow.student-entry-receivable",t.props.organization.id),children:"Piutang Iuran Tahunan Siswa"})}),e.jsx("li",{children:"Detail Piutang Iuran Tahunan Siswa"})]})}),role:t.props.role});export{K as default};
