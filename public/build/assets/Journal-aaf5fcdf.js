import{r as t,j as e,Y as Z,y as ee,a as k}from"./app-d6cc0328.js";import{D as C,A as se}from"./AuthenticatedLayout-adb0bb29.js";import{H as te}from"./Header-487687ca.js";import{s as g,t as ae,c as le}from"./index.esm-e9e95d44.js";import{S as re}from"./SecondaryButton-2f553626.js";import{d as E}from"./index.esm-8952c758.js";import{P as ne}from"./PrimaryButton-0bcb36a2.js";import{d as o}from"./dayjs.min-9ba1fe63.js";import de from"./JournalContent-a05adf45.js";import{I as y}from"./InputLabel-efdb8753.js";import{C as D}from"./ClientSelectInput-47ddb578.js";import{j as S}from"./disclosure-8a8f1169.js";import{z as ie}from"./transition-39e57d8c.js";import"./ApplicationLogo-f467a581.js";import"./iconBase-747368b9.js";/* empty css                      */import"./formatNumber-b542c689.js";import"./combobox-17634d86.js";import"./portal-7ff53c34.js";import"./close-provider-529b60ed.js";function oe({journals:a,organization:r,startDateFilter:p,endDateFilter:f,departments:v,projects:N,programs:b,department:n,project:d,program:i}){const[L,F]=t.useState(a||[]),[c,J]=t.useState(p||""),[m,I]=t.useState(f||""),[B,j]=t.useState(!1),[T,A]=t.useState({startDate:p||"",endDate:p||""}),[H,K]=t.useState({startDate:f||"",endDate:f||""}),[x,w]=t.useState({id:d?d.id:null,name:d?d.name:"",code:d?d.code:""}),[O,ce]=t.useState(""),[h,Y]=t.useState({id:i?i.id:null,name:i?i.name:"",code:i?i.code:""}),[R,me]=t.useState(""),[u,M]=t.useState({id:n?n.id:null,name:n?n.name:"",code:n?n.code:""}),[V,xe]=t.useState(""),$=s=>{Y(s)},z=()=>{Y({id:null,name:"",code:""})},U=s=>{w(s)},_=()=>{w({id:null,name:"",code:""})},q=s=>{M(s)},G=()=>{M({id:null,name:"",code:""})},Q=s=>{A(s),J(o(s.endDate).format("YYYY-MM-DD"))},W=s=>{K(s),I(o(s.endDate).format("YYYY-MM-DD"))},X=()=>{ee.reload({only:["journals"],data:{startDate:c,endDate:m,program:h.id,project:x.id,department:u.id},onBefore:s=>{s.completed?j(!1):j(!0)},onSuccess:s=>{F(s.props.journals)},onError:s=>{console.log(s)},onFinish:s=>{s.completed?j(!1):j(!0)},preserveState:!0})},P=()=>{window.print()};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{title:`Laporan Jurnal Periode : ${o(c).format("MMMM DD, YYYY")} - ${o(m).format("MMMM DD, YYYY")}`}),e.jsx("div",{className:"sm:pt-0 pb-16 pt-12",children:e.jsxs("div",{className:"bg-white py-2 sm:pt-0 px-5",children:[e.jsxs("div",{className:"flex sm:flex-row justify-between gap-2 print:hidden",children:[e.jsxs("div",{className:"px-3 my-auto flex gap-3",children:[e.jsx("div",{className:"my-auto",children:e.jsx(C,{value:T,onChange:Q,useRange:!1,asSingle:!0,placeholder:"Tanggal Awal",id:"date",displayFormat:"MMMM DD, YYYY"})}),e.jsx("div",{className:"my-auto",children:e.jsx(C,{value:H,onChange:W,useRange:!1,asSingle:!0,placeholder:"Tanggal Akhir",id:"date",displayFormat:"MMMM DD, YYYY"})}),e.jsx("div",{className:"my-auto",children:e.jsx(ne,{disabled:!c||!m||c>m||B,onClick:X,children:"Filter"})})]}),e.jsx("div",{className:"text-end px-3 hidden sm:block",children:e.jsx(re,{onClick:P,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"my-auto",children:e.jsx(E,{})}),e.jsx("div",{className:"my-auto",children:"Print"})]})})}),e.jsx("div",{className:"fixed sm:hidden bottom-2 right-2",children:e.jsx("button",{onClick:P,className:"bg-white border-2 border-slate-900 p-2 rounded-full h-14 w-14",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"my-auto mx-auto",children:e.jsx(E,{})})})})})]}),b.length>0||N.length>0||v.length?e.jsx(S,{as:"div",className:"mt-3 print:hidden",children:({open:s})=>e.jsxs(e.Fragment,{children:[e.jsx(ie,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:e.jsx(S.Panel,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-start gap-3 sm:py-5 mb-3",children:[b.length>0&&e.jsxs("div",{className:"sm:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(y,{value:"Program Kegiatan",htmlFor:"program"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(D,{resources:b,selected:h,setSelected:l=>$(l),maxHeight:"max-h-40",placeholder:"Cari Program Kegiatan",isError:!!R,id:"program"}),h.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",h.code]})]}),h.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:z,children:e.jsx(g,{})})})]})]}),N.length>0&&e.jsxs("div",{className:"sm:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(y,{value:"Proyek",htmlFor:"project"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(D,{resources:N,selected:x,setSelected:l=>U(l),maxHeight:"max-h-40",placeholder:"Cari Proyek",isError:!!O,id:"project"}),x.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",x.code]})]}),x.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:_,children:e.jsx(g,{})})})]})]}),v.length>0&&e.jsxs("div",{className:"sm:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(y,{value:"Departemen",htmlFor:"department"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(D,{resources:v,selected:u,setSelected:l=>q(l),maxHeight:"max-h-40",placeholder:"Cari Departemen",isError:!!V,id:"department"}),u.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",u.code]})]}),u.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:G,children:e.jsx(g,{})})})]})]})]})})}),e.jsx(S.Button,{className:"flex w-full justify-between rounded-lg bg-slate-100 px-4 py-2 text-left text-sm font-medium text-slate-900 hover:bg-slate-200 focus:outline-none focus-visible:ring focus-visible:ring-slate-500/75",children:e.jsxs("div",{className:"flex justify-center w-full gap-3",children:[e.jsxs("span",{children:["Tampilkan Lebih ",s?"Sedikit":"Banyak"]}),e.jsx(ae,{className:`${s?"":"rotate-180 transform"} h-5 w-5 text-slate-500`})]})})]})}):"",e.jsxs("div",{className:"uppercase pt-9 pb-3 border-b hidden print:flex print:justify-between",children:[e.jsx("div",{className:"w-1/2 text-2xl my-auto",children:"Laporan jurnal"}),e.jsxs("div",{className:"w-1/2 text-end mt-auto",children:[e.jsx("div",{children:r.name}),e.jsx("div",{className:"text-xs",children:r.address}),e.jsxs("div",{className:"text-xs",children:[r.village,", ",r.district,", ",r.regency,","," ",r.province]})]})]}),e.jsxs("div",{className:"w-full text-end italic mt-3 hidden print:block",children:["Periode : ",o(c).format("MMMM DD, YYYY")," - ",o(m).format("MMMM DD, YYYY")]}),e.jsx("div",{className:"my-2 -mx-5 space-y-3 print:font-['Open_Sans'] overflow-auto",children:e.jsx("div",{className:"sm:w-full w-[550px] print:w-full",children:e.jsxs("table",{className:"table uppercase table-zebra table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-slate-900 font-bold border-b-2 border-slate-900",children:[e.jsx("th",{children:"ref/tanggal"}),e.jsx("th",{children:"Dekripsi"}),e.jsx("th",{className:"text-end",children:"debit"}),e.jsx("th",{className:"text-end",children:"kredit"}),e.jsx("th",{children:"Note"})]})}),e.jsx("tbody",{children:L.map((s,l)=>e.jsx(de,{journal:s},l))})]})})})]})})]})}oe.layout=a=>e.jsx(se,{header:e.jsx(te,{children:"Laporan Jurnal"}),children:a,user:a.props.auth.user,organization:a.props.organization,title:"Laporan Jurnal",backLink:e.jsx(k,{href:route("report",a.props.organization.id),children:e.jsx(le,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(k,{href:route("report",a.props.organization.id),children:"Laporan"})}),e.jsx("li",{children:"Laporan Jurnal"})]})}),role:a.props.role});export{oe as default};
