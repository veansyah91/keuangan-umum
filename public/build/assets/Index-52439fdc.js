import{r as c,W as Y,y as q,j as e,Y as G,a as h}from"./app-e9563627.js";import{A as X}from"./AuthenticatedLayout-7672ecfe.js";import{H as Z}from"./Header-0a8198e9.js";import{k as ee,Q as m}from"./react-toastify.esm-d14c0da9.js";/* empty css                      */import{I as j,a as f,b as ae,c as se}from"./index.esm-9ad57f03.js";import{A as te}from"./AddButtonMobile-e389bf74.js";import{M as T}from"./Modal-7fd7ebf9.js";import{S as E}from"./SecondaryButton-961c8d7d.js";import{P as C}from"./PrimaryButton-c99381a3.js";import{u as le,a as re}from"./index.module-862d5319.js";import{C as ne}from"./ContainerDesktop-e7daefaa.js";import{T as ie,C as oe,a as ce,P as me,b as de}from"./ContentDesktop-03f83212.js";import{D as ue}from"./DangerButton-104c8b85.js";import he from"./SalaryCategoryMobile-cf3ae6f0.js";import xe from"./SalaryCategoryDesktop-7e32a2b5.js";import{I as v}from"./InputLabel-af074bd9.js";import{T as K}from"./TextInput-cc0be9b5.js";import{N as pe}from"./react-number-format.es-c958ab94.js";import"./ApplicationLogo-46f56534.js";import"./iconBase-cf74823f.js";import"./transition-3412008e.js";import"./dayjs.min-a6718771.js";import"./portal-67fe3a42.js";import"./close-provider-bcf29e6f.js";import"./formatNumber-b542c689.js";import"./BadgeDanger-535bcdf2.js";import"./BadgeSuccess-bf07c64c.js";function je({role:n,organization:d,salaryCategories:s,searchFilter:M}){c.useState(!1);const[O,x]=c.useState(!1),[F,u]=c.useState(!1),[b,g]=c.useState({title:"",submit:""}),[y,w]=c.useState(!1),[i,_]=c.useState(M||""),[B,H]=c.useState(""),{data:t,setData:o,post:A,patch:R,processing:S,errors:r,reset:p,delete:z,setError:k}=Y({id:null,name:"",value:0,has_hour:!1,is_cut:!1,is_active:!0,unit:""}),U=le(i),[L]=re(i,500);c.useEffect(()=>{U!==void 0&&V()},[L]);const V=()=>{q.reload({only:["salaryCategories"],data:{search:i}})},D=a=>{H(`Hapus Komponen Penggajian ${a.name} ?`),x(!0),o("id",a.id)},$=a=>{a.preventDefault(),y?R(route("data-master.salary-category.update",{organization:d.id,salaryCategory:t.id}),{onSuccess:({props:l})=>{const{flash:N}=l;m.success(N.success,{position:m.POSITION.TOP_CENTER}),u(!1),p()},onError:l=>{console.log(l)}}):A(route("data-master.salary-category.store",d.id),{onSuccess:({props:l})=>{const{flash:N}=l;m.success(N.success,{position:m.POSITION.TOP_CENTER}),u(!1),p()},onError:l=>{console.log(l)}})},J=a=>{const{value:l}=a;o("value",l)},Q=a=>{a.preventDefault(),z(route("data-master.salary-category.destroy",{organization:d.id,salaryCategory:t.id}),{onSuccess:()=>{x(!1),m.success("Komponen Penggajian Berhasil Dihapus",{position:m.POSITION.TOP_CENTER}),p()},onError:l=>{x(!1),m.error(l.message,{position:m.POSITION.TOP_CENTER})}})},W=()=>{let a=!t.has_hour;o({...t,has_hour:a,unit:a?"jam":"hari"})},I=()=>{p(),w(!1),g({title:"Tambah Komponen",submit:"Tambah"}),k("name",""),u(!0)},P=a=>{w(!0),k("name",""),u(!0),g({title:"Ubah Komponen",submit:"Ubah"}),o({id:a.id,name:a.name,is_active:a.is_active,value:a.value,has_hour:a.has_hour,is_cut:a.is_cut})};return e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Data Komponen Penggajian"}),e.jsx(ee,{}),n!=="viewer"&&e.jsx(te,{label:"Tambah",handleShowInputModal:I}),e.jsx(ie,{zIndex:"z-50",search:i,setSearch:a=>_(a.target.value),pageBefore:s.links[0].url?e.jsx(h,{href:route("data-master.salary-category",{organization:d.id,page:s.current_page-1,search:i}),preserveState:!0,only:["salaryCategories"],children:e.jsx(j,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(j,{})}),pageAfter:s.links[s.links.length-1].url?e.jsx(h,{href:route("data-master.salary-category",{organization:d.id,page:s.current_page+1,search:i}),only:["salaryCategories"],preserveState:!0,children:e.jsx(f,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(f,{})}),page:e.jsxs(e.Fragment,{children:[s.current_page,"/",s.last_page]}),data:s}),e.jsx(oe,{children:s.data.map(a=>e.jsx(he,{category:a,handleDelete:()=>D(a),handleEdit:()=>P(a),role:n},a.id))}),e.jsxs(ne,{children:[e.jsxs(ce,{children:[e.jsx("div",{className:"my-auto w-7/12",children:n!=="viewer"&&e.jsx("div",{className:"space-x-2",children:e.jsx(C,{className:"py-3",onClick:I,children:"Tambah Data"})})}),e.jsxs("div",{className:"w-3/12 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(ae,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari Komponen Penggajian",className:"w-full border-none focus:outline-none focus:ring-0",value:i||"",onChange:a=>_(a.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(me,{data:s})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:s.links[0].url?e.jsx(h,{href:route("data-master.salary-category",{organization:d.id,page:s.current_page-1,search:i}),preserveState:!0,only:["salaryCategories"],children:e.jsx(j,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(j,{})})}),e.jsxs("div",{className:"my-auto",children:[s.current_page,"/",s.last_page]}),e.jsx("div",{className:"my-auto",children:s.links[s.links.length-1].url?e.jsx(h,{href:route("data-master.salary-category",{organization:d.id,page:s.current_page+1,search:i}),only:["salaryCategories"],preserveState:!0,children:e.jsx(f,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(f,{})})})]})]}),e.jsx("div",{className:"sm:flex hidden gap-5",children:e.jsx("div",{className:"w-full",children:e.jsx(de,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"Nama Komponen"}),e.jsx("th",{className:"bg-gray-200 text-end",children:"Nilai (Default)"}),e.jsx("th",{className:"bg-gray-200 text-center",children:"Status"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:s.data.map((a,l)=>e.jsx(xe,{category:a,className:`${l%2==0&&"bg-gray-100"}`,handleDelete:()=>D(a),handleEdit:()=>P(a),role:n},l))})]})})})})]}),e.jsx(T,{show:F,onClose:()=>u(!1),children:e.jsxs("form",{onSubmit:$,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 border-b-2 py-1",children:b.title}),e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(v,{htmlFor:"name",value:"Nama Komponen",className:"mx-auto my-auto"})}),e.jsxs("div",{className:"sm:w-2/3 w-full",children:[e.jsx(K,{id:"name",type:"text",name:"name",value:t.name,className:`mt-1 w-full ${r&&r.name&&"border-red-500"}`,isFocused:!0,onChange:a=>o("name",a.target.value.toUpperCase()),placeholder:"Nama Komponen"}),r&&r.name&&e.jsx("div",{className:"-mb-3",children:e.jsx("div",{className:"text-xs text-red-500",children:r.name})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(v,{htmlFor:"name",value:"Nilai (Default)",className:"mx-auto my-auto"})}),e.jsxs("div",{className:"sm:w-2/3 w-full",children:[e.jsx(pe,{value:t.value,customInput:K,onValueChange:a=>J(a),thousandSeparator:!0,className:"text-end w-full border",prefix:"IDR "}),r&&r.name&&e.jsx("div",{className:"-mb-3",children:e.jsx("div",{className:"text-xs text-red-500",children:r.name})})]})]}),e.jsx("div",{className:"w-2/6",children:e.jsxs("label",{htmlFor:"has_hour",className:"flex cursor-pointer gap-5",children:[e.jsx("input",{type:"checkbox",id:"has_hour",className:"checkbox my-auto",value:t.has_hour,onChange:W,checked:t.has_hour}),e.jsx("div",{className:"font-bold",children:"Hitung Jam/Hari Kerja"})]})}),t.has_hour?e.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(v,{htmlFor:"unit",value:"Satuan",className:"mx-auto my-auto"})}),e.jsxs("div",{className:"sm:w-2/3 w-full",children:[e.jsxs("select",{className:"select select-bordered w-full",defaultValue:t.entry_year,onChange:a=>o("unit",parseInt(a.target.value)),id:"unit",children:[e.jsx("option",{value:"jam",children:"Jam"}),e.jsx("option",{value:"hari",children:"Hari"})]}),(r==null?void 0:r.unit)&&e.jsx("span",{className:"text-red-500 text-xs",children:r.unit})]})]}):"",e.jsx("div",{className:"w-2/6",children:e.jsxs("label",{htmlFor:"is_cut",className:"flex cursor-pointer gap-5",children:[e.jsx("input",{type:"checkbox",id:"is_cut",className:"checkbox my-auto",value:t.is_cut,onChange:()=>o("is_cut",!t.is_cut),checked:t.is_cut}),e.jsx("div",{className:"font-bold text-red-600",children:"Potongan"})]})}),y&&e.jsx("div",{className:"w-2/6",children:e.jsxs("label",{htmlFor:"is_active",className:"flex cursor-pointer gap-5",children:[e.jsx("input",{type:"checkbox",id:"is_active",className:"checkbox my-auto",value:t.is_active,onChange:()=>o("is_active",!t.is_active),checked:t.is_active}),e.jsx("div",{className:"font-bold",children:"Aktif"})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(E,{onClick:a=>u(!1),children:"Batal"}),e.jsx(C,{className:"ms-3",disabled:S,children:b.submit})]})]})}),e.jsx(T,{show:O,onClose:()=>x(!1),children:e.jsxs("form",{onSubmit:Q,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 text-center",children:B}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(E,{onClick:()=>x(!1),children:"Batal"}),e.jsx(ue,{className:"ms-3",disabled:S,children:"Hapus"})]})]})})]})}je.layout=n=>e.jsx(X,{header:e.jsx(Z,{children:"Data Komponen Penggajian"}),children:n,user:n.props.auth.user,organization:n.props.organization,title:"Data Komponen Penggajian",backLink:e.jsx(h,{href:route("data-master",n.props.organization.id),children:e.jsx(se,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(h,{href:route("data-master",n.props.organization.id),children:"Data Master"})}),e.jsx("li",{children:"Data Komponen Penggajian"})]})}),role:n.props.role});export{je as default};
