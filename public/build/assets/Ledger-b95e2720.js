import{r as a,j as e,L as je,S as pe,$ as H}from"./app-e310aa01.js";import{D as K,A as fe}from"./AuthenticatedLayout-69c8267d.js";import{H as ve}from"./Header-e91d9d17.js";import{t as k,u as Ne,c as be}from"./index.esm-d43a1de0.js";import{S as ge}from"./SecondaryButton-94e34b2f.js";import{e as R}from"./index.esm-6893ece8.js";import{P as $}from"./PrimaryButton-5a931109.js";import{f as O}from"./formatNumber-b542c689.js";import{d as h}from"./dayjs.min-0b1597b0.js";import we from"./LedgerContent-0354c7ba.js";import{I as Y}from"./InputLabel-befcccbc.js";import{C as v}from"./ClientSelectInput-deddca07.js";import{j as M}from"./disclosure-a67610bf.js";import{z as ye}from"./transition-dbb0fec3.js";import"./ApplicationLogo-874ab5e7.js";import"./iconBase-076ca044.js";/* empty css                      */import"./combobox-418cbed0.js";import"./portal-abeed8eb.js";import"./close-provider-a657bad9.js";function Se({ledgers:r,accounts:z,startedValue:A,organization:n,startDateFilter:N,endDateFilter:b,departments:g,projects:w,programs:y,department:o,project:c,program:m,account:x}){const[U,_]=a.useState([]),[d,q]=a.useState(N||""),[i,G]=a.useState(b||""),[P,f]=a.useState(!1),[C,J]=a.useState({startValue:0,endValue:0}),[Q,W]=a.useState({startDate:N||"",endDate:N||""}),[X,Z]=a.useState({startDate:b||"",endDate:b||""}),[t,ee]=a.useState({id:x?x.id:null,name:x?x.name:"",code:x?x.code:""}),[se,De]=a.useState(""),[u,E]=a.useState({id:c?c.id:null,name:c?c.name:"",code:c?c.code:""}),[te,ke]=a.useState(""),[j,L]=a.useState({id:m?m.id:null,name:m?m.name:"",code:m?m.code:""}),[ae,Ye]=a.useState(""),[p,B]=a.useState({id:o?o.id:null,name:o?o.name:"",code:o?o.code:""}),[le,Me]=a.useState("");a.useEffect(()=>{F(r,A)},[]);const re=s=>{ee(s)},de=s=>{L(s)},ie=()=>{L({id:null,name:"",code:""})},ne=s=>{E(s)},oe=()=>{E({id:null,name:"",code:""})},ce=s=>{B(s)},me=()=>{B({id:null,name:"",code:""})},xe=s=>{W(s),q(h(s.endDate).format("YYYY-MM-DD"))},he=s=>{Z(s),G(h(s.endDate).format("YYYY-MM-DD"))},V=()=>{pe.reload({only:["ledgers","startedValue"],data:{startDate:d,endDate:i,program:j.id,project:u.id,department:p.id,account:t==null?void 0:t.id},onBefore:s=>{s.completed?f(!1):f(!0)},onSuccess:s=>{F(s.props.ledgers,s.props.startedValue)},onError:s=>{console.log(s)},onFinish:s=>{s.completed?f(!1):f(!0)},preserveState:!0})},F=(s,l)=>{let S=l,T=[];s.map((D,ue)=>{S+=D.debit-D.credit,T[ue]={...D,total:S}}),_(T),J({startValue:l,endValue:S})},I=()=>{window.print()};return e.jsxs(e.Fragment,{children:[e.jsx(je,{title:`Laporan Buku Besar Periode : ${h(d).format("MMMM DD, YYYY")} - ${h(i).format("MMMM DD, YYYY")}`}),e.jsx("div",{className:"md:pt-0 pb-16 pt-12",children:e.jsxs("div",{className:"bg-white py-2 md:pt-0 px-5 space-y-2",children:[e.jsxs("div",{className:"flex md:flex-row justify-between gap-2 print:hidden",children:[e.jsxs("div",{className:"px-3 my-auto flex flex-col md:flex-row gap-3 w-full md:w-2/3",children:[e.jsxs("div",{className:"my-auto w-full",children:[e.jsx(v,{resources:z,selected:t,setSelected:s=>re(s),maxHeight:"max-h-40",placeholder:"Cari Akun",isError:!!se,id:"account"}),(t==null?void 0:t.code)&&e.jsxs("div",{className:"absolute text-xs",children:["Kode: ",t==null?void 0:t.code]})]}),e.jsx("div",{className:"my-auto w-full",children:e.jsx(K,{value:Q,onChange:xe,useRange:!1,asSingle:!0,placeholder:"Tanggal Awal",id:"date",displayFormat:"MMMM DD, YYYY"})}),e.jsx("div",{className:"my-auto w-full",children:e.jsx(K,{value:X,onChange:he,useRange:!1,asSingle:!0,placeholder:"Tanggal Akhir",id:"date",displayFormat:"MMMM DD, YYYY"})}),e.jsx("div",{className:"my-auto hidden md:block",children:e.jsx($,{disabled:!(t!=null&&t.id)||!d||!i||d>i||P,onClick:V,children:"Filter"})})]}),e.jsx("div",{className:"text-end px-3 hidden md:block print:flex print:justify-between",children:e.jsx(ge,{onClick:I,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"my-auto",children:e.jsx(R,{})}),e.jsx("div",{className:"my-auto",children:"Print"})]})})}),e.jsx("div",{className:"fixed md:hidden bottom-2 right-2",children:e.jsx("button",{onClick:I,className:"bg-white border-2 border-slate-900 p-2 rounded-full h-14 w-14",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"my-auto mx-auto",children:e.jsx(R,{})})})})})]}),y.length>0||w.length>0||g.length?e.jsx(M,{as:"div",className:"mt-3 print:hidden",children:({open:s})=>e.jsxs(e.Fragment,{children:[e.jsx(ye,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:e.jsx(M.Panel,{children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-start gap-3 md:py-5 mb-3",children:[y.length>0&&e.jsxs("div",{className:"md:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(Y,{value:"Program Kegiatan",htmlFor:"program"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(v,{resources:y,selected:j,setSelected:l=>de(l),maxHeight:"max-h-40",placeholder:"Cari Program Kegiatan",isError:!!ae,id:"program"}),j.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",j.code]})]}),j.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:ie,children:e.jsx(k,{})})})]})]}),w.length>0&&e.jsxs("div",{className:"md:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(Y,{value:"Proyek",htmlFor:"project"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(v,{resources:w,selected:u,setSelected:l=>ne(l),maxHeight:"max-h-40",placeholder:"Cari Proyek",isError:!!te,id:"project"}),u.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",u.code]})]}),u.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:oe,children:e.jsx(k,{})})})]})]}),g.length>0&&e.jsxs("div",{className:"md:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(Y,{value:"Departemen",htmlFor:"department"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(v,{resources:g,selected:p,setSelected:l=>ce(l),maxHeight:"max-h-40",placeholder:"Cari Departemen",isError:!!le,id:"department"}),p.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",p.code]})]}),p.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:me,children:e.jsx(k,{})})})]})]})]})})}),e.jsx(M.Button,{className:"flex w-full justify-between rounded-lg bg-slate-100 px-4 py-2 text-left text-sm font-medium text-slate-900 hover:bg-slate-200 focus:outline-none focus-visible:ring focus-visible:ring-slate-500/75",children:e.jsxs("div",{className:"flex justify-center w-full gap-3",children:[e.jsxs("span",{children:["Tampilkan Lebih ",s?"Sedikit":"Banyak"]}),e.jsx(Ne,{className:`${s?"":"rotate-180 transform"} h-5 w-5 text-slate-500`})]})})]})}):"",e.jsx("div",{className:"md:hidden w-full print:hidden",children:e.jsx($,{disabled:!(t!=null&&t.id)||!d||!i||d>i||P,onClick:V,className:"w-full",children:e.jsx("div",{className:"text-center w-full",children:"Filter"})})}),e.jsxs("div",{className:"uppercase pb-3 border-b hidden print:flex print:justify-between",children:[e.jsx("div",{className:"w-1/2 text-2xl my-auto",children:"Laporan Buku Besar"}),e.jsxs("div",{className:"w-1/2 text-end mt-auto",children:[e.jsx("div",{children:n.name}),e.jsx("div",{className:"text-xs",children:n.address}),e.jsxs("div",{className:"text-xs",children:[n.village,", ",n.district,", ",n.regency,","," ",n.province]})]})]}),e.jsxs("div",{className:"w-full mt-3 hidden print:flex print:justify-between",children:[e.jsxs("div",{className:"uppercase",children:["Akun : ",t==null?void 0:t.code," - ",t==null?void 0:t.name]}),e.jsxs("div",{className:"text-end italic",children:["Periode : ",h(d).format("MMMM DD, YYYY")," -"," ",h(i).format("MMMM DD, YYYY")]})]}),e.jsx("div",{className:"my-2 -mx-5 space-y-3 print:font-['Open_Sans'] overflow-auto",children:e.jsx("div",{className:"md:w-full w-[550px] print:w-full",children:e.jsxs("table",{className:"table uppercase table-zebra table-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-slate-900 font-bold border-b-2 border-slate-900",children:[e.jsx("th",{className:"w-1/12",children:"tanggal"}),e.jsx("th",{children:"ref"}),e.jsx("th",{children:"Dekripsi"}),e.jsx("th",{className:"text-end",children:"debit"}),e.jsx("th",{className:"text-end",children:"kredit"}),e.jsx("th",{className:"text-end",children:"total"}),e.jsx("th",{children:"Note"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"font-bold",children:[e.jsx("td",{colSpan:5,children:"Nilai Awal"}),e.jsxs("td",{className:"text-end",children:["IDR. ",O(C.startValue)]})]}),U.map((s,l)=>e.jsx(we,{ledger:s},l)),e.jsxs("tr",{className:"font-bold",children:[e.jsx("td",{colSpan:5,children:"Nilai Akhir"}),e.jsxs("td",{className:"text-end",children:["IDR. ",O(C.endValue)]}),e.jsx("td",{})]})]})]})})})]})})]})}Se.layout=r=>e.jsx(fe,{header:e.jsx(ve,{children:"Laporan Buku Besar Per Akun"}),children:r,user:r.props.auth.user,organization:r.props.organization,title:"Laporan Buku Besar Per Akun",backLink:e.jsx(H,{href:route("report",r.props.organization.id),children:e.jsx(be,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(H,{href:route("report",r.props.organization.id),children:"Laporan"})}),e.jsx("li",{children:"Laporan Buku Besar Per Akun"})]})}),role:r.props.role});export{Se as default};
