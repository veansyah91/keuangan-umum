import{W as b,r as k,j as e,Y as y,a as o}from"./app-18d344c6.js";import{A as T}from"./AuthenticatedLayout-f72ab3d2.js";import{H as S}from"./Header-d3a5ebd0.js";import{l as A,c as C}from"./index.esm-11facade.js";import{k as I,Q as d}from"./react-toastify.esm-14a132f8.js";import{P as O}from"./PrimaryButton-74e4339d.js";import{M as P}from"./Modal-fb9ed9d2.js";import{S as E}from"./SecondaryButton-8f498461.js";import{N as K}from"./react-number-format.es-fa3bf91f.js";import{T as x}from"./TextInput-d4d9cbeb.js";import{I as p}from"./InputLabel-2c4eb927.js";import{b as W,c as j}from"./index.esm-976e4b01.js";import"./ApplicationLogo-782d5a75.js";import"./iconBase-4b51c5f1.js";import"./transition-27a0ae6f.js";/* empty css                      */import"./dayjs.min-3c5969fb.js";import"./portal-3e1f6179.js";import"./close-provider-98abf862.js";function _({setShowAddData:s}){return e.jsxs("div",{className:"mx-auto text-center py-5 space-y-3",children:[e.jsx("div",{children:"Belum tertaut dengan WhatsApp"}),e.jsx("button",{className:"my-auto mx-auto bg-green-700 text-xl py-3 px-2 rounded-lg text-white font-bold",onClick:s,children:"Tautkan WhatsApp"})]})}function D({status:s,handleShowAddDataModal:r,processing:i,handleCheckConnection:c}){return e.jsx("div",{className:"w-full flex pt-5 gap-2",children:e.jsxs("div",{className:"md:w-5/12 w-full space-y-3",children:[e.jsxs("div",{className:"md:flex gap-2",children:[e.jsxs("div",{className:"md:w-4/12 font-bold",children:["No. Handphone ",e.jsx("span",{className:"md:hidden",children:":"})," "]}),e.jsx("div",{className:"md:block hidden w-1/12 text-end",children:":"}),e.jsxs("div",{className:"w-7/12 flex gap-2",children:[e.jsx("div",{children:s.phone}),e.jsx("div",{})]})]}),e.jsxs("div",{className:"md:flex gap-2",children:[e.jsxs("div",{className:"md:w-4/12 font-bold",children:["Token ",e.jsx("span",{className:"md:hidden",children:":"})," "]}),e.jsx("div",{className:"md:block hidden w-1/12 text-end",children:":"}),e.jsxs("div",{className:"w-7/12 flex gap-2",children:[e.jsx("div",{children:s.appKey}),e.jsx("div",{children:e.jsx("button",{className:"text-gray-500 text-sm",onClick:r,children:e.jsx(W,{})})})]})]}),e.jsxs("div",{className:"md:flex gap-2",children:[e.jsxs("div",{className:"md:w-4/12 w-full font-bold",children:["Tanggal Kadaluarsa ",e.jsx("span",{className:"md:hidden",children:":"})]}),e.jsx("div",{className:"md:block hidden w-1/12 text-end",children:":"}),e.jsx("div",{className:"w-7/12",children:s.expired_date??"-"})]}),e.jsxs("div",{className:"md:flex gap-2 my-auto",children:[e.jsxs("div",{className:"md:w-4/12 font-bold my-auto",children:["Status ",e.jsx("span",{className:"md:hidden",children:":"})]}),e.jsx("div",{className:"hidden md:block w-1/12 text-end my-auto",children:":"}),e.jsxs("div",{className:"w-7/12 font-bold space-x-5 my-auto flex",children:[e.jsx("span",{className:s.is_active?"text-green-500 my-auto":"text-red-500 my-auto",children:s.is_active?"Aktif":"Tidak Aktif"}),s.is_active?"":e.jsx(o,{href:route("add-ons.whatsapp-invoice.create",{organization:s.organization_id}),children:e.jsx("button",{className:"my-auto",children:e.jsx(A,{size:20})})})]})]}),s.is_active?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:flex gap-2",children:[e.jsxs("div",{className:"md:w-4/12 w-full font-bold",children:["Koneksi Terakhir ",e.jsx("span",{className:"md:hidden",children:":"})]}),e.jsx("div",{className:"md:block hidden w-1/12 text-end",children:":"}),e.jsx("div",{className:"w-7/12",children:s.last_connection??"-"})]}),e.jsxs("div",{className:"md:flex gap-2",children:[e.jsxs("div",{className:"md:w-4/12 w-full font-bold",children:["Koneksi ",e.jsx("span",{className:"md:hidden",children:":"})]}),e.jsx("div",{className:"hidden md:block md:w-1/12 text-end",children:":"}),e.jsxs("div",{className:"md:w-7/12 w-full my-auto flex gap-5",children:[s.connection?e.jsxs("div",{className:"my-auto text-green-500 flex gap-2",children:[e.jsx("div",{className:"my-auto",children:e.jsx(j,{})})," ",e.jsx("div",{children:"connected"})]}):e.jsxs("div",{className:"my-auto text-red-500 flex gap-2",children:[e.jsx("div",{className:"my-auto",children:e.jsx(j,{})})," ",e.jsx("div",{children:"disconnected"})]}),e.jsx("div",{className:"w-full",children:e.jsx("button",{className:"border py-1 px-2 rounded-md",onClick:c,disabled:i,children:i?e.jsx("span",{className:"loading loading-dots loading-xs"}):e.jsx("span",{children:"Cek Koneksi"})})})]})]})]}):""]})})}function B({status:s,organization:r}){const{data:i,setData:c,patch:m,processing:h,errors:l}=b({appKey:s?s.appKey:"",phone:s?s.phone:""}),[u,t]=k.useState(!1),f=()=>{t(!0)},N=a=>{c("phone",a.value)},v=a=>{a.preventDefault(),m(route("add-ons.whatsapp.status.update",{organization:r.id}),{onSuccess:({props:n})=>{const{flash:w}=n;d.success(w.success,{position:d.POSITION.TOP_CENTER}),t(!1)},onError:n=>{d.error(n.phone,{position:d.POSITION.TOP_CENTER})}})},g=()=>{m(route("add-ons.whatsapp.status.check-connection",{organization:r.id}),{onSuccess:({props:a})=>{const{flash:n}=a;n!=null&&n.success&&d.success(n.success,{position:d.POSITION.TOP_CENTER})},onError:a=>{a!=null&&a.error&&d.error(a.error,{position:d.POSITION.TOP_CENTER})}})};return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Status WhatsApp Broadcast"}),e.jsx(I,{}),e.jsx("div",{className:"w-full sm:mt-2",children:e.jsx("div",{className:"sm:mx-auto px-3 sm:px-5 bg-white py-2 sm:pt-0 space-y-5 md:space-y-0",children:e.jsxs("div",{className:"sm:pt-0 pb-16 pt-12",children:[e.jsxs("div",{className:"bg-white py-2 px-2 sm:pt-0",children:[!s&&e.jsx(_,{setShowAddData:f}),s&&e.jsx(D,{status:s,handleShowAddDataModal:()=>t(!0),processing:h,handleCheckConnection:g})]}),e.jsxs("div",{className:"bg-white py-2 px-2 sm:pt-0 mt-10",children:[e.jsx("h2",{className:"font-bold underline",children:"Disclaimer"}),e.jsx("div",{children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"w-[25px]",children:"•"}),e.jsxs("td",{children:["Whatsapp Broadcasting Plugin dari keuanganumum.com menggunakan ",e.jsx("a",{href:"https://fonnte.com/",className:"text-blue-600 font-bold hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Fonnte"})," sebagai Whatsapp API Gateway, silakan registrasi dan berlangganan sesuai dengan kebutuhan Anda"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-[25px]",children:"•"}),e.jsxs("td",{children:["Whatsapp Broadcasting Plugin dari keuanganumum.com mengirimkan pesan secara ",e.jsx("span",{className:"italic",children:"asynchronous"})," untuk menghindari blokir dari WhatsApp"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-[25px]",children:"•"}),e.jsx("td",{children:"Daftarkan nomor handphone yang sudah dipakai lama, hindari penggunakan nomor handphone yang baru diregistrasi"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-[25px]",children:"•"}),e.jsx("td",{children:"Kami menyarankan menautkan nomor handphone yang telah diregistrasikan pada WhatsApp Business"})]})]})})})]})]})})}),e.jsx(P,{show:u,onClose:()=>t(!1),children:e.jsxs("form",{onSubmit:v,className:"p-6",id:"deleteForm",name:"deleteForm",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 text-center",children:s?"Ubah Token":"Tautkan WhatsApp"}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(p,{value:"No. Handphone",htmlFor:"phone"})}),e.jsx("div",{className:"w-full sm:w-2/3",children:e.jsx(K,{value:i.phone||"",customInput:x,onValueChange:a=>N(a),thousandSeparator:!1,className:`w-full ${(l==null?void 0:l.appKey)&&"border-red-500"}`,prefix:"",placeholder:"628xxxx"})})]})}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(p,{value:"Token",htmlFor:"token"})}),e.jsx("div",{className:"w-full sm:w-2/3",children:e.jsx(x,{id:"token",name:"Token",className:`w-full ${(l==null?void 0:l.appKey)&&"border-red-500"}`,placeholder:"Token",value:i.appKey||"",onChange:a=>c("appKey",a.target.value)})})]})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(E,{onClick:()=>t(!1),children:"Batal"}),e.jsx(O,{className:"ms-3",disabled:h,children:s?"Ubah":"Tautkan"})]})]})})]})}B.layout=s=>e.jsx(T,{header:e.jsx(S,{children:"Status"}),children:s,user:s.props.auth.user,organization:s.props.organization,title:"Status",backLink:e.jsx(o,{href:route("add-ons.whatsapp",s.props.organization.id),children:e.jsx(C,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(o,{href:route("add-ons",s.props.organization.id),children:"Add-ons"})}),e.jsx("li",{className:"font-bold",children:e.jsx(o,{href:route("add-ons.whatsapp",s.props.organization.id),children:"WhatsApp Broadcast"})}),e.jsx("li",{children:"Status"})]})}),role:s.props.role});export{B as default};
