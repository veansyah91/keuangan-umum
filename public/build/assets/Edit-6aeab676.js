import{W as K,r as u,y as U,j as e,Y as L,a as j}from"./app-f7a09652.js";import{D as Q,A as W}from"./AuthenticatedLayout-c244f9ed.js";import{H as q}from"./Header-693ecab8.js";import{k as G,Q as f}from"./react-toastify.esm-3b93a9f9.js";/* empty css                      */import{c as J}from"./index.esm-d266f787.js";import{F as X}from"./FormInput-df6f0874.js";import{I as m}from"./InputLabel-dcaa09a0.js";import{T as x}from"./TextInput-9daff345.js";import{S as Z}from"./SecondaryButton-54b37b1d.js";import{P as A}from"./PrimaryButton-02d903bc.js";import{N as v}from"./react-number-format.es-0576c33a.js";import{C as _}from"./ClientSelectInput-8f52b80f.js";import{a as ee,u as ae}from"./index.module-e6de8ac4.js";import{d as h}from"./dayjs.min-d811e899.js";import"./ApplicationLogo-bd8fcc84.js";import"./iconBase-e8876c39.js";import"./transition-2fb3bce8.js";import"./combobox-9f4a512d.js";import"./portal-a488097d.js";const p=(i,s,n)=>s>0?Math.ceil((i-n)/s):0;function te({organization:i,fixedAsset:s,fixedAssetCategory:n,newRef:se,date:le,accounts:g,fixedAssetCategories:b,creditAccount:o}){var w,N;const{data:l,setData:c,processing:D,patch:S,errors:a,setError:ie,reset:de}=K({lifetime:"",name:"",code:"",residue:"",value:"",date:"",fixed_asset_category:"",credit_account:{id:null,is_cash:!1,code:""},depreciation_value:"",depreciation_accumulated:"",status:!0}),[r,T]=u.useState({startDate:s.date,endDate:s.date}),[C]=ee(r,500),F=ae(r),[I,E]=u.useState({id:n.id,name:n.name,lifetime:n.lifetime}),[Y,H]=u.useState({id:o.id,name:o.name,code:o.code,is_cash:o.is_cash});u.useEffect(()=>{c({lifetime:s.lifetime,name:s.name,code:s.code,residue:s.residue,value:s.value,date:s.date,fixed_asset_category:s.fixed_asset_category_id,credit_account:{id:o.id,is_cash:o.is_cash,code:o.code},depreciation_value:s.depreciation_value,depreciation_accumulated:s.depreciation_accumulated,status:s.status})},[]),u.useEffect(()=>{if(F!==void 0&&r.startDate){let t=h(r.startDate),d=`${t.month()+1}-${t.year()}`,y=h(s.date),z=`${y.month()+1}-${y.year()}`;d!==z?R():c("code",s.code)}},[C]);const R=()=>{U.reload({only:["newRef"],data:{date:h(r.startDate).format("YYYY-MM-DD")},onSuccess:t=>{c("code",t.props.newRef)}})},V=t=>{T(t),c("date",h(t.startDate).format("YYYY-MM-DD"))},M=t=>{const{floatValue:d}=t;c({...l,value:d,depreciation_value:p(d,l.lifetime,l.residue)})},P=t=>{const{floatValue:d}=t;c({...l,residue:d,depreciation_value:p(l.value,l.lifetime,d)})},k=t=>{const{floatValue:d}=t;c({...l,lifetime:d,depreciation_value:p(l.value,d,l.residue)})},O=t=>{E(t),c({...l,lifetime:t.lifetime,fixed_asset_category:t.id,depreciation_value:p(l.value,t.lifetime,l.residue)})},B=t=>{H(t),c({...l,credit_account:{id:t.id,is_cash:t.is_cash,code:t.code}})},$=t=>{t.preventDefault(),S(route("data-master.fixed-asset.update",{organization:i.id,fixedAsset:s.id}),{onSuccess:()=>{f.success("Harta Tetap Berhasil Diubah",{position:f.POSITION.TOP_CENTER})},onError:d=>{f.error(d.date,{position:f.POSITION.TOP_CENTER})},preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:"Tambah Harta Tetap"}),e.jsx(G,{}),e.jsx(X,{onSubmit:$,children:e.jsx("div",{className:"w-full sm:mt-2 sm:py-5",children:e.jsxs("div",{className:"sm:w-1/2 sm:mx-auto px-3 sm:px-0 space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Tanggal Perolehan",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(Q,{value:r,onChange:V,useRange:!1,asSingle:!0,placeholder:"Tanggal",id:"date",displayFormat:"MMMM DD, YYYY"}),(a==null?void 0:a.date)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.date})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Kode",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(x,{id:"code",name:"code",className:`w-full ${(a==null?void 0:a.code)&&"border-red-500"}`,placeholder:"Kode",value:l.code,onChange:t=>c("code",t.target.value.toUpperCase())}),(a==null?void 0:a.code)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.code})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Kategori Harta Tetap",htmlFor:"category",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(_,{resources:b,selected:I,setSelected:t=>O(t),maxHeight:"max-h-40",placeholder:"Cari Kategori Harta Tetap",id:"category",isError:!!(a!=null&&a.fixed_asset_category),isFocused:!0}),(a==null?void 0:a.fixed_asset_category)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.fixed_asset_category})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Usia Pakai (Bulan)",htmlFor:"lifetime",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(v,{value:l.lifetime,customInput:x,onValueChange:t=>k(t),thousandSeparator:!0,className:"text-end w-full border",id:"lifetime"}),(a==null?void 0:a.lifetime)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.lifetime})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Nama",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(x,{id:"name",name:"name",className:`w-full ${(a==null?void 0:a.name)&&"border-red-500"}`,placeholder:"Nama",value:l.name,onChange:t=>c("name",t.target.value.toUpperCase())}),(a==null?void 0:a.name)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.name})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Nilai Perolehan",htmlFor:"value",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(v,{value:l.value,customInput:x,onValueChange:t=>M(t),thousandSeparator:!0,className:"text-end w-full border",prefix:"IDR ",id:"value"}),(a==null?void 0:a.value)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.value})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Residu",htmlFor:"residue",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(v,{value:l.residue,customInput:x,onValueChange:t=>P(t),thousandSeparator:!0,className:"text-end w-full border",prefix:"IDR ",id:"residue"}),(a==null?void 0:a.residue)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.residue})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Akun Kredit",htmlFor:"credit_account_id",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(_,{resources:g,selected:Y,setSelected:t=>B(t),maxHeight:"max-h-40",placeholder:"Cari Akun",id:"credit_account_id",isError:!!((w=a==null?void 0:a.credit_account)!=null&&w.id)}),((N=a==null?void 0:a.credit_account)==null?void 0:N.id)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.credit_account.id})]})]}),e.jsxs("div",{className:"flex justify-end flex-col-reverse sm:flex-row gap-2 mt-5",children:[e.jsx("div",{className:"w-full sm:w-1/6 my-auto text-center",children:e.jsx(j,{href:route("data-master.fixed-asset",i.id),children:e.jsx(Z,{className:"w-full",children:e.jsx("div",{className:"text-center w-full",children:"Batal"})})})}),e.jsx("div",{className:"w-full sm:w-1/6 text-center",children:e.jsx(A,{className:"w-full",disabled:D,children:e.jsx("div",{className:"text-center w-full",children:"Ubah"})})})]})]})})})]})}te.layout=i=>e.jsx(W,{header:e.jsx(q,{children:"Tambah Harta Tetap"}),children:i,user:i.props.auth.user,organization:i.props.organization,title:"Tambah Harta Tetap",backLink:e.jsx(j,{href:route("data-master.fixed-asset",i.props.organization.id),children:e.jsx(J,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(j,{href:route("data-master",i.props.organization.id),children:"Data Master"})}),e.jsx("li",{className:"font-bold",children:e.jsx(j,{href:route("data-master.fixed-asset",i.props.organization.id),children:"Harta Tetap"})}),e.jsx("li",{children:"Tambah Harta Tetap"})]})}),role:i.props.role});export{te as default};
