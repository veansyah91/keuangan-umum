import{r as j,W as y,j as e,Y as _,a as p}from"./app-b1bae4cf.js";import{d as S,p as I}from"./index.esm-cc030e73.js";import{T as x}from"./TextInput-03bbc330.js";import{P as T}from"./PrimaryButton-8fd5a5e1.js";import{H as B}from"./Header-c0cfe33d.js";import{G as E}from"./index.esm-6cf85da1.js";import{f as v}from"./formatNumber-b542c689.js";import{M}from"./Modal-cfda514a.js";import{I as u}from"./InputLabel-7f7b4adc.js";import{S as C}from"./SuccessButton-159073b5.js";import{S as P}from"./SecondaryButton-d8ddebe6.js";import{N as A}from"./react-number-format.es-e3900a44.js";import{k as R,Q as m}from"./react-toastify.esm-f0fa79de.js";/* empty css                      */import{d as D}from"./dayjs.min-b8e970d9.js";import O from"./AffiliationWithdrawMobile-2215a293.js";import{B as F}from"./BadgeSuccess-ed4748cc.js";import{B as Y}from"./BadgeWarning-f30cb1f1.js";import"./iconBase-d2085e51.js";import"./portal-962230a7.js";import"./transition-26553514.js";import"./close-provider-708b8203.js";function re({auth:t,affiliation:l,affiliationWithdraws:h}){const[N,c]=j.useState(!1),{data:i,setData:d,patch:b,errors:a,setError:o,processing:f}=y({value:l.balance||0,bank_account:l.bank_account||"",bank_name:l.bank_name||""});j.useLayoutEffect(()=>{const s=window.screen.height;document.getElementById("content-desktop").style.height=`${s-374}px`,document.getElementById("content-mobile").style.height=`${s-374}px`},[]);const g=()=>{c(!0),o({value:"",bank_account:"",bank_name:""}),d({value:l.balance||0,bank_account:l.bank_account||"",bank_name:l.bank_name||""})},w=s=>{const{value:n}=s;if(d("value",n),n>l.balance){o("value","Saldo Tidak Cukup");return}o("value","")},k=s=>{s.preventDefault(),b(route("affiliation.patch",l.id),{onSuccess:n=>{const{flash:r}=n.props;m.success(r.success,{position:m.POSITION.TOP_CENTER}),c(!1)},onError:n=>{const{status:r}=n;r&&m.error(r,{position:m.POSITION.TOP_CENTER})}})};return e.jsxs(e.Fragment,{children:[e.jsx(_,{title:"Afiliasi"}),e.jsx(R,{}),e.jsx("div",{className:"bg-gray-100 min-h-screen",children:e.jsxs("div",{className:"bg-white mx-auto sm:px-6 lg:px-8 max-w-4xl",children:[e.jsx("div",{className:"text-sm breadcrumbs px-4 py-4",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(p,{href:route("organization"),children:"Daftar Organisasi"})}),e.jsx("li",{children:"Afiliasi"})]})}),e.jsx(B,{children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-t-lg",children:e.jsxs("div",{className:"sm:p-6 px-6 py-3 text-gray-800 flex-none sm:flex",children:[e.jsxs("div",{className:"sm:hidden text-gray-800 flex flex-col-reverse gap-5",children:[e.jsx("div",{className:"my-auto",children:"Afiliasi"}),e.jsx("div",{className:"flex flex-row-reverse text-end",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 text-sm",children:t.user.name}),e.jsx("div",{className:" text-xs text-green-400",children:t.user.email})]})})]}),e.jsx("div",{className:"sm:flex-1 my-auto sm:block hidden",children:"Afiliasi"}),e.jsx("div",{className:"sm:flex-1 sm:block hidden text-end text-gray-800",children:e.jsx("div",{className:"flex flex-row-reverse",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:t.user.name}),e.jsx("div",{className:" text-sm text-green-400",children:t.user.email})]})})})]})})}),e.jsxs("div",{className:"py-3 px-6 text-gray-900 flex-none sm:flex sm:flex-row-reserve sm:gap-2 sm:justify-between space-y-5 sm:space-y-0",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"my-auto",children:[e.jsx(E,{})," "]}),e.jsxs("div",{className:"my-auto",children:["Saldo Anda:"," ",e.jsxs("span",{className:"font-bold text-lg text-green-500",children:["Rp. ",v(l.balance)]})]})]}),l.balance>0&&e.jsx("div",{className:"flex gap-2",children:e.jsx(T,{className:"w-full",onClick:()=>g(),children:e.jsx("div",{className:"w-full",children:"Ajukan Penarikan"})})})]}),e.jsx("div",{className:"mt-5 px-4 font-bold",children:e.jsx("h4",{children:"Riwayat Penarikan Saldo"})}),e.jsx("div",{className:"sm:hidden overflow-auto",id:"content-mobile",children:h.map(s=>e.jsx(O,{affiliationWithdraw:s},s.id))}),e.jsxs("div",{className:"hidden sm:block mt-5",id:"content-desktop",children:[e.jsxs("div",{className:"flex gap-5 font-bold border-b-2 pb-2 border-gray-500",children:[e.jsx("div",{className:"w-3/12 text-start",children:"Tanggal"}),e.jsx("div",{className:"w-2/12 text-start",children:"No Ref"}),e.jsx("div",{className:"w-3/12 text-end",children:"Nilai Pengajuan"}),e.jsx("div",{className:"w-2/12 text-start",children:"Status"}),e.jsx("div",{className:"w-2/12 text-end"})]}),e.jsx("div",{className:"z-20",children:h.map(s=>e.jsxs("div",{className:"flex gap-5 my-3",children:[e.jsx("div",{className:"w-3/12",children:D(s.created_at).format("MMM DD, YYYY")}),e.jsx("div",{className:"w-2/12",children:s.no_ref}),e.jsxs("div",{className:"w-3/12 text-end",children:["IDR. ",v(s.value)]}),e.jsx("div",{className:"w-2/12",children:s.status>0?e.jsx(F,{children:"Sukses"}):e.jsx(Y,{children:"Mengunggu"})}),e.jsx("div",{className:"w-2/12",children:e.jsxs("div",{className:"dropdown dropdown-left my-auto",children:[e.jsx("div",{tabIndex:0,role:"button",className:"bg-inherit border-none hover:bg-gray-100 -z-50 text-gray-300'",children:e.jsx(S,{})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-[50] menu p-2 shadow bg-base-100 rounded-box w-56",children:e.jsx("li",{children:e.jsxs(p,{href:route("affiliationWithdraw.detail",s.id),children:[e.jsx(I,{})," Detail / Tanda Terima"]})})})]})})]},s.id))})]})]})}),e.jsx(M,{show:N,onClose:()=>c(!1),children:e.jsxs("form",{onSubmit:k,children:[e.jsx("div",{className:"p-5",children:e.jsx("h2",{className:"font-bold text-xl",children:"Ajukan Penarikan Saldo"})}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(u,{value:"Jumlah Penarikan",htmlFor:"value",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(A,{value:i.value,customInput:x,onValueChange:s=>w(s),thousandSeparator:!0,className:`text-end w-full border ${(a==null?void 0:a.value)&&"border-red-500"}`,prefix:"IDR "}),(a==null?void 0:a.value)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.value})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(u,{value:"No Rekening",htmlFor:"bank_account",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(x,{id:"bank_account",name:"bank_account",className:`w-full ${(a==null?void 0:a.bank_account)&&"border-red-500"}`,placeholder:"No Rekening",value:i.bank_account,onChange:s=>d("bank_account",s.target.value)}),(a==null?void 0:a.bank_account)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.bank_account})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(u,{value:"Nama Bank",htmlFor:"bank_name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(x,{id:"bank_name",name:"bank_name",className:`w-full ${(a==null?void 0:a.bank_name)&&"border-red-500"}`,placeholder:"Nama Bank",value:i.bank_name,onChange:s=>d("bank_name",s.target.value.toUpperCase())}),(a==null?void 0:a.bank_name)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.bank_name})]})]}),e.jsxs("div",{className:"text-end space-x-2",children:[e.jsx(P,{type:"button",onClick:()=>c(!1),children:"Batal"}),e.jsx(C,{disabled:f,children:"Ajukan"})]})]})]})})]})}export{re as default};
