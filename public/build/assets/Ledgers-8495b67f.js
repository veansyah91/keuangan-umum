import{r as t,j as e,Y as se,y as te,a as E}from"./app-9e893b54.js";import{D as L,A as ae}from"./AuthenticatedLayout-afc8e070.js";import{H as le}from"./Header-1da6b9ea.js";import{t as w,u as re,c as de}from"./index.esm-ac12b768.js";import{S as ne}from"./SecondaryButton-f121e475.js";import{e as A}from"./index.esm-c3561740.js";import{P as F}from"./PrimaryButton-f6930590.js";import{d as m}from"./dayjs.min-29e8da50.js";import{I as y}from"./InputLabel-b7b15140.js";import{C as b}from"./ClientSelectInput-879bfcc5.js";import ie from"./LedgersContent-7f8f4594.js";import{j as D}from"./disclosure-49df3cba.js";import{z as ce}from"./transition-27235abb.js";import"./ApplicationLogo-85e7fdbc.js";import"./iconBase-a0b29dc6.js";/* empty css                      */import"./combobox-3f4ae1bc.js";import"./portal-98a41776.js";import"./LedgerContent-3fa5b2e0.js";import"./formatNumber-b542c689.js";import"./close-provider-3847f888.js";function oe({accounts:a,startedValues:I,organization:n,startDateFilter:j,endDateFilter:f,departments:v,projects:N,programs:g,department:i,project:c,program:o,account:me}){const[T,S]=t.useState([]),[l,H]=t.useState(j||""),[r,K]=t.useState(f||""),[Y,p]=t.useState(!1),[O,R]=t.useState({startDate:j||"",endDate:j||""}),[V,$]=t.useState({startDate:f||"",endDate:f||""});t.useState("");const[x,k]=t.useState({id:c?c.id:null,name:c?c.name:"",code:c?c.code:""}),[z,xe]=t.useState(""),[u,P]=t.useState({id:o?o.id:null,name:o?o.name:"",code:o?o.code:""}),[U,ue]=t.useState(""),[h,M]=t.useState({id:i?i.id:null,name:i?i.name:"",code:i?i.code:""}),[_,he]=t.useState("");t.useEffect(()=>{S(a)},[]);const q=s=>{P(s)},G=()=>{P({id:null,name:"",code:""})},J=s=>{k(s)},Q=()=>{k({id:null,name:"",code:""})},W=s=>{M(s)},X=()=>{M({id:null,name:"",code:""})},Z=s=>{R(s),H(m(s.endDate).format("YYYY-MM-DD"))},ee=s=>{$(s),K(m(s.endDate).format("YYYY-MM-DD"))},C=()=>{te.reload({only:["accounts"],data:{startDate:l,endDate:r,program:u.id,project:x.id,department:h.id},onBefore:s=>{s.completed?p(!1):p(!0)},onSuccess:s=>{S(s.props.accounts)},onError:s=>{console.log(s)},onFinish:s=>{s.completed?p(!1):p(!0)},preserveState:!0})},B=()=>{window.print()};return e.jsxs(e.Fragment,{children:[e.jsx(se,{title:`Laporan Buku Besar Periode : ${m(l).format("MMMM DD, YYYY")} - ${m(r).format("MMMM DD, YYYY")}`}),e.jsx("div",{className:"md:pt-0 pb-16 pt-12",children:e.jsxs("div",{className:"bg-white py-2 md:pt-0 px-5 space-y-2",children:[e.jsxs("div",{className:"flex md:flex-row justify-between gap-2 print:hidden",children:[e.jsxs("div",{className:"px-3 my-auto flex flex-col md:flex-row gap-3 w-full md:w-1/2",children:[e.jsx("div",{className:"my-auto w-full",children:e.jsx(L,{value:O,onChange:Z,useRange:!1,asSingle:!0,placeholder:"Tanggal Awal",id:"date"})}),e.jsx("div",{className:"my-auto w-full",children:e.jsx(L,{value:V,onChange:ee,useRange:!1,asSingle:!0,placeholder:"Tanggal Akhir",id:"date"})}),e.jsx("div",{className:"my-auto hidden md:block",children:e.jsx(F,{disabled:!l||!r||l>r||Y,onClick:C,children:"Filter"})})]}),e.jsx("div",{className:"text-end px-3 hidden md:block print:flex print:justify-between",children:e.jsx(ne,{onClick:B,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"my-auto",children:e.jsx(A,{})}),e.jsx("div",{className:"my-auto",children:"Print"})]})})}),e.jsx("div",{className:"fixed md:hidden bottom-2 right-2",children:e.jsx("button",{onClick:B,className:"bg-white border-2 border-slate-900 p-2 rounded-full h-14 w-14",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"my-auto mx-auto",children:e.jsx(A,{})})})})})]}),g.length>0||N.length>0||v.length?e.jsx(D,{as:"div",className:"mt-3 print:hidden",children:({open:s})=>e.jsxs(e.Fragment,{children:[e.jsx(ce,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:e.jsx(D.Panel,{children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-start gap-3 md:py-5 mb-3",children:[g.length>0&&e.jsxs("div",{className:"md:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(y,{value:"Program Kegiatan",htmlFor:"program"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(b,{resources:g,selected:u,setSelected:d=>q(d),maxHeight:"max-h-40",placeholder:"Cari Program Kegiatan",isError:!!U,id:"program"}),u.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",u.code]})]}),u.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:G,children:e.jsx(w,{})})})]})]}),N.length>0&&e.jsxs("div",{className:"md:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(y,{value:"Proyek",htmlFor:"project"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(b,{resources:N,selected:x,setSelected:d=>J(d),maxHeight:"max-h-40",placeholder:"Cari Proyek",isError:!!z,id:"project"}),x.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",x.code]})]}),x.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:Q,children:e.jsx(w,{})})})]})]}),v.length>0&&e.jsxs("div",{className:"md:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(y,{value:"Departemen",htmlFor:"department"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(b,{resources:v,selected:h,setSelected:d=>W(d),maxHeight:"max-h-40",placeholder:"Cari Departemen",isError:!!_,id:"department"}),h.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",h.code]})]}),h.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:X,children:e.jsx(w,{})})})]})]})]})})}),e.jsx(D.Button,{className:"flex w-full justify-between rounded-lg bg-slate-100 px-4 py-2 text-left text-sm font-medium text-slate-900 hover:bg-slate-200 focus:outline-none focus-visible:ring focus-visible:ring-slate-500/75",children:e.jsxs("div",{className:"flex justify-center w-full gap-3",children:[e.jsxs("span",{children:["Tampilkan Lebih ",s?"Sedikit":"Banyak"]}),e.jsx(re,{className:`${s?"":"rotate-180 transform"} h-5 w-5 text-slate-500`})]})})]})}):"",e.jsx("div",{className:"md:hidden w-full print:hidden",children:e.jsx(F,{disabled:!l||!r||l>r||Y,onClick:C,className:"w-full",children:e.jsx("div",{className:"text-center w-full",children:"Filter"})})}),e.jsxs("div",{className:"uppercase pb-3 border-b hidden print:flex print:justify-between",children:[e.jsx("div",{className:"w-1/2 text-2xl my-auto",children:"Laporan Buku Besar"}),e.jsxs("div",{className:"w-1/2 text-end mt-auto",children:[e.jsx("div",{children:n.name}),e.jsx("div",{className:"text-xs",children:n.address}),e.jsxs("div",{className:"text-xs",children:[n.village,", ",n.district,", ",n.regency,","," ",n.province]})]})]}),e.jsxs("div",{className:"w-full mt-3 hidden print:flex print:justify-between",children:[e.jsx("div",{className:"uppercase"}),e.jsxs("div",{className:"text-end italic",children:["Periode : ",m(l).format("MMMM DD, YYYY")," -"," ",m(r).format("MMMM DD, YYYY")]})]}),e.jsx("div",{className:"my-2 -mx-5 space-y-3 print:font-['Open_Sans'] overflow-auto",children:e.jsx("div",{className:"md:w-full w-[550px] print:w-full",children:T.map((s,d)=>s.ledgers.length>0&&e.jsx("div",{className:"mx-5 uppercase",children:e.jsx(ie,{account:s,startedValues:I})},d))})})]})})]})}oe.layout=a=>e.jsx(ae,{header:e.jsx(le,{children:"Laporan Buku Besar"}),children:a,user:a.props.auth.user,organization:a.props.organization,title:"Laporan Buku Besar",backLink:e.jsx(E,{href:route("report",a.props.organization.id),children:e.jsx(de,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(E,{href:route("report",a.props.organization.id),children:"Laporan"})}),e.jsx("li",{children:"Laporan Buku Besar"})]})}),role:a.props.role});export{oe as default};
