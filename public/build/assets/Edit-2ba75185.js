import{W as Y,r as u,y as U,j as e,Y as L,a as p}from"./app-c35e44ea.js";import{D as Q,A as W}from"./AuthenticatedLayout-8650b6a1.js";import{H as q}from"./Header-8998d68d.js";import{k as G,Q as h}from"./react-toastify.esm-f4382caf.js";/* empty css                      */import{c as J}from"./index.esm-7bb33f87.js";import{F as X}from"./FormInput-882145bf.js";import{I as o}from"./InputLabel-f20874bf.js";import{T as x}from"./TextInput-1b317183.js";import{S as Z}from"./SecondaryButton-d72803b0.js";import{P as A}from"./PrimaryButton-cf25e388.js";import{N as j}from"./react-number-format.es-3a44e8be.js";import{C as y}from"./ClientSelectInput-22ae1373.js";import{o as ee,u as ae}from"./usePrevious-9cda1477.js";import{d as _}from"./dayjs.min-17ff4607.js";import"./index.esm-d7f28cc5.js";import"./iconBase-b0136dc9.js";import"./transition-eca15743.js";import"./combobox-da4ed674.js";import"./keyboard-bf5f0610.js";import"./active-element-history-c9a8d777.js";import"./use-resolve-button-type-6df5ca50.js";const f=(i,s,r)=>s>0?Math.ceil((i-r)/s):0;function te({organization:i,fixedAsset:s,fixedAssetCategory:r,newRef:se,date:le,accounts:g,fixedAssetCategories:b,creditAccount:m}){var v,w;const{data:l,setData:c,processing:D,patch:S,errors:a,setError:ie,reset:de}=Y({lifetime:"",name:"",code:"",residue:"",value:"",date:"",fixed_asset_category:"",credit_account:{id:null,is_cash:!1,code:""},depreciation_value:"",depreciation_accumulated:"",status:!0}),[n,T]=u.useState({startDate:s.date,endDate:s.date}),[C]=ee(n,500),F=ae(n),[I,E]=u.useState({id:r.id,name:r.name,lifetime:r.lifetime}),[H,R]=u.useState({id:m.id,name:m.name,code:m.code,is_cash:m.is_cash});u.useEffect(()=>{c({lifetime:s.lifetime,name:s.name,code:s.code,residue:s.residue,value:s.value,date:s.date,fixed_asset_category:s.fixed_asset_category_id,credit_account:{id:m.id,is_cash:m.is_cash,code:m.code},depreciation_value:s.depreciation_value,depreciation_accumulated:s.depreciation_accumulated,status:s.status})},[]),u.useEffect(()=>{if(F!==void 0){let t=_(n.startDate),d=`${t.month()+1}-${t.year()}`,N=_(s.date),K=`${N.month()+1}-${N.year()}`;d!==K?V():c("code",s.code)}},[C]);const V=()=>{U.reload({only:["newRef"],data:{date:n.startDate},onSuccess:t=>{c("code",t.props.newRef)}})},P=t=>{T(t),c("date",t.startDate)},k=t=>{const{floatValue:d}=t;c({...l,value:d,depreciation_value:f(d,l.lifetime,l.residue)})},O=t=>{const{floatValue:d}=t;c({...l,residue:d,depreciation_value:f(l.value,l.lifetime,d)})},B=t=>{const{floatValue:d}=t;c({...l,lifetime:d,depreciation_value:f(l.value,d,l.residue)})},M=t=>{E(t),c({...l,lifetime:t.lifetime,fixed_asset_category:t.id,depreciation_value:f(l.value,t.lifetime,l.residue)})},$=t=>{R(t),c({...l,credit_account:{id:t.id,is_cash:t.is_cash,code:t.code}})},z=t=>{t.preventDefault(),S(route("data-master.fixed-asset.update",{organization:i.id,fixedAsset:s.id}),{onSuccess:()=>{h.success("Harta Tetap Berhasil Diubah",{position:h.POSITION.TOP_CENTER})},onError:d=>{h.error(d.date,{position:h.POSITION.TOP_CENTER})},preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:"Tambah Harta Tetap"}),e.jsx(G,{}),e.jsx(X,{onSubmit:z,children:e.jsx("div",{className:"w-full sm:mt-2 sm:py-5",children:e.jsxs("div",{className:"sm:w-1/2 sm:mx-auto px-3 sm:px-0 space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(o,{value:"Tanggal Perolehan",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(Q,{value:n,onChange:P,useRange:!1,asSingle:!0,placeholder:"Tanggal",id:"date",displayFormat:"MMMM DD, YYYY"}),(a==null?void 0:a.date)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.date})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(o,{value:"Kode",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(x,{id:"code",name:"code",className:`w-full ${(a==null?void 0:a.code)&&"border-red-500"}`,placeholder:"Kode",value:l.code,onChange:t=>c("code",t.target.value.toUpperCase())}),(a==null?void 0:a.code)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.code})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(o,{value:"Kategori Harta Tetap",htmlFor:"category",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(y,{resources:b,selected:I,setSelected:t=>M(t),maxHeight:"max-h-40",placeholder:"Cari Kategori Harta Tetap",id:"category",isError:!!(a!=null&&a.fixed_asset_category),isFocused:!0}),(a==null?void 0:a.fixed_asset_category)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.fixed_asset_category})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(o,{value:"Usia Pakai (Bulan)",htmlFor:"lifetime",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(j,{value:l.lifetime,customInput:x,onValueChange:t=>B(t),thousandSeparator:!0,className:"text-end w-full border",id:"lifetime"}),(a==null?void 0:a.lifetime)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.lifetime})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(o,{value:"Nama",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(x,{id:"name",name:"name",className:`w-full ${(a==null?void 0:a.name)&&"border-red-500"}`,placeholder:"Nama",value:l.name,onChange:t=>c("name",t.target.value.toUpperCase())}),(a==null?void 0:a.name)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.name})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(o,{value:"Nilai Perolehan",htmlFor:"value",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(j,{value:l.value,customInput:x,onValueChange:t=>k(t),thousandSeparator:!0,className:"text-end w-full border",prefix:"IDR ",id:"value"}),(a==null?void 0:a.value)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.value})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(o,{value:"Residu",htmlFor:"residue",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(j,{value:l.residue,customInput:x,onValueChange:t=>O(t),thousandSeparator:!0,className:"text-end w-full border",prefix:"IDR ",id:"residue"}),(a==null?void 0:a.residue)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.residue})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(o,{value:"Akun Kredit",htmlFor:"credit_account_id",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(y,{resources:g,selected:H,setSelected:t=>$(t),maxHeight:"max-h-40",placeholder:"Cari Akun",id:"credit_account_id",isError:!!((v=a==null?void 0:a.credit_account)!=null&&v.id)}),((w=a==null?void 0:a.credit_account)==null?void 0:w.id)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.credit_account.id})]})]}),e.jsxs("div",{className:"flex justify-end flex-col-reverse sm:flex-row gap-2 mt-5",children:[e.jsx("div",{className:"w-full sm:w-1/6 my-auto text-center",children:e.jsx(p,{href:route("data-master.fixed-asset",i.id),children:e.jsx(Z,{className:"w-full",children:e.jsx("div",{className:"text-center w-full",children:"Batal"})})})}),e.jsx("div",{className:"w-full sm:w-1/6 text-center",children:e.jsx(A,{className:"w-full",disabled:D,children:e.jsx("div",{className:"text-center w-full",children:"Ubah"})})})]})]})})})]})}te.layout=i=>e.jsx(W,{header:e.jsx(q,{children:"Tambah Harta Tetap"}),children:i,user:i.props.auth.user,organization:i.props.organization,title:"Tambah Harta Tetap",backLink:e.jsx(p,{href:route("data-master.fixed-asset",i.props.organization.id),children:e.jsx(J,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(p,{href:route("data-master",i.props.organization.id),children:"Data Master"})}),e.jsx("li",{className:"font-bold",children:e.jsx(p,{href:route("data-master.fixed-asset",i.props.organization.id),children:"Harta Tetap"})}),e.jsx("li",{children:"Tambah Harta Tetap"})]})}),role:i.props.role});export{te as default};
