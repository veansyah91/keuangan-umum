import{r,j as e,Y as H,y as K,a as Y}from"./app-c35e44ea.js";import{D as M,A as U}from"./AuthenticatedLayout-8650b6a1.js";import{H as _}from"./Header-8998d68d.js";import{p as G,c as J}from"./index.esm-7bb33f87.js";import{S as Q}from"./SecondaryButton-d72803b0.js";import{F as L}from"./index.esm-0b939644.js";import{P as W}from"./PrimaryButton-cf25e388.js";import{f}from"./formatNumber-b542c689.js";import{d as x}from"./dayjs.min-17ff4607.js";import m from"./LostProfitContent-0f3da942.js";import{A as j}from"./disclosure-ace1ddee.js";import{q as X}from"./transition-eca15743.js";import"./index.esm-d7f28cc5.js";import"./iconBase-b0136dc9.js";/* empty css                      */import"./keyboard-bf5f0610.js";import"./use-resolve-button-type-6df5ca50.js";function Z({organization:i,ledgers:v,startDateFilter:u,endDateFilter:h}){const[l,S]=r.useState(v||[]),[o,k]=r.useState(u||""),[d,B]=r.useState(h||""),[R,P]=r.useState({startDate:u||"",endDate:u||""}),[F,A]=r.useState({startDate:h||"",endDate:h||""}),[n,I]=r.useState({accountCode:!1}),[c,E]=r.useState(0),[a,T]=r.useState({variable:0,fixed:0,depreciated:0,other:0}),[V,p]=r.useState(!1);r.useEffect(()=>{b(v)},[]);const b=t=>{let y=0,N=0,g=0,C=0,D=0;t.map(s=>{s.code>="400000000"&&s.code<="499999999"&&(y+=parseInt(s.total)),s.code>="500000000"&&s.code<="599999999"&&(N+=parseInt(s.total)),s.code>="600000000"&&s.code<="699999999"&&(g+=parseInt(s.total)),s.code>="700000000"&&s.code<="799999999"&&(C+=parseInt(s.total)),s.code>="800000000"&&s.code<="899999999"&&(D+=parseInt(s.total))}),S(t),E(y*-1),T({variable:N,fixed:g,depreciated:C,other:D})},O=t=>{P(t),k(t.startDate)},$=t=>{A(t),B(t.endDate)},q=()=>{K.reload({only:["ledgers"],data:{startDate:o,endDate:d},onBefore:t=>{t.completed?p(!1):p(!0)},onSuccess:t=>{b(t.props.ledgers)},onError:t=>{console.log(t)},onFinish:t=>{t.completed?p(!1):p(!0)},preserveState:!0})},w=()=>{window.print()};return console.log(a),e.jsxs(e.Fragment,{children:[e.jsx(H,{title:`Laporan Laba Rugi Periode : ${x(o).format("MMMM DD, YYYY")} - ${x(d).format("MMMM DD, YYYY")}`}),e.jsx("div",{className:"sm:pt-0 pb-16 pt-12",children:e.jsxs("div",{className:"bg-white py-2 sm:pt-0 px-5",children:[e.jsxs("div",{className:"flex sm:flex-row justify-between gap-2 print:hidden",children:[e.jsxs("div",{className:"px-3 my-auto flex gap-3",children:[e.jsx("div",{className:"my-auto",children:e.jsx(M,{value:R,onChange:O,useRange:!1,asSingle:!0,placeholder:"Tanggal Awal",id:"date",displayFormat:"MMMM DD, YYYY"})}),e.jsx("div",{className:"my-auto",children:e.jsx(M,{value:F,onChange:$,useRange:!1,asSingle:!0,placeholder:"Tanggal Akhir",id:"date",displayFormat:"MMMM DD, YYYY"})}),e.jsx("div",{className:"my-auto",children:e.jsx(W,{disabled:!o||!d||o>d||V,onClick:q,children:"Filter"})})]}),e.jsx("div",{className:"text-end px-3 hidden sm:block",children:e.jsx(Q,{onClick:w,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"my-auto",children:e.jsx(L,{})}),e.jsx("div",{className:"my-auto",children:"Print"})]})})}),e.jsx("div",{className:"fixed sm:hidden bottom-2 right-2",children:e.jsx("button",{onClick:w,className:"bg-white border-2 border-slate-900 p-2 rounded-full h-14 w-14",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"my-auto mx-auto",children:e.jsx(L,{})})})})})]}),e.jsx(j,{as:"div",className:"mt-3 print:hidden",children:({open:t})=>e.jsxs(e.Fragment,{children:[e.jsx(X,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:e.jsx(j.Panel,{children:e.jsx("div",{className:"flex flex-col sm:flex-row justify-start gap-3 sm:py-5 mb-3",children:e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer gap-2",htmlFor:"checkbox",children:[e.jsx("input",{type:"checkbox",className:"checkbox",id:"checkbox",value:n.accountCode,onChange:()=>I({...n.accountCode,accountCode:!n.accountCode}),checked:n.accountCode}),e.jsx("span",{className:"label-text",children:"Tampilkan Kode Akun"})]})})})})}),e.jsx(j.Button,{className:"flex w-full justify-between rounded-lg bg-slate-100 px-4 py-2 text-left text-sm font-medium text-slate-900 hover:bg-slate-200 focus:outline-none focus-visible:ring focus-visible:ring-slate-500/75",children:e.jsxs("div",{className:"flex justify-center w-full gap-3",children:[e.jsx("span",{children:"Tampilkan Lebih Banyak"}),e.jsx(G,{className:`${t?"":"rotate-180 transform"} h-5 w-5 text-slate-500`})]})})]})}),e.jsxs("div",{className:"uppercase pt-9 pb-3 border-b hidden print:flex print:justify-between",children:[e.jsx("div",{className:"w-1/2 text-2xl my-auto",children:"Laporan laba rugi"}),e.jsxs("div",{className:"w-1/2 text-end mt-auto",children:[e.jsx("div",{children:i.name}),e.jsx("div",{className:"text-xs",children:i.address}),e.jsxs("div",{className:"text-xs",children:[i.village,", ",i.district,", ",i.regency,", ",i.province]})]})]}),e.jsxs("div",{className:"w-full text-end italic mt-3 hidden print:block",children:["Periode : ",x(o).format("MMMM DD, YYYY")," - ",x(d).format("MMMM DD, YYYY")]}),e.jsx("div",{className:"my-2 space-y-3 mx-3 print:font-['Open_Sans'] overflow-auto",children:e.jsxs("div",{className:"sm:w-3/4 w-[550px] print:w-full",children:[c>0&&e.jsx(m,{ledgers:l,title:"Pendapatan",showCode:n.accountCode,type:"revenue",amount:c}),a.variable>0&&e.jsx(m,{ledgers:l,title:"Biaya Variabel",showCode:n.accountCode,type:"variable-cost",amount:a.variable}),a.fixed>0&&e.jsx(m,{ledgers:l,title:"Biaya Operasional",showCode:n.accountCode,type:"fixed-cost",amount:a.fixed}),a.depreciated>0&&e.jsx(m,{ledgers:l,title:"Biaya Penyusutan",showCode:n.accountCode,type:"depreciated-cost",amount:a.depreciated}),a.other>0&&e.jsx(m,{ledgers:l,title:"Biaya Lain",showCode:n.accountCode,type:"other-cost",amount:a.other}),l.length>0&&e.jsxs("div",{className:"mt-5",children:[e.jsxs("div",{className:"flex w-full justify-between py-2 font-bold",children:[e.jsx("div",{className:"w-5/12 print:w-8/12 uppercase flex gap-2",children:"Laba Kotor"}),e.jsxs("div",{className:"w-2/12 print:w-4/12 text-center flex justify-end gap-3",children:[e.jsx("div",{className:"w-1/4 print:w-2/4 text-end",children:"Rp. "}),e.jsx("div",{className:"w-3/4 print:w-2/4 text-end",children:f(c-a.variable)})]})]}),e.jsxs("div",{className:"flex w-full justify-between py-2 font-bold",children:[e.jsx("div",{className:"w-5/12 print:w-8/12 uppercase flex gap-2",children:"Laba Bersih"}),e.jsxs("div",{className:"w-2/12 print:w-4/12 text-center flex justify-end gap-3",children:[e.jsx("div",{className:"w-1/4 print:w-2/4 text-end",children:"Rp. "}),e.jsx("div",{className:"w-3/4 print:w-2/4 text-end",children:f(c-(a.variable+a.fixed))})]})]}),(a.depreciated>0||a.other>0)&&e.jsxs("div",{className:"flex w-full justify-between py-2 font-bold",children:[e.jsx("div",{className:"w-5/12 print:w-8/12 uppercase flex gap-2",children:"Laba Bersih Setelah Biaya Lain"}),e.jsxs("div",{className:"w-2/12 print:w-4/12 text-center flex justify-end gap-3",children:[e.jsx("div",{className:"w-1/4 print:w-2/4 text-end",children:"Rp. "}),e.jsx("div",{className:"w-3/4 print:w-2/4 text-end",children:f(c-(a.variable+a.fixed+a.depreciated+a.other))})]})]})]})]})})]})})]})}Z.layout=i=>e.jsx(U,{header:e.jsx(_,{children:"Laporan Laba Rugi"}),children:i,user:i.props.auth.user,organization:i.props.organization,title:"Laporan Laba Rugi",backLink:e.jsx(Y,{href:route("report",i.props.organization.id),children:e.jsx(J,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(Y,{href:route("report",i.props.organization.id),children:"Laporan"})}),e.jsx("li",{children:"Laporan Laba Rugi"})]})}),role:i.props.role});export{Z as default};
