import{r as a,j as e,Y as xe,y as ue,a as O}from"./app-68378a75.js";import{D as he,A as pe}from"./AuthenticatedLayout-aa84864c.js";import{H as je}from"./Header-d9b20899.js";import{o as D,r as fe,c as ve}from"./index.esm-023a1d14.js";import{S as ye}from"./SecondaryButton-40901484.js";import{F as U}from"./index.esm-ab919039.js";import{P as Ne}from"./PrimaryButton-98341e8c.js";import{d as k}from"./dayjs.min-c779e003.js";import P from"./BalanceContent-09904396.js";import{I as E}from"./InputLabel-8493eb3f.js";import{C as Y}from"./ClientSelectInput-e0070ca8.js";import{$ as L}from"./disclosure-9425a19a.js";import{X as be}from"./transition-a4e373a4.js";import"./ApplicationLogo-10150e9c.js";import"./iconBase-f8c3c84d.js";/* empty css                      */import"./formatNumber-b542c689.js";import"./combobox-f9799b5e.js";import"./portal-ab6e9e20.js";import"./close-provider-c8aabbb8.js";function ge({organization:l,ledgers:$,endDateFilter:w,account:R,projects:j,programs:f,departments:v,project:m,program:x,department:u}){const[S,V]=a.useState([]),[y,X]=a.useState(w||""),[G,J]=a.useState({startDate:w||"",endDate:w||""}),[c,Q]=a.useState({accountCode:!1}),[M,W]=a.useState(0),[I,Z]=a.useState(0),[F,z]=a.useState(0),[ee,N]=a.useState(!1),[n,B]=a.useState({id:m?m.id:null,name:m?m.name:"",code:m?m.code:""}),[te,we]=a.useState(""),[o,K]=a.useState({id:x?x.id:null,name:x?x.name:"",code:x?x.code:""}),[se,Se]=a.useState(""),[i,_]=a.useState({id:u?u.id:null,name:u?u.name:"",code:u?u.code:""}),[ae,Ce]=a.useState("");a.useEffect(()=>{A($,R)},[]);const le=t=>{K(t)},re=()=>{K({id:null,name:"",code:""})},ne=t=>{B(t)},oe=()=>{B({id:null,name:"",code:""})},ie=t=>{_(t)},ce=()=>{_({id:null,name:"",code:""})},A=(t,r)=>{let T=0,q=0,b=0,g=0,h=0,p=null;t.map((s,C)=>{s.code>="100000000"&&s.code<="199999999"&&(T+=parseInt(s.total),g+=parseInt(s.total)),s.code>="200000000"&&s.code<="299999999"&&(q+=parseInt(s.total),h+=parseInt(s.total)),s.code>="300000000"&&s.code<="399999999"&&(b+=parseInt(s.total),h+=parseInt(s.total),s.can_be_deleted||(p=C))});let d=[...t];if(p){let s=g+h-parseInt(d[p].total);d[p]={...d[p],total:s*-1},b+=s*-1}else d=[...d,{code:r.code,name:r.name,account_id:r.id,can_be_deleted:r.can_be_deleted,total:(g+h)*-1}],d.sort((s,C)=>s.code-C.code),b+=(g+h)*-1;V(d),W(T),Z(q*-1),z(b*-1)},de=t=>{J(t),X(k(t.endDate).format("YYYY-MM-DD"))},me=()=>{ue.reload({only:["ledgers","account"],data:{endDate:y,program:o.id,project:n.id,department:i.id},onBefore:t=>{t.completed?N(!1):N(!0)},onSuccess:t=>{A(t.props.ledgers,t.props.account)},onError:t=>{console.log(t)},onFinish:t=>{t.completed?N(!1):N(!0)},preserveState:!0})},H=()=>{window.print()};return e.jsxs(e.Fragment,{children:[e.jsx(xe,{title:`Laporan Neraca Periode : ${k(y).format("MMMM DD, YYYY")}`}),e.jsx("div",{className:"sm:pt-0 pb-16 pt-12",children:e.jsxs("div",{className:"bg-white py-2 sm:pt-0 px-5",children:[e.jsxs("div",{className:"flex sm:flex-row justify-between gap-2 print:hidden",children:[e.jsxs("div",{className:"px-3 my-auto flex gap-3",children:[e.jsx("div",{className:"my-auto",children:e.jsx(he,{value:G,onChange:de,useRange:!1,asSingle:!0,placeholder:"Tanggal Akhir",id:"date",displayFormat:"MMMM DD, YYYY"})}),e.jsx("div",{className:"my-auto",children:e.jsx(Ne,{disabled:!y||ee,onClick:me,children:"Filter"})})]}),e.jsx("div",{className:"text-end px-3 hidden sm:block",children:e.jsx(ye,{onClick:H,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"my-auto",children:e.jsx(U,{})}),e.jsx("div",{className:"my-auto",children:"Print"})]})})}),e.jsx("div",{className:"fixed sm:hidden bottom-2 right-2",children:e.jsx("button",{onClick:H,className:"bg-white border-2 border-slate-900 p-2 rounded-full h-14 w-14",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"my-auto mx-auto",children:e.jsx(U,{})})})})})]}),e.jsx(L,{as:"div",className:"mt-3 print:hidden",children:({open:t})=>e.jsxs(e.Fragment,{children:[e.jsx(be,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:e.jsxs(L.Panel,{children:[f.length>0||j.length>0||v.length?e.jsxs("div",{className:"flex flex-col sm:flex-row justify-start gap-3 sm:py-5 mb-3",children:[f.length>0&&e.jsxs("div",{className:"sm:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(E,{value:"Program Kegiatan",htmlFor:"program"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(Y,{resources:f,selected:o,setSelected:r=>le(r),maxHeight:"max-h-40",placeholder:"Cari Program Kegiatan",isError:!!se,id:"program"}),o.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",o.code]})]}),o.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:re,children:e.jsx(D,{})})})]})]}),j.length>0&&e.jsxs("div",{className:"sm:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(E,{value:"Proyek",htmlFor:"project"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(Y,{resources:j,selected:n,setSelected:r=>ne(r),maxHeight:"max-h-40",placeholder:"Cari Proyek",isError:!!te,id:"project"}),n.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",n.code]})]}),n.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:oe,children:e.jsx(D,{})})})]})]}),v.length>0&&e.jsxs("div",{className:"sm:w-1/3 w-full text-slate-900 space-y-2",children:[e.jsx("div",{children:e.jsx(E,{value:"Departemen",htmlFor:"department"})}),e.jsxs("div",{className:"flex w-full relative",children:[e.jsxs("div",{className:"w-5/6",children:[e.jsx(Y,{resources:v,selected:i,setSelected:r=>ie(r),maxHeight:"max-h-40",placeholder:"Cari Departemen",isError:!!ae,id:"department"}),i.id&&e.jsxs("span",{className:"text-xs absolute",children:["Kode: ",i.code]})]}),i.id&&e.jsx("div",{className:"w-1/6 my-auto",children:e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:ce,children:e.jsx(D,{})})})]})]})]}):"",e.jsx("div",{className:"flex flex-col sm:flex-row justify-start gap-3 sm:py-5 mb-3",children:e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer gap-2",htmlFor:"checkbox",children:[e.jsx("input",{type:"checkbox",className:"checkbox",id:"checkbox",value:c.accountCode,onChange:()=>Q({...c.accountCode,accountCode:!c.accountCode}),checked:c.accountCode}),e.jsx("span",{className:"label-text",children:"Tampilkan Kode Akun"})]})})})]})}),e.jsx(L.Button,{className:"flex w-full justify-between rounded-lg bg-slate-100 px-4 py-2 text-left text-sm font-medium text-slate-900 hover:bg-slate-200 focus:outline-none focus-visible:ring focus-visible:ring-slate-500/75",children:e.jsxs("div",{className:"flex justify-center w-full gap-3",children:[e.jsx("span",{children:"Tampilkan Lebih Banyak"}),e.jsx(fe,{className:`${t?"":"rotate-180 transform"} h-5 w-5 text-slate-500`})]})})]})}),e.jsxs("div",{className:"uppercase pt-9 pb-3 border-b hidden print:flex print:justify-between",children:[e.jsx("div",{className:"w-1/2 text-2xl my-auto",children:"Laporan Neraca"}),e.jsxs("div",{className:"w-1/2 text-end mt-auto",children:[e.jsx("div",{children:l.name}),e.jsx("div",{className:"text-xs",children:l.address}),e.jsxs("div",{className:"text-xs",children:[l.village,", ",l.district,", ",l.regency,","," ",l.province]})]})]}),e.jsxs("div",{className:"w-full mt-3 hidden print:flex print:justify-between",children:[e.jsxs("div",{className:"text-end italic ",children:["Periode : ",k(y).format("MMMM DD, YYYY")]}),e.jsx("div",{className:"text-xs my-auto",children:f.length>0||j.length>0||v.length>0?e.jsxs("div",{children:[o.name&&e.jsxs("div",{children:["Program Kegiatan: ",o.code,"-",o.name.toUpperCase()]}),n.name&&e.jsxs("div",{children:["Proyek : ",n.code,"-",n.name.toUpperCase()]}),i.name&&e.jsxs("div",{children:["Departemen : ",i.code,"-",i.name.toUpperCase()]})]}):""})]}),e.jsx("div",{className:"my-2 space-y-3 mx-3 print:font-['Open_Sans'] overflow-auto",children:e.jsxs("div",{className:"sm:w-3/4 w-[550px] print:w-full",children:[M>0&&e.jsx(P,{ledgers:S,title:"Harta",showCode:c.accountCode,type:"asset",amount:M}),I>0&&e.jsx(P,{ledgers:S,title:"Kewajiban",showCode:c.accountCode,type:"liability",amount:I}),F>0&&e.jsx(P,{ledgers:S,title:"Modal",showCode:c.accountCode,type:"equity",amount:F})]})})]})})]})}ge.layout=l=>e.jsx(pe,{header:e.jsx(je,{children:"Laporan Neraca"}),children:l,user:l.props.auth.user,organization:l.props.organization,title:"Laporan Neraca",backLink:e.jsx(O,{href:route("report",l.props.organization.id),children:e.jsx(ve,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(O,{href:route("report",l.props.organization.id),children:"Laporan"})}),e.jsx("li",{children:"Laporan Neraca"})]})}),role:l.props.role});export{ge as default};
