import{m as K,r as n,S as L,j as e,L as z,$ as f}from"./app-d982c3f4.js";import{D as $,A as U}from"./AuthenticatedLayout-6728f6f3.js";import{H as Q}from"./Header-d16afac5.js";import{k as q,Q as u}from"./react-toastify.esm-d0559b96.js";/* empty css                      */import{c as G}from"./index.esm-98495e7d.js";import{F as J}from"./FormInput-0baa2c63.js";import{I as d}from"./InputLabel-62691252.js";import{T as o}from"./TextInput-89870703.js";import{S as W}from"./SecondaryButton-992a520b.js";import{P as X}from"./PrimaryButton-18d5600e.js";import{N as j}from"./react-number-format.es-91e943d4.js";import{C as _}from"./ClientSelectInput-dd9882a6.js";import{a as Z,u as ee}from"./index.module-60dd13e9.js";import{d as b}from"./dayjs.min-7fd2e3bb.js";import"./ApplicationLogo-69aee991.js";import"./iconBase-923fb019.js";import"./transition-a8359558.js";import"./combobox-913f71f5.js";import"./portal-d298a1f5.js";const x=(l,h,p)=>h>0?Math.ceil((l-p)/h):0;function ae({organization:l,role:h,newRef:p,date:r,accounts:S,fixedAssetCategories:D}){var y,g;const{data:t,setData:c,processing:C,post:T,errors:a,setError:se,reset:F}=K({lifetime:0,name:"",code:p,residue:0,value:0,date:r,fixed_asset_category:null,credit_account:{id:null,is_cash:!1,code:""},depreciation_value:0,depreciation_accumulated:0}),[m,v]=n.useState({startDate:r,endDate:r}),[I]=Z(m,500),H=ee(m),[Y,w]=n.useState({id:null,name:"",lifetime:0}),[A,N]=n.useState({id:null,name:"",code:"",is_cash:!0});n.useEffect(()=>{H!==void 0&&m.startDate&&E()},[I]);const E=()=>{L.reload({only:["newRef"],data:{date:b(m.startDate).format("YYYY-MM-DD")},onSuccess:s=>{c("code",s.props.newRef)}})},R=s=>{v(s),c("date",b(s.startDate).format("YYYY-MM-DD"))},V=s=>{const{floatValue:i}=s;c({...t,value:i,depreciation_value:x(i,t.lifetime,t.residue)})},M=s=>{const{floatValue:i}=s;c({...t,residue:i,depreciation_value:x(t.value,t.lifetime,i)})},P=s=>{const{floatValue:i}=s;c({...t,lifetime:i,depreciation_value:x(t.value,i,t.residue)})},k=s=>{w(s),c({...t,lifetime:s.lifetime,fixed_asset_category:s.id,depreciation_value:x(t.value,s.lifetime,t.residue)})},O=s=>{N(s),c({...t,credit_account:{id:s.id,is_cash:s.is_cash,code:s.code}})},B=s=>{s.preventDefault(),T(route("data-master.fixed-asset.post",l.id),{onSuccess:()=>{u.success("Harta Tetap Berhasil Ditambahkan",{position:u.POSITION.TOP_CENTER}),F(),w({id:null,name:"",lifetime:0}),N({id:null,name:"",code:"",is_cash:!0}),v({startDate:r,endDate:r})},onError:i=>{u.error(i.date,{position:u.POSITION.TOP_CENTER})},preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:"Tambah Harta Tetap"}),e.jsx(q,{}),e.jsx(J,{onSubmit:B,children:e.jsx("div",{className:"w-full sm:mt-2 sm:py-5",children:e.jsxs("div",{className:"sm:w-1/2 sm:mx-auto px-3 sm:px-0 space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(d,{value:"Tanggal Perolehan",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx($,{value:m,onChange:R,useRange:!1,asSingle:!0,placeholder:"Tanggal",id:"date",displayFormat:"MMMM DD, YYYY"}),(a==null?void 0:a.date)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.date})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(d,{value:"Kode",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(o,{id:"code",name:"code",className:`w-full ${(a==null?void 0:a.code)&&"border-red-500"}`,placeholder:"Kode",value:t.code,onChange:s=>c("code",s.target.value.toUpperCase())}),(a==null?void 0:a.code)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.code})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(d,{value:"Kategori Harta Tetap",htmlFor:"category",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(_,{resources:D,selected:Y,setSelected:s=>k(s),maxHeight:"max-h-40",placeholder:"Cari Kategori Harta Tetap",id:"category",isError:!!(a!=null&&a.fixed_asset_category),isFocused:!0}),(a==null?void 0:a.fixed_asset_category)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.fixed_asset_category})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(d,{value:"Usia Pakai (Bulan)",htmlFor:"lifetime",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(j,{value:t.lifetime,customInput:o,onValueChange:s=>P(s),thousandSeparator:!0,className:"text-end w-full border",id:"lifetime"}),(a==null?void 0:a.lifetime)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.lifetime})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(d,{value:"Nama",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(o,{id:"name",name:"name",className:`w-full ${(a==null?void 0:a.name)&&"border-red-500"}`,placeholder:"Nama",value:t.name,onChange:s=>c("name",s.target.value.toUpperCase())}),(a==null?void 0:a.name)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.name})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(d,{value:"Nilai Perolehan",htmlFor:"value",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(j,{value:t.value,customInput:o,onValueChange:s=>V(s),thousandSeparator:!0,className:"text-end w-full border",prefix:"IDR ",id:"value"}),(a==null?void 0:a.value)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.value})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(d,{value:"Residu",htmlFor:"residue",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(j,{value:t.residue,customInput:o,onValueChange:s=>M(s),thousandSeparator:!0,className:"text-end w-full border",prefix:"IDR ",id:"residue"}),(a==null?void 0:a.residue)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.residue})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(d,{value:"Akun Kredit",htmlFor:"credit_account_id",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(_,{resources:S,selected:A,setSelected:s=>O(s),maxHeight:"max-h-40",placeholder:"Cari Akun",id:"credit_account_id",isError:!!((y=a==null?void 0:a.credit_account)!=null&&y.id)}),((g=a==null?void 0:a.credit_account)==null?void 0:g.id)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.credit_account.id})]})]}),e.jsxs("div",{className:"flex justify-end flex-col-reverse sm:flex-row gap-2 mt-5",children:[e.jsx("div",{className:"w-full sm:w-1/6 my-auto text-center",children:e.jsx(f,{href:route("data-master.fixed-asset",l.id),children:e.jsx(W,{className:"w-full",children:e.jsx("div",{className:"text-center w-full",children:"Batal"})})})}),e.jsx("div",{className:"w-full sm:w-1/6 text-center",children:e.jsx(X,{className:"w-full",disabled:C,children:e.jsx("div",{className:"text-center w-full",children:"Simpan"})})})]})]})})})]})}ae.layout=l=>e.jsx(U,{header:e.jsx(Q,{children:"Tambah Harta Tetap"}),children:l,user:l.props.auth.user,organization:l.props.organization,title:"Tambah Harta Tetap",backLink:e.jsx(f,{href:route("data-master.fixed-asset",l.props.organization.id),children:e.jsx(G,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(f,{href:route("data-master",l.props.organization.id),children:"Data Master"})}),e.jsx("li",{className:"font-bold",children:e.jsx(f,{href:route("data-master.fixed-asset",l.props.organization.id),children:"Harta Tetap"})}),e.jsx("li",{children:"Tambah Harta Tetap"})]})}),role:l.props.role});export{ae as default};
