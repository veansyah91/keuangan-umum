import{r as f,W as M,j as s,Y as T,a as h}from"./app-5a32895a.js";import{A as Y}from"./AuthenticatedLayout-aaefbd4c.js";import{H as k}from"./Header-e7fc7cfb.js";import{c as q}from"./index.esm-bd4bd7ee.js";import{f as r}from"./formatNumber-b542c689.js";import{S as b}from"./SecondaryButton-1ef4fc88.js";import{F as y,d as $}from"./index.esm-b519eb03.js";import{d as N}from"./dayjs.min-75afdc15.js";import{k as B,Q as A}from"./react-toastify.esm-40084ac1.js";import"./ApplicationLogo-129360f1.js";import"./iconBase-6b1d4fe3.js";import"./transition-7d2eb4c9.js";/* empty css                      */const m=(a,c,i="plus")=>a.map(l=>{let x=c.find(u=>u.category_id===l.id);return{id:l.id,name:l.name,value:x.value/x.qty,unit:l.unit,is_cut:!!l.is_cut,has_hour:!!l.has_hour,qty:x.qty,total:x.value}});function g({organization:a,categories:c,payment:i,contact:l,user:x,whatsappPlugin:u}){const[D]=f.useState("https://web.whatsapp.com/send"),[p]=f.useState(m(c,i.details).filter(e=>!e.is_cut&&e.total!==0)),[o]=f.useState(m(c,i.details).filter(e=>e.is_cut&&e.total!==0)),{post:_,processing:R}=M({detailPlus:m(c,i.details).filter(e=>!e.is_cut&&e.total!==0),detailMinus:m(c,i.details).filter(e=>e.is_cut&&e.total!==0),total:r(i.details.reduce((e,d)=>e+d.value,0)),contact_id:l.id,date:i.date,month:i.month,studyYear:i.study_year}),v=()=>{window.print()},w=()=>{if(u){_(route("cashflow.staff-salary-payment.send-whatsapp",{organization:a.id,id:i.id,staff:l.id}),{onSuccess:({props:t})=>{const{flash:n}=t;A.success(n.success,{position:A.POSITION.TOP_CENTER})}});return}let e=l.phone;e[0]!=="6"&&e[1]!=="2"&&(e="62"+e);let d="";p.forEach((t,n)=>{let j=t.unit?`${t.qty} ${t.unit} x IDR. ${r(t.total/t.qty)} = `:"";d+=`%0A${n+1}. ${t.name} : ${j} IDR. ${r(t.total)}`}),o.length>0&&(d+="%0A*Potongan*",o.forEach((t,n)=>{let j=t.unit?`${t.qty} ${t.unit} x IDR. ${r(t.total/t.qty)} = `:"";d+=`%0A${n+1}. ${t.name} : ${j} IDR. ${r(t.total)}`})),d+=`%0A*Total: IDR. ${r(i.details.reduce((t,n)=>t+n.value,0))}*`;let I=`*TANDA TERIMA GAJI BULANAN*%0A-------------------------------------------------------%0A*Nama*: ${l.name}%0A*No. Staf*: ${l.staff.no_ref??"-"}%0A*Jabatan*: ${l.staff.position??"-"}%0A*Tahun Masuk*: ${l.staff.entry_year}%0A-------------------------------------------------------%0A*Tanggal*: ${N(i.date).locale("id").format("DD MMMM YYYY")}%0A*Bulan*: ${i.month} (${i.study_year})%0A*Total*: IDR. ${r(i.details.reduce((t,n)=>t+n.value,0))}%0A%0A*DETAIL:*${d}%0A%0A%0ATtd,%0A%0A%0A*${a.name}*`,S=`${D}?phone=${e}&text=${I}`;window.open(S,"_blank")};return s.jsxs(s.Fragment,{children:[s.jsx(T,{title:`Rincian Gaji Bulanan Staf ${l.name} (${l.staff.no_ref??"-"})`}),s.jsx(B,{}),s.jsx("div",{className:"sm:pt-0 pb-16 pt-12",children:s.jsxs("div",{className:"bg-white py-2 sm:pt-0 px-5",children:[s.jsxs("div",{className:"flex sm:flex-row justify-between gap-2 print:hidden",children:[s.jsx("div",{className:"px-3 my-auto flex gap-3"}),s.jsxs("div",{className:"text-end px-3 hidden sm:block space-x-5",children:[s.jsx(b,{onClick:w,disabled:!l.phone||R,children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"my-auto",children:s.jsx(y,{})}),s.jsx("div",{className:"my-auto",children:"Kirim WA"})]})}),s.jsx(b,{onClick:v,children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"my-auto",children:s.jsx($,{})}),s.jsx("div",{className:"my-auto",children:"Print"})]})})]}),s.jsxs("div",{className:"fixed sm:hidden bottom-2 right-2 space-x-1",children:[s.jsx("button",{onClick:w,className:"bg-white border-2 border-slate-900 p-2 rounded-full h-14 w-14",children:s.jsx("div",{className:"flex gap-2",children:s.jsx("div",{className:"my-auto mx-auto",children:s.jsx(y,{})})})}),s.jsx("button",{onClick:v,className:"bg-white border-2 border-slate-900 p-2 rounded-full h-14 w-14",children:s.jsx("div",{className:"flex gap-2",children:s.jsx("div",{className:"my-auto mx-auto",children:s.jsx($,{})})})})]})]}),s.jsxs("div",{className:"uppercase pt-9 pb-3 border-b hidden print:flex print:justify-between",children:[s.jsx("div",{className:"w-1/2 text-2xl my-auto",children:"Gaji Bulanan"}),s.jsxs("div",{className:"w-1/2 text-end mt-auto",children:[s.jsx("div",{children:a.name}),s.jsx("div",{className:"text-xs",children:a.address}),s.jsxs("div",{className:"text-xs",children:[a.village,", ",a.district,", ",a.regency,","," ",a.province]})]})]}),s.jsx("div",{className:"my-2 space-y-3 mx-3 print:font-['Open_Sans'] overflow-auto",children:s.jsxs("div",{className:"sm:w-3/4 w-[550px] print:w-full",children:[s.jsxs("div",{className:"w-full space-y-2",children:[s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"w-1/4",children:"Nama"}),s.jsxs("div",{className:"w-3/4",children:[": ",l.name]})]}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"w-1/4",children:"No. Id"}),s.jsxs("div",{className:"w-3/4",children:[": ",l.staff.no_ref??"-"]})]}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"w-1/4",children:"Jabatan"}),s.jsxs("div",{className:"w-3/4",children:[": ",l.staff.position]})]}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"w-1/4",children:"Tahun Masuk"}),s.jsxs("div",{className:"w-3/4",children:[": ",l.staff.entry_year]})]})]}),s.jsxs("div",{className:"w-full space-y-2 mt-2 pt-3 border-t border-slate-900",children:[s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"w-1/4",children:"Tanggal"}),s.jsxs("div",{className:"w-3/4",children:[": ",N(i.date).locale("id").format("DD MMMM YYYY")]})]}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"w-1/4",children:"Bulan (Tahun)"}),s.jsxs("div",{className:"w-3/4",children:[": ",i.month," (",i.study_year,")"]})]}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"w-1/4",children:"Total"}),s.jsxs("div",{className:"w-3/4",children:[": IDR. ",r(i.value)]})]})]}),s.jsxs("table",{className:"mt-5 w-full table text-sm",children:[s.jsx("thead",{className:"text-base text-gray-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-start",children:"Kategori"}),s.jsx("th",{className:"text-end",children:"Jam/Hari"}),s.jsx("th",{className:"text-end",children:"Nilai"}),s.jsx("th",{className:"text-end",children:"Jumlah"})]})}),s.jsxs("tbody",{children:[p.map(e=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-start",children:e.name}),s.jsx("td",{className:"text-end",children:e.unit?`${e.qty} ${e.unit}`:""}),s.jsx("td",{className:"text-end",children:`IDR. ${e.qty>0?r(e.total/e.qty):0}`}),s.jsx("td",{className:"text-end",children:`IDR. ${r(e.total)}`})]},e.id)),o.length>0&&s.jsx("tr",{children:s.jsx("th",{className:"text-start text-red-500",colSpan:4,children:"Potongan:"})}),o.map(e=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-start",children:e.name}),s.jsx("td",{className:"text-end",children:e.unit?`${e.qty} ${e.unit}`:""}),s.jsx("td",{className:"text-end",children:`IDR. ${e.qty>0?r(e.total/e.qty):0}`}),s.jsx("td",{className:"text-end",children:`IDR. ${r(e.total)}`})]},e.id))]}),s.jsx("tfoot",{className:"text-base text-gray-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-start",colSpan:3,children:"Total"}),s.jsxs("th",{className:"text-end",children:["IDR. ",r(i.details.reduce((e,d)=>e+d.value,0))]})]})})]}),s.jsx("div",{className:"mt-20 w-full hidden justify-end print:flex",children:s.jsxs("div",{className:"",children:[s.jsxs("div",{children:[a.address,", ",N().locale("id").format("DD MMMM YYYY")," "]}),s.jsx("div",{className:"uppercase font-bold mt-20",children:x.name})]})})]})})]})})]})}g.layout=a=>s.jsx(Y,{header:s.jsx(k,{children:"Rincian Gaji Bulanan Staf"}),children:a,user:a.props.auth.user,organization:a.props.organization,title:"Rincian Gaji Bulanan Staf",backLink:s.jsx(h,{href:route("cashflow.staff-salary-payment.show",{organization:a.props.organization.id,id:a.props.payment.id}),children:s.jsx(q,{})}),breadcrumbs:s.jsx("div",{className:"text-sm breadcrumbs",children:s.jsxs("ul",{children:[s.jsx("li",{className:"font-bold",children:s.jsx(h,{href:route("cashflow.staff-salary-payment",a.props.organization.id),children:"Arus Kas"})}),s.jsx("li",{className:"font-bold",children:s.jsx(h,{href:route("cashflow.staff-salary-payment",a.props.organization.id),children:"Gaji Bulanan"})}),s.jsx("li",{className:"font-bold",children:s.jsx(h,{href:route("cashflow.staff-salary-payment.show",{organization:a.props.organization.id,id:a.props.payment.id}),children:"Rincian Pembayaran Gaji Bulanan"})}),s.jsx("li",{children:"Rincian Gaji Bulanan Staf"})]})}),role:a.props.role});export{g as default};
