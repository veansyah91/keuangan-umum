import{W as k,r as A,j as s,Y as y,a as o}from"./app-f7a09652.js";import{A as S}from"./AuthenticatedLayout-c244f9ed.js";import{H as T}from"./Header-693ecab8.js";import{c as O}from"./index.esm-d266f787.js";import{k as P,Q as i}from"./react-toastify.esm-3b93a9f9.js";import{P as C}from"./PrimaryButton-02d903bc.js";import{M as I}from"./Modal-33ff5a47.js";import{S as E}from"./SecondaryButton-54b37b1d.js";import{N as D}from"./react-number-format.es-0576c33a.js";import{T as _}from"./TextInput-9daff345.js";import{I as W}from"./InputLabel-dcaa09a0.js";import{b as $,c as x}from"./index.esm-499869ea.js";import"./ApplicationLogo-bd8fcc84.js";import"./iconBase-e8876c39.js";import"./transition-2fb3bce8.js";/* empty css                      */import"./dayjs.min-d811e899.js";import"./portal-a488097d.js";import"./close-provider-2e8d3748.js";function B({setShowAddData:e}){return s.jsxs("div",{className:"mx-auto text-center py-5 space-y-3",children:[s.jsx("div",{children:"Belum tertaut dengan WhatsApp"}),s.jsx("button",{className:"my-auto mx-auto bg-green-700 text-xl py-3 px-2 rounded-lg text-white font-bold",onClick:e,children:"Tautkan WhatsApp"})]})}function H({status:e,handleShowAddDataModal:d,processing:l,handleCheckConnection:c}){return s.jsx("div",{className:"w-full flex pt-5 gap-2",children:s.jsxs("div",{className:"md:w-5/12 w-full space-y-3",children:[s.jsxs("div",{className:"md:flex gap-2",children:[s.jsxs("div",{className:"md:w-4/12 font-bold",children:["No. Handphone ",s.jsx("span",{className:"md:hidden",children:":"})," "]}),s.jsx("div",{className:"md:block hidden w-1/12 text-end",children:":"}),s.jsxs("div",{className:"w-7/12 flex gap-2",children:[s.jsx("div",{children:e.phone}),s.jsx("div",{children:s.jsx("button",{className:"text-gray-500 text-sm",onClick:d,children:s.jsx($,{})})})]})]}),s.jsxs("div",{className:"md:flex gap-2",children:[s.jsxs("div",{className:"md:w-4/12 w-full font-bold",children:["Tanggal Kadaluarsa ",s.jsx("span",{className:"md:hidden",children:":"})]}),s.jsx("div",{className:"md:block hidden w-1/12 text-end",children:":"}),s.jsx("div",{className:"w-7/12",children:e.expired_date??"-"})]}),s.jsxs("div",{className:"md:flex gap-2",children:[s.jsxs("div",{className:"md:w-4/12 font-bold",children:["Status ",s.jsx("span",{className:"md:hidden",children:":"})]}),s.jsx("div",{className:"hidden md:block w-1/12 text-end",children:":"}),s.jsx("div",{className:"w-7/12 font-bold space-x-5",children:s.jsx("span",{className:e.is_active?"text-green-500":"text-red-500",children:e.is_active?"Aktif":"Tidak Aktif"})})]}),s.jsxs("div",{className:"md:flex gap-2",children:[s.jsxs("div",{className:"md:w-4/12 w-full font-bold",children:["Koneksi Terakhir ",s.jsx("span",{className:"md:hidden",children:":"})]}),s.jsx("div",{className:"md:block hidden w-1/12 text-end",children:":"}),s.jsx("div",{className:"w-7/12",children:e.last_connection??"-"})]}),s.jsxs("div",{className:"md:flex gap-2",children:[s.jsxs("div",{className:"md:w-4/12 w-full font-bold",children:["Koneksi ",s.jsx("span",{className:"md:hidden",children:":"})]}),s.jsx("div",{className:"hidden md:block md:w-1/12 text-end",children:":"}),s.jsxs("div",{className:"md:w-7/12 w-full my-auto flex gap-5",children:[e.connection?s.jsxs("div",{className:"my-auto text-green-500 flex gap-2",children:[s.jsx("div",{className:"my-auto",children:s.jsx(x,{})})," ",s.jsx("div",{children:"connected"})]}):s.jsxs("div",{className:"my-auto text-red-500 flex gap-2",children:[s.jsx("div",{className:"my-auto",children:s.jsx(x,{})})," ",s.jsx("div",{children:"disconnected"})]}),s.jsx("div",{className:"w-full",children:s.jsx("button",{className:"border py-1 px-2 rounded-md",onClick:c,disabled:l,children:l?s.jsx("span",{className:"loading loading-dots loading-xs"}):s.jsx("span",{children:"Cek Koneksi"})})})]})]})]})})}function R({status:e,organization:d}){const l="6287839542505",c="https://web.whatsapp.com/send",{data:r,setData:p,patch:m,processing:h}=k({phone:e?e.phone:""}),[u,t]=A.useState(!1),j=a=>{p("phone",a.value)},N=()=>{t(!0)},f=a=>{a.preventDefault(),m(route("add-ons.whatsapp.status.update",{organization:d.id}),{onSuccess:({props:n})=>{const{flash:v}=n;i.success(v.success,{position:i.POSITION.TOP_CENTER}),t(!1)},onError:n=>{i.error(n.phone,{position:i.POSITION.TOP_CENTER})}})},w=()=>{let a=`
			*KONFIRMASI PERUBAHAN NOMOR HANDPHONE*
			 %0A-------------------------------------------------------%0A
			 _*Detail Organisasi*_
			 %0AID : ${d.id}
			 %0ANama : ${d.name}
			 %0ANo. HP : ${r.phone}
		`,n=`${c}?phone=${l}&text=${a}`;window.open(n,"_blank")},b=()=>{let a=`
			*KONEKSI TERPUTUS*
			 %0A-------------------------------------------------------%0A
			 _*Detail Organisasi*_
			 %0AID : ${d.id}
			 %0ANama : ${d.name}
			 %0ANo. HP : ${r.phone}
		`,n=`${c}?phone=${l}&text=${a}`;window.open(n,"_blank")},g=()=>{m(route("add-ons.whatsapp.status.check-connection",{organization:d.id}),{onSuccess:({props:a})=>{const{flash:n}=a;n!=null&&n.success&&i.success(n.success,{position:i.POSITION.TOP_CENTER})},onError:a=>{a!=null&&a.error&&i.error(a.error,{position:i.POSITION.TOP_CENTER})}})};return s.jsxs(s.Fragment,{children:[s.jsx(y,{title:"Status WhatsApp Broadcast"}),s.jsx(P,{}),s.jsx("div",{className:"w-full sm:mt-2",children:s.jsx("div",{className:"sm:mx-auto px-3 sm:px-5 bg-white py-2 sm:pt-0 space-y-5 md:space-y-0",children:s.jsxs("div",{className:"sm:pt-0 pb-16 pt-12",children:[s.jsxs("div",{className:"bg-white py-2 px-2 sm:pt-0",children:[!e&&s.jsx(B,{setShowAddData:N}),e&&s.jsx(H,{status:e,handleShowAddDataModal:()=>t(!0),processing:h,handleCheckConnection:g})]}),s.jsxs("div",{className:"bg-white py-2 px-2 sm:pt-0 mt-10",children:[s.jsx("h2",{className:"font-bold underline",children:"Disclaimer"}),s.jsx("div",{children:s.jsx("table",{children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"w-[25px]",children:"•"}),s.jsx("td",{children:"Whatsapp Broadcasting Plugin dari keuanganumum.com adalah unofficial atau tidak terafiliasi dengan WhatsApp"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"w-[25px]",children:"•"}),s.jsxs("td",{children:["Whatsapp Broadcasting Plugin dari keuanganumum.com mengirimkan pesan secara ",s.jsx("span",{className:"italic",children:"asynchronous"})," untuk menghindari blokir dari WhatsApp"]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"w-[25px]",children:"•"}),s.jsx("td",{children:"Daftarkan nomor handphone yang sudah dipakai lama, hindari penggunakan nomor handphone yang baru diregistrasi"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"w-[25px]",children:"•"}),s.jsx("td",{children:"Kami menyarankan menautkan nomor handphone yang telah diregistrasikan pada WhatsApp Business"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"w-[25px]",children:"•"}),s.jsxs("td",{children:["Apabila terjadi perubahan nomor handphone, hubungi ",s.jsx("button",{onClick:w,className:"text-green-600 font-bold",children:"Admin 0878396542505"})]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"w-[25px]",children:"•"}),s.jsxs("td",{children:["Apabila koneksi terputus, hubungi ",s.jsx("button",{onClick:b,className:"text-green-600 font-bold",children:"Admin 0878396542505"})]})]})]})})})]})]})})}),s.jsx(I,{show:u,onClose:()=>t(!1),children:s.jsxs("form",{onSubmit:f,className:"p-6",id:"deleteForm",name:"deleteForm",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 text-center",children:e?"Ubah No HP Tautan WhatsApp":"Tautkan WhatsApp"}),s.jsx("div",{className:"mt-6 ",children:s.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-1",children:[s.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:s.jsx(W,{value:"No. Handphone",htmlFor:"phone"})}),s.jsx("div",{className:"w-full sm:w-2/3",children:s.jsx(D,{value:r.phone,customInput:_,onValueChange:a=>j(a),thousandSeparator:!1,className:"text-start w-full border",placeholder:"628xxx",prefix:""})})]})}),s.jsxs("div",{className:"mt-6 flex justify-end",children:[s.jsx(E,{onClick:()=>t(!1),children:"Batal"}),s.jsx(C,{className:"ms-3",disabled:h,children:e?"Ubah":"Tautkan"})]})]})})]})}R.layout=e=>s.jsx(S,{header:s.jsx(T,{children:"Status"}),children:e,user:e.props.auth.user,organization:e.props.organization,title:"Status",backLink:s.jsx(o,{href:route("add-ons.whatsapp",e.props.organization.id),children:s.jsx(O,{})}),breadcrumbs:s.jsx("div",{className:"text-sm breadcrumbs",children:s.jsxs("ul",{children:[s.jsx("li",{className:"font-bold",children:s.jsx(o,{href:route("add-ons",e.props.organization.id),children:"Add-ons"})}),s.jsx("li",{className:"font-bold",children:s.jsx(o,{href:route("add-ons.whatsapp",e.props.organization.id),children:"WhatsApp Broadcast"})}),s.jsx("li",{children:"Status"})]})}),role:e.props.role});export{R as default};
