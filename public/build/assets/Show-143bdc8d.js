import{q as B,r as o,W as C,y as _,j as e,Y as E,a as r}from"./app-60093d8b.js";import{A as O}from"./AuthenticatedLayout-f4603aa5.js";import{H as M}from"./Header-fccd1917.js";import{Q as c,k as A}from"./react-toastify.esm-43511348.js";/* empty css                      */import{I as u,a as m,b as R,c as z}from"./index.esm-53cbca2f.js";import{G as F}from"./iconBase-bb6eae91.js";import{A as H}from"./AddButtonMobile-285c64a9.js";import{M as L}from"./Modal-0ea8f24a.js";import{S as G}from"./SecondaryButton-a2ff8619.js";import{P as W}from"./PrimaryButton-bffcd700.js";import{u as $,o as q}from"./index.module-dbb0b5e9.js";import{C as J}from"./ContainerDesktop-99c6f4c3.js";import{C as K,T as Q,a as V}from"./ContentDesktop-48089c34.js";import{T as Y,P as U}from"./TitleMobile-471fc2f0.js";import{D as X}from"./DangerButton-179850f6.js";import Z from"./StudentMonthlyReceivableDetailMobile-f2da5b8f.js";import ee from"./StudentMonthlyReceivableDetailDesktop-63f355f2.js";import"./ApplicationLogo-07518b23.js";import"./transition-69a0c110.js";import"./dayjs.min-af66fe14.js";import"./keyboard-8f7a194a.js";import"./formatNumber-b542c689.js";import"./BadgeDanger-411ae170.js";import"./BadgeSuccess-a4da988e.js";function ae(s){return F({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 6 2 18 2 18 9"}},{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8"}}]})(s)}function se({role:s,organization:n,receivables:a,searchFilter:g,receivable:d}){const{errors:x}=B().props;o.useState(!1);const[y,h]=o.useState(!1),[l,p]=o.useState(g||""),[N,b]=o.useState(""),{data:j,setData:w,delete:v,processing:S,reset:P}=C({id:null,receivable_id:null}),k=$(l),[D]=q(l,500);o.useEffect(()=>{k!==void 0&&I()},[D]),o.useEffect(()=>{x&&c.error(x.message,{position:c.POSITION.TOP_CENTER})},[]);const I=()=>{_.reload({only:["receivables"],data:{search:l}})},f=t=>{b(`Hapus Piutang ${t.no_ref}`),h(!0),w({id:t.id,receivable:t.receivable_id})},T=t=>{t.preventDefault(),v(route("cashflow.student-monthly-receivable.delete",{organization:n.id,receivable:j.receivable,ledger:j.id}),{onSuccess:()=>{h(!1),c.success("Piutang Berhasil Dihapus",{position:c.POSITION.TOP_CENTER}),P()},onError:i=>{h(!1),c.error(i.message,{position:c.POSITION.TOP_CENTER})}})};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Piutang Iuran Siswa"}),e.jsx(A,{}),s!=="viewer"&&e.jsx(r,{href:route("cashflow.student-monthly-receivable.create",n.id),children:e.jsx(H,{label:"Tambah"})}),e.jsx(Y,{zIndex:"z-50",search:l,setSearch:t=>p(t.target.value),pageBefore:a.links[0].url?e.jsx(r,{href:route("cashflow.student-monthly-receivable.show",{organization:n.id,receivable:d.id,page:a.current_page-1,search:l}),preserveState:!0,only:["receivables"],children:e.jsx(u,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(u,{})}),pageAfter:a.links[a.links.length-1].url?e.jsx(r,{href:route("cashflow.student-monthly-receivable.show",{organization:n.id,receivable:d.id,page:a.current_page+1,search:l}),only:["receivables"],preserveState:!0,children:e.jsx(m,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(m,{})}),page:e.jsxs(e.Fragment,{children:[a.current_page,"/",a.last_page]}),data:a}),e.jsx(K,{children:a.data.map((t,i)=>e.jsx(Z,{receivable:t,handleDelete:()=>f(t),role:s},i))}),e.jsxs(J,{children:[e.jsxs(Q,{children:[e.jsx("div",{className:"my-auto w-7/12",children:s!=="viewer"&&e.jsx("div",{className:"space-x-2",children:e.jsx(r,{href:route("cashflow.student-monthly-receivable.create",n.id),children:e.jsx(W,{className:"py-3",children:"Tambah Data"})})})}),e.jsx("div",{className:"my-auto w-4/12 flex gap-5 justify-end",children:e.jsx(r,{className:"py-3 px-3 border rounded-lg h-full",href:route("cashflow.student-monthly-receivable.print",{organization:n.id,receivable:d.id}),children:e.jsx(ae,{})})}),e.jsxs("div",{className:"w-3/12 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(R,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari No Ref",className:"w-full border-none focus:outline-none focus:ring-0",value:l||"",onChange:t=>p(t.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(U,{data:a})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:a.links[0].url?e.jsx(r,{href:route("cashflow.student-monthly-receivable.show",{organization:n.id,receivable:d.id,page:a.current_page-1,search:l}),preserveState:!0,only:["receivables"],children:e.jsx(u,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(u,{})})}),e.jsxs("div",{className:"my-auto",children:[a.current_page,"/",a.last_page]}),e.jsx("div",{className:"my-auto",children:a.links[a.links.length-1].url?e.jsx(r,{href:route("cashflow.student-monthly-receivable.show",{organization:n.id,receivable:d.id,page:a.current_page+1,search:l}),only:["receivables"],preserveState:!0,children:e.jsx(m,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(m,{})})})]})]}),e.jsx("div",{className:"sm:flex hidden gap-5",children:e.jsx("div",{className:"w-full",children:e.jsx(V,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"No Ref"}),e.jsx("th",{className:"bg-gray-200",children:"Tanggal Input"}),e.jsx("th",{className:"bg-gray-200",children:"Bulan"}),e.jsx("th",{className:"bg-gray-200",children:"Tahun Ajaran"}),e.jsx("th",{className:"bg-gray-200 text-end",children:"Jumlah"}),e.jsx("th",{className:"bg-gray-200",children:"Status"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:a.data.map((t,i)=>e.jsx(ee,{receivable:t,className:`${i%2==0&&"bg-gray-100"}`,handleDelete:()=>f(t),role:s},i))})]})})})})]}),e.jsx(L,{show:y,onClose:()=>h(!1),children:e.jsxs("form",{onSubmit:T,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 text-center",children:N}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(G,{onClick:()=>h(!1),children:"Batal"}),e.jsx(X,{className:"ms-3",disabled:S,children:"Hapus"})]})]})})]})}se.layout=s=>e.jsx(O,{header:e.jsxs(M,{children:["Piutang Iuran Bulanan Siswa ",s.props.contact.name]}),children:s,user:s.props.auth.user,organization:s.props.organization,title:"Piutang Iuran Bulanan",backLink:e.jsx(r,{href:route("cashflow.student-monthly-receivable",s.props.organization.id),children:e.jsx(z,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(r,{href:route("cashflow",s.props.organization.id),children:"Arus Kas"})}),e.jsx("li",{className:"font-bold",children:e.jsx(r,{href:route("cashflow.student-monthly-receivable",s.props.organization.id),children:"Piutang Iuran Bulanan Siswa"})}),e.jsx("li",{children:"Detail Piutang Iuran Bulanan Siswa"})]})}),role:s.props.role});export{se as default};
