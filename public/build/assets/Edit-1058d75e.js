import{m as K,r as u,S as L,j as e,L as U,$ as j}from"./app-c3de5fa6.js";import{D as Q,A as q}from"./AuthenticatedLayout-2f82e08a.js";import{H as G}from"./Header-ee160182.js";import{k as J,Q as f}from"./react-toastify.esm-94b2ee7c.js";/* empty css                      */import{c as W}from"./index.esm-234976fb.js";import{F as X}from"./FormInput-94d371de.js";import{I as m}from"./InputLabel-60badb3d.js";import{T as x}from"./TextInput-ebb8b1c3.js";import{S as Z}from"./SecondaryButton-fcf7be1a.js";import{P as A}from"./PrimaryButton-02cc0a94.js";import{N as v}from"./react-number-format.es-5f43fc17.js";import{C as _}from"./ClientSelectInput-8df18255.js";import{a as ee,u as ae}from"./index.module-1bc829eb.js";import{d as h}from"./dayjs.min-c211a108.js";import"./ApplicationLogo-33e039c9.js";import"./iconBase-23c1fa9a.js";import"./transition-294d1a88.js";import"./combobox-41255761.js";import"./portal-97852d2d.js";const p=(i,t,n)=>t>0?Math.ceil((i-n)/t):0;function se({organization:i,fixedAsset:t,fixedAssetCategory:n,newRef:te,date:le,accounts:g,fixedAssetCategories:b,creditAccount:o}){var w,N;const{data:l,setData:c,processing:D,patch:S,errors:a,setError:ie,reset:de}=K({lifetime:"",name:"",code:"",residue:"",value:"",date:"",fixed_asset_category:"",credit_account:{id:null,is_cash:!1,code:""},depreciation_value:"",depreciation_accumulated:"",status:!0}),[r,T]=u.useState({startDate:t.date,endDate:t.date}),[C]=ee(r,500),F=ae(r),[I,E]=u.useState({id:n.id,name:n.name,lifetime:n.lifetime}),[H,R]=u.useState({id:o.id,name:o.name,code:o.code,is_cash:o.is_cash});u.useEffect(()=>{c({lifetime:t.lifetime,name:t.name,code:t.code,residue:t.residue,value:t.value,date:t.date,fixed_asset_category:t.fixed_asset_category_id,credit_account:{id:o.id,is_cash:o.is_cash,code:o.code},depreciation_value:t.depreciation_value,depreciation_accumulated:t.depreciation_accumulated,status:t.status})},[]),u.useEffect(()=>{if(F!==void 0&&r.startDate){let s=h(r.startDate),d=`${s.month()+1}-${s.year()}`,y=h(t.date),z=`${y.month()+1}-${y.year()}`;d!==z?Y():c("code",t.code)}},[C]);const Y=()=>{L.reload({only:["newRef"],data:{date:h(r.startDate).format("YYYY-MM-DD")},onSuccess:s=>{c("code",s.props.newRef)}})},V=s=>{T(s),c("date",h(s.startDate).format("YYYY-MM-DD"))},M=s=>{const{floatValue:d}=s;c({...l,value:d,depreciation_value:p(d,l.lifetime,l.residue)})},P=s=>{const{floatValue:d}=s;c({...l,residue:d,depreciation_value:p(l.value,l.lifetime,d)})},k=s=>{const{floatValue:d}=s;c({...l,lifetime:d,depreciation_value:p(l.value,d,l.residue)})},O=s=>{E(s),c({...l,lifetime:s.lifetime,fixed_asset_category:s.id,depreciation_value:p(l.value,s.lifetime,l.residue)})},$=s=>{R(s),c({...l,credit_account:{id:s.id,is_cash:s.is_cash,code:s.code}})},B=s=>{s.preventDefault(),S(route("data-master.fixed-asset.update",{organization:i.id,fixedAsset:t.id}),{onSuccess:()=>{f.success("Harta Tetap Berhasil Diubah",{position:f.POSITION.TOP_CENTER})},onError:d=>{f.error(d.date,{position:f.POSITION.TOP_CENTER})},preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Tambah Harta Tetap"}),e.jsx(J,{}),e.jsx(X,{onSubmit:B,children:e.jsx("div",{className:"w-full sm:mt-2 sm:py-5",children:e.jsxs("div",{className:"sm:w-1/2 sm:mx-auto px-3 sm:px-0 space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Tanggal Perolehan",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(Q,{value:r,onChange:V,useRange:!1,asSingle:!0,placeholder:"Tanggal",id:"date",displayFormat:"MMMM DD, YYYY"}),(a==null?void 0:a.date)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.date})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Kode",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(x,{id:"code",name:"code",className:`w-full ${(a==null?void 0:a.code)&&"border-red-500"}`,placeholder:"Kode",value:l.code,onChange:s=>c("code",s.target.value.toUpperCase())}),(a==null?void 0:a.code)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.code})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Kategori Harta Tetap",htmlFor:"category",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(_,{resources:b,selected:I,setSelected:s=>O(s),maxHeight:"max-h-40",placeholder:"Cari Kategori Harta Tetap",id:"category",isError:!!(a!=null&&a.fixed_asset_category),isFocused:!0}),(a==null?void 0:a.fixed_asset_category)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.fixed_asset_category})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Usia Pakai (Bulan)",htmlFor:"lifetime",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(v,{value:l.lifetime,customInput:x,onValueChange:s=>k(s),thousandSeparator:!0,className:"text-end w-full border",id:"lifetime"}),(a==null?void 0:a.lifetime)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.lifetime})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Nama",htmlFor:"name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(x,{id:"name",name:"name",className:`w-full ${(a==null?void 0:a.name)&&"border-red-500"}`,placeholder:"Nama",value:l.name,onChange:s=>c("name",s.target.value.toUpperCase())}),(a==null?void 0:a.name)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.name})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Nilai Perolehan",htmlFor:"value",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(v,{value:l.value,customInput:x,onValueChange:s=>M(s),thousandSeparator:!0,className:"text-end w-full border",prefix:"IDR ",id:"value"}),(a==null?void 0:a.value)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.value})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Residu",htmlFor:"residue",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(v,{value:l.residue,customInput:x,onValueChange:s=>P(s),thousandSeparator:!0,className:"text-end w-full border",prefix:"IDR ",id:"residue"}),(a==null?void 0:a.residue)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.residue})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(m,{value:"Akun Kredit",htmlFor:"credit_account_id",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(_,{resources:g,selected:H,setSelected:s=>$(s),maxHeight:"max-h-40",placeholder:"Cari Akun",id:"credit_account_id",isError:!!((w=a==null?void 0:a.credit_account)!=null&&w.id)}),((N=a==null?void 0:a.credit_account)==null?void 0:N.id)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.credit_account.id})]})]}),e.jsxs("div",{className:"flex justify-end flex-col-reverse sm:flex-row gap-2 mt-5",children:[e.jsx("div",{className:"w-full sm:w-1/6 my-auto text-center",children:e.jsx(j,{href:route("data-master.fixed-asset",i.id),children:e.jsx(Z,{className:"w-full",children:e.jsx("div",{className:"text-center w-full",children:"Batal"})})})}),e.jsx("div",{className:"w-full sm:w-1/6 text-center",children:e.jsx(A,{className:"w-full",disabled:D,children:e.jsx("div",{className:"text-center w-full",children:"Ubah"})})})]})]})})})]})}se.layout=i=>e.jsx(q,{header:e.jsx(G,{children:"Tambah Harta Tetap"}),children:i,user:i.props.auth.user,organization:i.props.organization,title:"Tambah Harta Tetap",backLink:e.jsx(j,{href:route("data-master.fixed-asset",i.props.organization.id),children:e.jsx(W,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(j,{href:route("data-master",i.props.organization.id),children:"Data Master"})}),e.jsx("li",{className:"font-bold",children:e.jsx(j,{href:route("data-master.fixed-asset",i.props.organization.id),children:"Harta Tetap"})}),e.jsx("li",{children:"Tambah Harta Tetap"})]})}),role:i.props.role});export{se as default};
