import{r as p,W as _,j as e,Y as S,a as v}from"./app-cbf17b2f.js";import{d as I,h as T}from"./index.esm-2100d3a1.js";import{T as x}from"./TextInput-2f89430c.js";import{P as N}from"./PrimaryButton-94d3e012.js";import{H as A}from"./Header-00f70671.js";import{G as B}from"./index.esm-e49b0e8d.js";import{f as b}from"./formatNumber-b542c689.js";import{M as C}from"./Modal-4d9e2331.js";import{I as h}from"./InputLabel-c23942c9.js";import{S as E}from"./SuccessButton-afe8c688.js";import{S as M}from"./SecondaryButton-6ebfe1f6.js";import{N as P}from"./react-number-format.es-a16efb3b.js";import{k as R,Q as i}from"./react-toastify.esm-9bf723f3.js";/* empty css                      */import{d as D}from"./dayjs.min-0b56d0db.js";import O from"./AffiliationWithdrawMobile-fca816fc.js";import{B as F}from"./BadgeSuccess-d805e488.js";import{B as Y}from"./BadgeWarning-48583937.js";import{d as $}from"./index.esm-1f0a2809.js";import"./iconBase-e5b65cfa.js";import"./portal-0df7910e.js";import"./transition-81061bb8.js";import"./close-provider-764fbaad.js";function me({auth:c,affiliation:l,affiliationWithdraws:u}){const[f,d]=p.useState(!1),{data:m,setData:t,patch:g,errors:a,setError:o,processing:w}=_({value:l.balance||0,bank_account:l.bank_account||"",bank_name:l.bank_name||""});p.useLayoutEffect(()=>{const s=window.screen.height;document.getElementById("content-desktop").style.height=`${s-374}px`,document.getElementById("content-mobile").style.height=`${s-374}px`},[]);const j=()=>{d(!0),o({value:"",bank_account:"",bank_name:""}),t({value:l.balance||0,bank_account:l.bank_account||"",bank_name:l.bank_name||""})},k=s=>{const{value:n}=s;if(t("value",n),n>l.balance){o("value","Saldo Tidak Cukup");return}o("value","")},y=s=>{s.preventDefault(),g(route("affiliation.patch",l.id),{onSuccess:n=>{const{flash:r}=n.props;i.success(r.success,{position:i.POSITION.TOP_CENTER}),d(!1)},onError:n=>{const{status:r}=n;r&&i.error(r,{position:i.POSITION.TOP_CENTER})}})};return e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Afiliasi"}),e.jsx(R,{}),e.jsx("div",{className:"bg-gray-100 min-h-screen",children:e.jsxs("div",{className:"bg-white mx-auto sm:px-6 lg:px-8 max-w-4xl",children:[e.jsx("div",{className:"text-sm breadcrumbs px-4 py-4",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(v,{href:route("organization"),children:"Daftar Organisasi"})}),e.jsx("li",{children:"Afiliasi"})]})}),e.jsx(A,{children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-t-lg",children:e.jsxs("div",{className:"sm:p-6 px-6 py-3 text-gray-800 flex-none sm:flex",children:[e.jsxs("div",{className:"sm:hidden text-gray-800 flex flex-col-reverse gap-5",children:[e.jsx("div",{className:"my-auto",children:"Afiliasi"}),e.jsx("div",{className:"flex flex-row-reverse text-end",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 text-sm",children:c.user.name}),e.jsx("div",{className:" text-xs text-green-400",children:c.user.email})]})})]}),e.jsx("div",{className:"sm:flex-1 my-auto sm:block hidden",children:"Afiliasi"}),e.jsx("div",{className:"sm:flex-1 sm:block hidden text-end text-gray-800",children:e.jsx("div",{className:"flex flex-row-reverse",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:c.user.name}),e.jsx("div",{className:" text-sm text-green-400",children:c.user.email})]})})})]})})}),e.jsxs("div",{className:"py-3 px-6 text-gray-900 flex-none sm:flex sm:flex-row-reserve sm:gap-2 sm:justify-between space-y-5 sm:space-y-0",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2 ",children:[e.jsxs("div",{className:"my-auto",children:[e.jsx($,{})," "]}),e.jsxs("div",{className:"my-auto",children:["Kode Anda: ",e.jsx("span",{className:"font-bold",children:l.no_ref})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"my-auto",children:[e.jsx(B,{})," "]}),e.jsxs("div",{className:"my-auto",children:["Saldo Anda:"," ",e.jsxs("span",{className:"font-bold text-lg text-green-500",children:["Rp. ",b(l.balance)]})]})]})]}),l.balance>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"sm:block hidden",children:e.jsx(N,{className:"w-full",onClick:()=>j(),children:e.jsx("div",{className:"w-full",children:"Ajukan Penarikan"})})}),e.jsx(N,{className:"w-full sm:hidden block",onClick:()=>j(),children:e.jsx("div",{className:"w-full",children:"Ajukan Penarikan"})})]})]}),e.jsx("div",{className:"mt-5 px-4 font-bold",children:e.jsx("h4",{children:"Riwayat Penarikan Saldo"})}),e.jsx("div",{className:"sm:hidden overflow-auto",id:"content-mobile",children:u.map(s=>e.jsx(O,{affiliationWithdraw:s},s.id))}),e.jsxs("div",{className:"hidden sm:block mt-5",id:"content-desktop",children:[e.jsxs("div",{className:"flex gap-5 font-bold border-b-2 pb-2 border-gray-500",children:[e.jsx("div",{className:"w-3/12 text-start",children:"Tanggal"}),e.jsx("div",{className:"w-2/12 text-start",children:"No Ref"}),e.jsx("div",{className:"w-3/12 text-end",children:"Nilai Pengajuan"}),e.jsx("div",{className:"w-2/12 text-start",children:"Status"}),e.jsx("div",{className:"w-2/12 text-end"})]}),e.jsx("div",{className:"z-20",children:u.map(s=>e.jsxs("div",{className:"flex gap-5 my-3",children:[e.jsx("div",{className:"w-3/12",children:D(s.created_at).format("MMM DD, YYYY")}),e.jsx("div",{className:"w-2/12",children:s.no_ref}),e.jsxs("div",{className:"w-3/12 text-end",children:["IDR. ",b(s.value)]}),e.jsx("div",{className:"w-2/12",children:s.status>0?e.jsx(F,{children:"Sukses"}):e.jsx(Y,{children:"Mengunggu"})}),e.jsx("div",{className:"w-2/12",children:e.jsxs("div",{className:"dropdown dropdown-left my-auto",children:[e.jsx("div",{tabIndex:0,role:"button",className:"bg-inherit border-none hover:bg-gray-100 -z-50 text-gray-300'",children:e.jsx(I,{})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-[50] menu p-2 shadow bg-base-100 rounded-box w-56",children:e.jsx("li",{children:e.jsxs(v,{href:route("affiliationWithdraw.detail",s.id),children:[e.jsx(T,{})," Detail / Tanda Terima"]})})})]})})]},s.id))})]})]})}),e.jsx(C,{show:f,onClose:()=>d(!1),children:e.jsxs("form",{onSubmit:y,children:[e.jsx("div",{className:"p-5",children:e.jsx("h2",{className:"font-bold text-xl",children:"Ajukan Penarikan Saldo"})}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(h,{value:"Jumlah Penarikan",htmlFor:"value",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(P,{value:m.value,customInput:x,onValueChange:s=>k(s),thousandSeparator:!0,className:`text-end w-full border ${(a==null?void 0:a.value)&&"border-red-500"}`,prefix:"IDR "}),(a==null?void 0:a.value)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.value})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(h,{value:"No Rekening",htmlFor:"bank_account",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(x,{id:"bank_account",name:"bank_account",className:`w-full ${(a==null?void 0:a.bank_account)&&"border-red-500"}`,placeholder:"No Rekening",value:m.bank_account,onChange:s=>t("bank_account",s.target.value)}),(a==null?void 0:a.bank_account)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.bank_account})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-1",children:[e.jsx("div",{className:"w-full sm:w-1/3 my-auto",children:e.jsx(h,{value:"Nama Bank",htmlFor:"bank_name",className:" mx-auto my-auto"})}),e.jsxs("div",{className:"w-full sm:w-2/3",children:[e.jsx(x,{id:"bank_name",name:"bank_name",className:`w-full ${(a==null?void 0:a.bank_name)&&"border-red-500"}`,placeholder:"Nama Bank",value:m.bank_name,onChange:s=>t("bank_name",s.target.value.toUpperCase())}),(a==null?void 0:a.bank_name)&&e.jsx("span",{className:"text-red-500 text-xs",children:a.bank_name})]})]}),e.jsxs("div",{className:"text-end space-x-2",children:[e.jsx(M,{type:"button",onClick:()=>d(!1),children:"Batal"}),e.jsx(E,{disabled:w,children:"Ajukan"})]})]})]})})]})}export{me as default};
