import{r as n,j as e,Y as W,y as X,a as L}from"./app-61e58707.js";import{D as P,A as Z}from"./AuthenticatedLayout-4d39d6f2.js";import{H as z}from"./Header-7b25195a.js";import{p as ee,c as te}from"./index.esm-f345f17b.js";import{S as ae}from"./SecondaryButton-d3c9d62c.js";import{F}from"./index.esm-270716fb.js";import{P as se}from"./PrimaryButton-9b232afd.js";import{f as C}from"./formatNumber-b542c689.js";import D from"./CashflowContent-430dd0d3.js";import{d as u}from"./dayjs.min-493e051a.js";import{A as k}from"./disclosure-b2f48524.js";import{q as ne}from"./transition-95d25f91.js";import"./index.esm-a7ecb966.js";import"./iconBase-ea2c5aa0.js";/* empty css                      */import"./keyboard-6bdeaeaf.js";import"./use-resolve-button-type-9636a1f1.js";function re({organization:s,cashflows:x,startDateFilter:f,endDateFilter:h,startCashflow:Y}){const[j,K]=n.useState(x||[]),[i,E]=n.useState(f||""),[l,R]=n.useState(h||""),[r,B]=n.useState({accountCode:!1}),[v,T]=n.useState({add:0,reduce:0}),[g,O]=n.useState({add:0,reduce:0}),[y,V]=n.useState({add:0,reduce:0}),[d,M]=n.useState({before:Y.total||0,increase:0,after:0}),[$,q]=n.useState({startDate:f||"",endDate:f||""}),[H,U]=n.useState({startDate:h||"",endDate:h||""}),[N,w]=n.useState({financing:!1,operating:!1,investing:!1}),[_,o]=n.useState(!1);n.useEffect(()=>{S(x,Y)},[]);const S=(t,I)=>{let c={add:0,reduce:0},p={add:0,reduce:0},m={add:0,reduce:0},b=0;t.map(a=>{b+=parseInt(a.total),a.category=="operating"&&(w({...N,operating:!0}),parseInt(a.total)>0&&(c.add+=parseInt(a.total)),parseInt(a.total)<0&&(c.reduce+=parseInt(a.total))),a.category=="financing"&&(w({...N,financing:!0}),parseInt(a.total)>0&&(p.add+=parseInt(a.total)),parseInt(a.total)<0&&(p.reduce+=parseInt(a.total))),a.category=="investing"&&(w({...N,investing:!0}),parseInt(a.total)>0&&(m.add+=parseInt(a.total)),parseInt(a.total)<0&&(m.reduce+=parseInt(a.total)))}),T({add:c.add,reduce:c.reduce}),V({add:m.add,reduce:m.reduce}),O({add:p.add,reduce:p.reduce}),M({before:parseInt(I.total??0),increase:b,after:parseInt(I.total??0)+b})},A=()=>{window.print()},G=t=>{q(t),E(t.startDate)},J=t=>{U(t),R(t.endDate)},Q=()=>{X.reload({only:["cashflows","startCashflow"],data:{startDate:i,endDate:l},onBefore:t=>{t.completed?o(!1):o(!0)},onSuccess:t=>{K(t.props.cashflows),M({...d,before:t.props.startCashflow.total}),S(t.props.cashflows,t.props.startCashflow)},onError:t=>{console.log(t)},onFinish:t=>{t.completed?o(!1):o(!0)},preserveState:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(W,{title:`Laporan Arus Kas Periode : ${u(i).format("MMMM DD, YYYY")} - ${u(l).format("MMMM DD, YYYY")}`}),e.jsx("div",{className:"sm:pt-0 pb-16 pt-12",children:e.jsxs("div",{className:"bg-white py-2 sm:pt-0 px-5",children:[e.jsxs("div",{className:"flex sm:flex-row justify-between gap-2 print:hidden",children:[e.jsxs("div",{className:"px-3 my-auto flex gap-3",children:[e.jsx("div",{className:"my-auto",children:e.jsx(P,{value:$,onChange:G,useRange:!1,asSingle:!0,placeholder:"Tanggal Awal",id:"date",displayFormat:"MMMM DD, YYYY"})}),e.jsx("div",{className:"my-auto",children:e.jsx(P,{value:H,onChange:J,useRange:!1,asSingle:!0,placeholder:"Tanggal Akhir",id:"date",displayFormat:"MMMM DD, YYYY"})}),e.jsx("div",{className:"my-auto",children:e.jsx(se,{disabled:!i||!l||i>l||_,onClick:Q,children:"Filter"})})]}),e.jsx("div",{className:"text-end px-3 hidden sm:block",children:e.jsx(ae,{onClick:A,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"my-auto",children:e.jsx(F,{})}),e.jsx("div",{className:"my-auto",children:"Print"})]})})}),e.jsx("div",{className:"fixed sm:hidden bottom-2 right-2",children:e.jsx("button",{onClick:A,className:"bg-white border-2 border-slate-900 p-2 rounded-full h-14 w-14",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"my-auto mx-auto",children:e.jsx(F,{})})})})})]}),e.jsx(k,{as:"div",className:"mt-3 print:hidden",children:({open:t})=>e.jsxs(e.Fragment,{children:[e.jsx(ne,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:e.jsx(k.Panel,{children:e.jsx("div",{className:"flex flex-col sm:flex-row justify-start gap-3 sm:py-5 mb-3",children:e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer gap-2",htmlFor:"checkbox",children:[e.jsx("input",{type:"checkbox",className:"checkbox",id:"checkbox",value:r.accountCode,onChange:()=>B({...r.accountCode,accountCode:!r.accountCode}),checked:r.accountCode}),e.jsx("span",{className:"label-text",children:"Tampilkan Kode Akun"})]})})})})}),e.jsx(k.Button,{className:"flex w-full justify-between rounded-lg bg-slate-100 px-4 py-2 text-left text-sm font-medium text-slate-900 hover:bg-slate-200 focus:outline-none focus-visible:ring focus-visible:ring-slate-500/75",children:e.jsxs("div",{className:"flex justify-center w-full gap-3",children:[e.jsx("span",{children:"Tampilkan Lebih Banyak"}),e.jsx(ee,{className:`${t?"":"rotate-180 transform"} h-5 w-5 text-slate-500`})]})})]})}),e.jsxs("div",{className:"uppercase pt-9 pb-3 border-b hidden print:flex print:justify-between",children:[e.jsx("div",{className:"w-1/2 text-2xl my-auto",children:"Laporan arus kas"}),e.jsxs("div",{className:"w-1/2 text-end mt-auto",children:[e.jsx("div",{children:s.name}),e.jsx("div",{className:"text-xs",children:s.address}),e.jsxs("div",{className:"text-xs",children:[s.village,", ",s.district,", ",s.regency,", ",s.province]})]})]}),e.jsxs("div",{className:"w-full text-end italic mt-3 hidden print:block",children:["Periode : ",u(i).format("MMMM DD, YYYY")," - ",u(l).format("MMMM DD, YYYY")]}),e.jsx("div",{className:"my-2 space-y-3 mx-3 print:font-['Open_Sans'] overflow-auto",children:e.jsxs("div",{className:"sm:w-3/4 w-[550px] print:w-full",children:[v.add+v.reduce!==0&&e.jsx(D,{title:"Aktifitas Operasional",cashflows:j,amount:v,type:"operating",showCode:r.accountCode}),y.add+y.reduce!==0&&e.jsx(D,{title:"Aktifitas Investasi",cashflows:j,amount:y,type:"investing",showCode:r.accountCode}),g.add+g.reduce!==0&&e.jsx(D,{title:"Aktifitas Pendanaan",cashflows:j,amount:g,type:"financing",showCode:r.accountCode}),x.length>0&&e.jsxs("div",{className:"mt-5",children:[e.jsxs("div",{className:"flex w-full justify-between py-2 font-bold",children:[e.jsx("div",{className:"w-5/12 print:w-8/12 uppercase flex gap-2",children:"Kas Awal"}),e.jsxs("div",{className:"w-2/12 print:w-4/12 text-center flex justify-end gap-3",children:[e.jsx("div",{className:"w-1/4 print:w-2/4 text-end",children:"Rp. "}),e.jsx("div",{className:"w-3/4 print:w-2/4 text-end",children:C(d.before)})]})]}),e.jsxs("div",{className:"flex w-full justify-between py-2 font-bold",children:[e.jsx("div",{className:"w-5/12 print:w-8/12 uppercase flex gap-2",children:"Kenaikan / Penurunan Kas"}),e.jsxs("div",{className:"w-2/12 print:w-4/12 text-center flex justify-end gap-3",children:[e.jsx("div",{className:"w-1/4 print:w-2/4 text-end",children:"Rp. "}),e.jsx("div",{className:"w-3/4 print:w-2/4 text-end",children:C(d.increase)})]})]}),e.jsxs("div",{className:"flex w-full justify-between py-2 font-bold",children:[e.jsx("div",{className:"w-5/12 print:w-8/12 uppercase flex gap-2",children:"Kas Akhir"}),e.jsxs("div",{className:"w-2/12 print:w-4/12 text-center flex justify-end gap-3",children:[e.jsx("div",{className:"w-1/4 print:w-2/4 text-end",children:"Rp. "}),e.jsx("div",{className:"w-3/4 print:w-2/4 text-end",children:C(d.after)})]})]})]})]})})]})})]})}re.layout=s=>e.jsx(Z,{header:e.jsx(z,{children:"Laporan Arus Kas"}),children:s,user:s.props.auth.user,organization:s.props.organization,title:"Laporan Arus Kas",backLink:e.jsx(L,{href:route("report",s.props.organization.id),children:e.jsx(te,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(L,{href:route("report",s.props.organization.id),children:"Laporan"})}),e.jsx("li",{children:"Laporan Arus Kas"})]})}),role:s.props.role});export{re as default};
