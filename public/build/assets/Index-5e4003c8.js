import{K as W,r as d,m as F,j as e,$ as l,S as z,L as H}from"./app-e83142f3.js";import{A as K}from"./AuthenticatedLayout-9fce3876.js";import{H as L}from"./Header-62783548.js";import{Q as i,k as $}from"./react-toastify.esm-24c54db9.js";/* empty css                      */import{I as m,a as u,b as Q,c as V}from"./index.esm-b77cfcfa.js";import{A as q}from"./AddButtonMobile-5b41a6d8.js";import{M as g}from"./Modal-8147e6bd.js";import{S as N}from"./SecondaryButton-a19a00db.js";import{P as y}from"./PrimaryButton-8f455cec.js";import{u as G,a as J}from"./index.module-b9fb6ad6.js";import{C as U}from"./ContainerDesktop-c52dc2d4.js";import{T as X,a as Y,P as Z,C as ee}from"./ContentDesktop-2968678f.js";import{C as ae}from"./ContentMobile-61b7ae96.js";import{D as se}from"./DangerButton-fdcb9341.js";import te from"./StudentMonthlyReceivableMobile-98e79c98.js";import re from"./StudentMonthlyReceivableDesktop-7e322b3c.js";import{F as le}from"./index.esm-a604291f.js";import"./ApplicationLogo-b4a187c6.js";import"./iconBase-c9c81c8c.js";import"./transition-155365a3.js";import"./dayjs.min-55994c47.js";import"./portal-16ac43ea.js";import"./close-provider-3bd0d8d7.js";import"./formatNumber-b542c689.js";function ne({role:t,organization:r,receivables:a,searchFilter:b,whatsappPlugin:S}){const{errors:x}=W().props,[w,h]=d.useState(!1),[k,c]=d.useState(!1),[n,p]=d.useState(b||""),[v,I]=d.useState(""),{data:P,setData:T,delete:C,processing:j,reset:D,post:B}=F({id:0}),E=G(n),[M]=J(n,500);d.useEffect(()=>{E!==void 0&&O()},[M]),d.useEffect(()=>{x&&x.message&&i.error(e.jsxs(e.Fragment,{children:[x.message," ",e.jsx(l,{href:route("data-master.contact-category",{organization:r.id}),className:"text-blue-600 font-bold",children:"Tambahkan"})]}),{position:i.POSITION.TOP_CENTER})},[]);const O=()=>{z.reload({only:["receivables"],data:{search:n}})},f=s=>{I(`Hapus Siswa ${s.name}`),c(!0),T("id",s.id)},_=s=>{s.preventDefault(),B(route("cashflow.student-monthly-receivable.send-whatsapp-multi",{organization:r.id}),{onSuccess:({props:o})=>{h(!1);const{flash:R}=o;i.success(R.success,{position:i.POSITION.TOP_CENTER})}})},A=s=>{s.preventDefault(),C(route("data-master.students.destroy",{organization:r.id,receivable:P.id}),{onSuccess:()=>{c(!1),i.success("Siswa Berhasil Dihapus",{position:i.POSITION.TOP_CENTER}),D()},onError:o=>{c(!1),i.error(o.message,{position:i.POSITION.TOP_CENTER})}})};return e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"Piutang Iuran Siswa"}),e.jsx($,{}),t!=="viewer"&&e.jsx(l,{href:route("cashflow.student-monthly-receivable.create",r.id),children:e.jsx(q,{label:"Tambah"})}),e.jsx(X,{zIndex:"z-50",search:n,setSearch:s=>p(s.target.value),pageBefore:a.links[0].url?e.jsx(l,{href:route("cashflow.student-monthly-receivable",{organization:r.id,page:a.current_page-1,search:n}),preserveState:!0,only:["receivables"],children:e.jsx(m,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(m,{})}),pageAfter:a.links[a.links.length-1].url?e.jsx(l,{href:route("cashflow.student-monthly-receivable",{organization:r.id,page:a.current_page+1,search:n}),only:["receivables"],preserveState:!0,children:e.jsx(u,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(u,{})}),page:e.jsxs(e.Fragment,{children:[a.current_page,"/",a.last_page]}),data:a}),e.jsx(ae,{children:a.data.map(s=>e.jsx(te,{receivable:s,handleDelete:()=>f(s),role:t},s.id))}),e.jsxs(U,{children:[e.jsxs(Y,{children:[e.jsx("div",{className:"my-auto w-7/12",children:t!=="viewer"&&e.jsx("div",{className:"space-x-2",children:e.jsx(l,{href:route("cashflow.student-monthly-receivable.create",r.id),children:e.jsx(y,{className:"py-3",children:"Tambah Data"})})})}),e.jsx("div",{className:"my-auto w-4/12 flex justify-end gap-5",children:S&&e.jsx("button",{className:"py-3 px-3 border rounded-lg",onClick:s=>h(!0),children:e.jsx(le,{})})}),e.jsxs("div",{className:"w-3/12 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(Q,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari Siswa",className:"w-full border-none focus:outline-none focus:ring-0",value:n||"",onChange:s=>p(s.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(Z,{data:a})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:a.links[0].url?e.jsx(l,{href:route("cashflow.student-monthly-receivable",{organization:r.id,page:a.current_page-1,search:n}),preserveState:!0,only:["receivables"],children:e.jsx(m,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(m,{})})}),e.jsxs("div",{className:"my-auto",children:[a.current_page,"/",a.last_page]}),e.jsx("div",{className:"my-auto",children:a.links[a.links.length-1].url?e.jsx(l,{href:route("cashflow.student-monthly-receivable",{organization:r.id,page:a.current_page+1,search:n}),only:["receivables"],preserveState:!0,children:e.jsx(u,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(u,{})})})]})]}),e.jsx("div",{className:"sm:flex hidden gap-5",children:e.jsx("div",{className:"w-full",children:e.jsx(ee,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"Nama"}),e.jsx("th",{className:"bg-gray-200",children:"No Siswa"}),e.jsx("th",{className:"bg-gray-200",children:"Kelas Terakhir"}),e.jsx("th",{className:"bg-gray-200 text-end",children:"Sisa"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:a.data.map((s,o)=>e.jsx(re,{receivable:s,className:`${o%2==0&&"bg-gray-100"}`,handleDelete:()=>f(s),role:t},o))})]})})})})]}),e.jsx(g,{show:k,onClose:()=>c(!1),children:e.jsxs("form",{onSubmit:A,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 text-center",children:v}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(N,{onClick:()=>c(!1),children:"Batal"}),e.jsx(se,{className:"ms-3",disabled:j,children:"Hapus"})]})]})}),e.jsx(g,{show:w,onClose:()=>h(!1),children:e.jsxs("form",{onSubmit:_,className:"p-6",children:[e.jsx("h2",{className:"font-bold text-lg text-center",children:"Mengirim Tagihan Iuran Bulanan via Whatsapp Broadcasting"}),e.jsx("div",{className:"mt-5",children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"w-[25px]",children:"•"}),e.jsx("td",{children:"Hindari terlalu sering melakukan pengiriman Penagihan Iuran Bulanan via Whatsapp, dikhawatirkan akan terbaca spam oleh pihak Whatsapp, cukup lakukan 1 - 2 x perbulan"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-[25px]",children:"•"}),e.jsxs("td",{children:["Silakan melakukan pengecekan status pengiriman pada ",e.jsx(l,{href:route("add-ons.whatsapp-log",{organization:r.id}),className:"text-blue-600 font-bold",children:"Log Aktifitas Whatsapp"})," "]})]})]})})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(N,{onClick:()=>h(!1),children:"Batal"}),e.jsx(y,{className:"ms-3",disabled:j,children:"Kirim"})]})]})})]})}ne.layout=t=>e.jsx(K,{header:e.jsx(L,{children:"Piutang Iuran Bulanan Siswa"}),children:t,user:t.props.auth.user,organization:t.props.organization,title:"Piutang Iuran Bulanan",backLink:e.jsx(l,{href:route("cashflow",t.props.organization.id),children:e.jsx(V,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(l,{href:route("cashflow",t.props.organization.id),children:"Arus Kas"})}),e.jsx("li",{children:"Piutang Iuran Bulanan Siswa"})]})}),role:t.props.role});export{ne as default};
