import{K,r,m as L,S as R,j as e,L as Z,$ as i}from"./app-d982c3f4.js";import{Q as d,k as G}from"./react-toastify.esm-d0559b96.js";/* empty css                      */import{w as u,m as U,d as f,x as v,e as p,h as g,l as N,y as b,z as w,t as y}from"./index.esm-98495e7d.js";import{G as Q}from"./iconBase-923fb019.js";import{H as W}from"./Header-d16afac5.js";import{P as Y}from"./PrimaryButton-18d5600e.js";import{T as q}from"./TextInput-89870703.js";import{a as J,u as X}from"./index.module-60dd13e9.js";import{B as T}from"./BadgeSuccess-c96da06b.js";import{B as O}from"./BadgeWarning-64c07484.js";import{B as I}from"./BadgeDanger-a92a49da.js";import{M as z}from"./Modal-d9bd669b.js";import{S as ee}from"./SecondaryButton-992a520b.js";import{D as se}from"./DangerButton-f21ca1c1.js";import{c as _}from"./index.esm-5dc1f498.js";import{S as k}from"./SuccessButton-29fceff1.js";import"./portal-d298a1f5.js";import"./transition-a8359558.js";import"./close-provider-b21588e2.js";function ie(a){return Q({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 1.25c2.487 0 4.773.402 6.466 1.079.844.337 1.577.758 2.112 1.264.536.507.922 1.151.922 1.907v12.987l-.026.013h.026c0 .756-.386 1.4-.922 1.907-.535.506-1.268.927-2.112 1.264-1.693.677-3.979 1.079-6.466 1.079s-4.774-.402-6.466-1.079c-.844-.337-1.577-.758-2.112-1.264C2.886 19.9 2.5 19.256 2.5 18.5h.026l-.026-.013V5.5c0-.756.386-1.4.922-1.907.535-.506 1.268-.927 2.112-1.264C7.226 1.652 9.513 1.25 12 1.25ZM4 14.371v4.116l-.013.013H4c0 .211.103.487.453.817.351.332.898.666 1.638.962 1.475.589 3.564.971 5.909.971 2.345 0 4.434-.381 5.909-.971.739-.296 1.288-.63 1.638-.962.349-.33.453-.607.453-.817h.013L20 18.487v-4.116a7.85 7.85 0 0 1-1.534.8c-1.693.677-3.979 1.079-6.466 1.079s-4.774-.402-6.466-1.079a7.843 7.843 0 0 1-1.534-.8ZM20 12V7.871a7.85 7.85 0 0 1-1.534.8C16.773 9.348 14.487 9.75 12 9.75s-4.774-.402-6.466-1.079A7.85 7.85 0 0 1 4 7.871V12c0 .21.104.487.453.817.35.332.899.666 1.638.961 1.475.59 3.564.972 5.909.972 2.345 0 4.434-.382 5.909-.972.74-.295 1.287-.629 1.638-.96.35-.33.453-.607.453-.818ZM4 5.5c0 .211.103.487.453.817.351.332.898.666 1.638.962 1.475.589 3.564.971 5.909.971 2.345 0 4.434-.381 5.909-.971.739-.296 1.288-.63 1.638-.962.349-.33.453-.607.453-.817 0-.211-.103-.487-.453-.817-.351-.332-.898-.666-1.638-.962-1.475-.589-3.564-.971-5.909-.971-2.345 0-4.434.381-5.909.971-.739.296-1.288.63-1.638.962C4.104 5.013 4 5.29 4 5.5Z"}}]})(a)}function Te({auth:a,organizations:h,searchFilter:S,affiliation:t}){var j;const{flash:l}=K().props,[B,n]=r.useState(!1),[c,C]=r.useState({}),[x,D]=r.useState(S||""),[P]=J(x,500),{data:ae,setData:$,processing:A,delete:E,reset:H}=L({user_id:"",user_name:"",organization_id:"",role:""}),M=X(x);r.useLayoutEffect(()=>{const s=window.screen.height;document.getElementById("content").style.height=`${s-374}px`},[]),r.useEffect(()=>{l.success&&d.success(l.success,{position:d.POSITION.TOP_CENTER}),l.error&&d.error(l.error,{position:d.POSITION.TOP_CENTER})},[]),r.useEffect(()=>{M!==void 0&&F()},[P]);const F=s=>{R.reload({only:["organizations"],data:{search:x}})},m=s=>{C(s),$({user_id:a.user.id,organization_id:s.id}),n(!0)},V=s=>{s.preventDefault(),E(route("organization.share-to-other.delete",c.id),{onSuccess:()=>{d.success("Tautan Anda dan Organisasi Berhasil Dihapus",{position:d.POSITION.TOP_CENTER}),n(!1),H()}})};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{title:"Organization"}),e.jsx(G,{}),e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx(W,{children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-t-lg",children:e.jsxs("div",{className:"sm:p-6 px-6 py-3 text-gray-800 flex-none sm:flex",children:[e.jsxs("div",{className:"sm:hidden text-gray-800 flex flex-col-reverse gap-5",children:[e.jsx("div",{className:"my-auto",children:"Daftar Organisasi / Bisnis"}),e.jsxs("div",{className:"flex flex-row-reverse text-end",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 text-sm",children:a.user.name}),e.jsx("div",{className:" text-xs text-green-400",children:a.user.email})]}),e.jsx("div",{className:"my-auto text-gray-400",children:e.jsx(i,{href:"/profile",children:e.jsx(u,{})})})]})]}),e.jsx("div",{className:"sm:flex-1 my-auto sm:block hidden",children:"Daftar Organisasi / Bisnis"}),e.jsx("div",{className:"sm:flex-1 sm:block hidden text-end text-gray-800",children:e.jsxs("div",{className:"flex flex-row-reverse",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:a.user.name}),e.jsx("div",{className:" text-sm text-green-400",children:a.user.email})]}),e.jsx("div",{className:"my-auto text-gray-400",children:e.jsx(i,{href:"/profile",children:e.jsx(u,{})})})]})})]})})}),e.jsx("div",{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"py-3 px-6 text-gray-900 flex-none sm:flex sm:flex-row-reserve sm:gap-2",children:[e.jsx("div",{className:"sm:flex-1 my-auto",children:e.jsx(q,{value:x??"",placeholder:"Cari Organisasi",type:"search",className:"w-full",onChange:s=>D(s.target.value)})}),e.jsx("div",{className:"sm:flex-1 my-auto text-end hidden md:block",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[(a.user.role==="admin"||a.user.role==="super-admin")&&e.jsx("div",{children:e.jsx(i,{href:route("admin.dashboard"),children:e.jsxs(k,{className:"gap-2",children:[e.jsx(ie,{})," Admin"]})})}),t&&e.jsx("div",{children:e.jsx(i,{href:route("affiliation.index",t.id),children:e.jsxs(k,{className:"gap-2",children:[e.jsx(_,{})," Afiliasi"]})})}),e.jsx("div",{children:e.jsx(i,{href:"/organizations/create",children:e.jsx(Y,{children:"Tambah Organisasi"})})})]})}),e.jsxs("div",{className:"md:hidden flex fixed left-2 bottom-2",children:[e.jsx("div",{children:e.jsx(i,{className:"btn btn-circle bg-gray-800 text-white",href:"/organizations/create",children:e.jsx("div",{className:"text-xl font-bold",children:e.jsx(U,{height:20,width:20})})})}),t&&e.jsx("div",{children:e.jsx(i,{className:"btn btn-circle bg-green-800 text-white",href:route("affiliation.index",t.id),children:e.jsx("div",{className:"text-xl font-bold",children:e.jsx(_,{height:20,width:20})})})})]})]})}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm",children:e.jsxs("div",{className:"py-3 px-6 text-gray-800 flex text-lg font-bold border-b-2 border-gray-700",children:[e.jsx("div",{className:"w-6/12",children:"Nama Organisasi"}),e.jsx("div",{className:"w-3/12",children:"Kadaluarsa"}),e.jsx("div",{className:"w-3/12",children:"Status"}),e.jsx("div",{className:"w-1/12"})]})}),e.jsx("div",{className:"overflow-auto",id:"content",children:h.length<1?e.jsx("div",{className:"bg-white overflow-hidden shadow-sm border-b",children:e.jsx("div",{className:"py-3 px-6 text-gray-800 flex",children:e.jsx("div",{className:"w-full text-center italic",children:"Tidak Ada Data"})})}):h.map((s,o)=>e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsxs("div",{className:"py-3 px-6 text-gray-800 flex relative",children:[s.users[0].pivot.is_waiting?e.jsx("div",{className:"absolute top-0",children:e.jsx("div",{className:"text-xs bg-orange-600 text-white px-1 rounded-sm",children:"Permintaan Tautan Organisasi"})}):"",e.jsx("div",{className:"w-6/12 my-auto",children:s.name}),e.jsx("div",{className:"w-3/12 my-auto",children:s.expired}),e.jsxs("div",{className:"w-3/12 my-auto",children:[s.status=="trial"&&e.jsx(O,{children:"Trial"}),s.status=="active"&&e.jsx(T,{children:"Aktif"}),s.status=="deactive"&&e.jsx(I,{children:"Tidak Aktif"})]}),e.jsx("div",{className:"w-1/12 my-auto",children:e.jsxs("div",{className:"dropdown dropdown-left",children:[e.jsx("div",{tabIndex:0,role:"button",className:"bg-inherit border-none ",children:e.jsx(f,{})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:s.users[0].pivot.is_waiting?e.jsxs("li",{className:"flex justify-between flex-row",children:[e.jsx("div",{className:"bg-green-600 hover:bg-green-400 text-white",children:e.jsx(i,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!0,user_id:a.user.id,organization_id:s.id,is_waiting:!1},children:"Terima"})}),e.jsx("div",{className:"bg-red-600 hover:bg-red-400 text-white",children:e.jsx(i,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!1,user_id:a.user.id,organization_id:s.id,is_waiting:!1},children:"Tolak"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(i,{href:`/dashboard/${s.id}`,children:[e.jsx(v,{}),"Buka"]})}),s.users[0].pivot.role=="admin"?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/edit`,children:[e.jsx(p,{}),"Ubah"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}`,children:[e.jsx(g,{})," Detail"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/invoices/create`,children:[e.jsx(N,{})," Berlangganan"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/invoices`,children:[e.jsx(b,{})," Invoice"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/share-to-other`,children:[e.jsx(w,{})," Tautkan Pengguna"]})})]}):e.jsx("li",{children:e.jsxs("button",{onClick:()=>m(s),children:[e.jsx(y,{}),"Hapus Tautan"]})})]})})]})})]})},o))})]}),e.jsx("div",{className:"block md:hidden border-gray-100 border-y-2 mb-14 h-[100px]",children:h.map((s,o)=>e.jsxs("div",{className:"bg-white shadow-sm px-6 py-3 flex relative",children:[s.users[0].pivot.is_waiting?e.jsx("div",{className:"absolute top-0 right-6",children:e.jsx("div",{className:"text-xs bg-orange-600 text-white px-1 rounded-sm",children:"Permintaan Tautan Organisasi"})}):"",e.jsxs("div",{className:"w-11/12",children:[e.jsx("div",{className:"text-gray-800 font-bold",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Kadaluarsa : ",s.expired]}),e.jsxs("div",{className:"text-sm",children:[s.status=="trial"&&e.jsx(O,{children:"Trial"}),s.status=="active"&&e.jsx(T,{children:"Aktif"}),s.status=="deactive"&&e.jsx(I,{children:"Tidak Aktif"})]})]}),e.jsx("div",{className:"my-auto",children:e.jsxs("div",{className:"dropdown dropdown-left",children:[e.jsx("div",{tabIndex:0,role:"button",className:"bg-inherit border-none ",children:e.jsx(f,{})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 bg-base-100 rounded-box w-52 border-1 border-gray-900 shadow",children:s.users[0].pivot.is_waiting?e.jsxs("li",{className:"flex justify-between flex-row",children:[e.jsx("div",{className:"bg-green-600 hover:bg-green-400 text-white",children:e.jsx(i,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!0,user_id:a.user.id,organization_id:s.id,is_waiting:!1},children:"Terima"})}),e.jsx("div",{className:"bg-red-600 hover:bg-red-400 text-white",children:e.jsx(i,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!1,user_id:a.user.id,organization_id:s.id,is_waiting:!1},children:"Tolak"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(i,{href:`/dashboard/${s.id}`,children:[e.jsx(v,{}),"Buka"]})}),s.users[0].pivot.role=="admin"?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/edit`,children:[e.jsx(p,{}),"Ubah"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}`,children:[e.jsx(g,{})," Detail"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/invoices/create`,children:[e.jsx(N,{})," Berlangganan"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/invoices`,children:[e.jsx(b,{})," Invoice"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/share-to-other`,children:[e.jsx(w,{})," Tautkan Pengguna"]})})]}):e.jsx("li",{children:e.jsxs("button",{onClick:()=>m(s),children:[e.jsx(y,{}),"Hapus Tautan"]})})]})})]})})]},o))})]})}),e.jsx(z,{show:B,onClose:()=>n(!1),children:e.jsxs("form",{onSubmit:V,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Konfirmasi Hapus Penautan"}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsxs("div",{className:"text-center",children:["Apakah Anda Yakin Menghapus Tautan Dengan"," ",e.jsx("span",{className:"font-bold",children:(j=c==null?void 0:c.name)==null?void 0:j.toUpperCase()})," ?"]}),e.jsxs("div",{className:"mt-10 py-10 sm:mx-3 flex flex-col-reverse justify-center sm:flex-row sm:justify-end",children:[e.jsx("div",{className:"text-center",children:e.jsx(ee,{className:"w-full mt-2 sm:mt-0",onClick:()=>n(!1),children:e.jsx("div",{className:"text-center w-full",children:"Batal"})})}),e.jsx("div",{className:"text-center",children:e.jsx(se,{className:"sm:ms-3 w-full",disabled:A,type:"submit",children:e.jsx("div",{className:"text-center w-full",children:"Hapus Tautan"})})})]})]})]})})]})}export{Te as default};
