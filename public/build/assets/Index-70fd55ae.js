import{r,W as ee,y as f,j as e,Y as se,a as t}from"./app-2d0d68fd.js";import{D as ae,A as le}from"./AuthenticatedLayout-bcc4f3e5.js";import{H as ie}from"./Header-74f5c6ef.js";import{I as o,a as m,d as Y,e as P,h as re,b as ne,o as te,c as de}from"./index.esm-9b039639.js";import{T as ce,C as oe,a as me,b as xe}from"./ContentDesktop-2eb6c676.js";import{C as he}from"./ContainerDesktop-538d582d.js";import{f as n}from"./formatNumber-b542c689.js";import{d as c}from"./dayjs.min-de9a9c68.js";import{M as B}from"./Modal-8f595bb6.js";import{P as p}from"./PrimaryButton-de68ac15.js";import{S as A}from"./SecondaryButton-ea9f0982.js";import{k as ue,Q as T}from"./react-toastify.esm-a934e392.js";import{B as F}from"./BadgeSuccess-100bc67e.js";import{B as E}from"./BadgeWarning-328a9361.js";import{o as R,u as je}from"./index.module-9dc6aeb4.js";import{U as fe}from"./UserSelectInput-38f7991e.js";import"./ApplicationLogo-37de31a7.js";import"./iconBase-68846a6f.js";import"./transition-87681e6b.js";/* empty css                      */import"./keyboard-837a3ba2.js";import"./combobox-a4878f22.js";function pe({withdraws:a,searchFilter:$,statusFilter:V,affiliation:ve,affiliators:v,startDate:z,endDate:O}){console.log(v);const[l,g]=r.useState($||""),[N,U]=r.useState({status:V||""}),[K,d]=r.useState(!1),[H,x]=r.useState(!1),[h,W]=r.useState({startDate:z,endDate:O}),{data:i,setData:L,patch:Q,processing:b,reset:y}=ee({name:"",no_ref:"",email:"",value:0,bank_account:"",bank_name:"",date:"",id:null}),[u,k]=r.useState({id:null,name:"",email:""}),[j]=R(h,500),[q]=R(l,500),G=je(l);r.useEffect(()=>{G!==void 0&&C()},[j,q]);const S=s=>{W(s)},D=s=>{x(!0),f.reload({only:["affiliation"],data:{user_id:s.user_id},onSuccess:M=>{const{props:I}=M;L({name:s.user.name,date:c(s.created_at).format("MMMM YYYY, DD"),no_ref:s.no_ref,email:s.user.email,value:s.value,bank_account:I.affiliation.bank_account,bank_name:I.affiliation.bank_name,id:s.id})},preserveState:!0})},_=()=>{x(!1),f.reload({only:["withdraws"],data:{user_id:""},onSuccess:s=>{y()},preserveState:!0})},J=s=>{s.preventDefault(),Q(route("admin.user-master.withdraws.update",i.id),{onSuccess:M=>{T.success(`Penarikan Saldo No. Ref: ${i.no_ref} Berhasil Dikonfirmasi`,{position:T.POSITION.TOP_CENTER}),y(),x(!1)}})},X=s=>{console.log(s),k({id:s.id,name:s.name,email:s.email})},C=()=>{f.reload({only:["withdraws"],data:{search:l,start_date:j.startDate,end_date:j.endDate,status:N.status,user_id:u.id}})},Z=s=>{s.preventDefault(),C(),d(!1)},w=()=>{k({id:null,name:"",email:""})};return e.jsxs(e.Fragment,{children:[e.jsx(se,{title:"Penarikan Saldo Afiliasi"}),e.jsx(ue,{}),e.jsx(ce,{zIndex:"z-50",search:l,setSearch:s=>g(s.target.value),pageBefore:a.links[0].url?e.jsx(t,{href:`/admin/data-master/withdraws?page=${a.current_page-1}&search=${l}`,preserveState:!0,children:e.jsx(o,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(o,{})}),pageAfter:a.links[a.links.length-1].url?e.jsx(t,{href:`/admin/data-master/withdraws?page=${a.current_page+1}&search=${l}`,only:["withdraws"],preserveState:!0,children:e.jsx(m,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(m,{})}),page:e.jsxs(e.Fragment,{children:[a.current_page,"/",a.last_page]}),data:a,hasDate:!0,dateValue:h,onChangeDate:S,showFilter:()=>d(!0)}),e.jsx(oe,{children:a.data.map(s=>e.jsxs("div",{className:" text-gray-900 py-2 px-1 border flex justify-between",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:s.no_ref}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.user.name.toUpperCase()}),e.jsx("div",{children:s.user.email})]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:["Diajukan Tanggal: ",c(s.created_at).format("MMMM YYYY, DD")]}),s.status?e.jsxs("div",{children:[" Dikirim Tanggal: ",c(s.updated_at).format("MMMM YYYY, DD")," "]}):""]}),e.jsx("div",{className:"text-sm",children:s.status?e.jsx(F,{children:"Telah Dikirim"}):e.jsx(E,{children:"Belum Dikirim"})})]}),e.jsxs("div",{children:[e.jsx("div",{children:"Nilai Pengajuan :"}),e.jsxs("div",{className:"text-lg text-end font-bold",children:["IDR. ",n(s.value)]})]}),e.jsx("div",{children:e.jsxs("div",{className:"dropdown dropdown-left",children:[e.jsx("div",{tabIndex:0,role:"button",className:"bg-inherit border-none hover:bg-gray-100 -z-50 text-gray-300'",children:e.jsx(Y,{})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-[50] menu p-2 shadow bg-base-100 rounded-box w-56",children:e.jsx("li",{children:e.jsxs("button",{onClick:()=>D(s),children:[e.jsx(P,{})," Edit"]})})})]})})]},s.id))}),e.jsxs(he,{children:[e.jsxs(me,{children:[e.jsx("button",{className:"py-2 px-3 border rounded-lg",onClick:()=>d(!0),children:e.jsx(re,{})}),e.jsx("div",{className:"w-1/4 my-auto ",children:e.jsx(ae,{value:h,onChange:S,showShortcuts:!0,classNames:"border-2",separator:" sampai "})}),e.jsxs("div",{className:"w-1/4 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(ne,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari",className:"w-full border-none focus:outline-none focus:ring-0",value:l||"",onChange:s=>g(s.target.value)})]}),e.jsxs("div",{className:"italic text-xs my-auto w-1/12 text-center",children:[n(a.current_page*a.per_page-(a.per_page-1)),"-",n(a.to)," dari ",n(a.total)]}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:a.links[0].url?e.jsx(t,{href:`/admin/withdraws?page=${a.current_page-1}&search=${l}`,preserveState:!0,children:e.jsx(o,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(o,{})})}),e.jsxs("div",{className:"my-auto",children:[a.current_page,"/",a.last_page]}),e.jsx("div",{className:"my-auto",children:a.links[a.links.length-1].url?e.jsx(t,{href:`/admin/withdraws?page=${a.current_page+1}&search=${l}`,only:["withdraws"],preserveState:!0,children:e.jsx(m,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(m,{})})})]})]}),e.jsx(xe,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"No Ref"}),e.jsx("th",{className:"bg-gray-200",children:"Nama"}),e.jsx("th",{className:"bg-gray-200",children:"Email"}),e.jsx("th",{className:"bg-gray-200",children:"Diajukan Tanggal"}),e.jsx("th",{className:"bg-gray-200",children:"Dikirim Tanggal"}),e.jsx("th",{className:"bg-gray-200",children:"Nilai"}),e.jsx("th",{className:"bg-gray-200",children:"Status"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:a.data.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"",children:s.no_ref}),e.jsx("td",{className:"",children:s.user.name.toUpperCase()}),e.jsx("td",{className:"",children:s.user.email}),e.jsx("td",{className:"",children:c(s.created_at).format("MMMM YYYY, DD")}),e.jsx("td",{className:"",children:s.created_at===s.updated_at?"":c(s.updated_at).format("MMMM YYYY, DD")}),e.jsxs("td",{children:["IDR. ",n(s.value)]}),e.jsx("td",{className:"",children:s.status?e.jsx(F,{children:"Telah Dikirim"}):e.jsx(E,{children:"Belum Dikirim"})}),e.jsx("td",{className:"",children:e.jsxs("div",{className:"dropdown dropdown-left",children:[e.jsx("div",{tabIndex:0,role:"button",className:"bg-inherit border-none hover:bg-gray-100 -z-50 text-gray-300'",children:e.jsx(Y,{})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-[50] menu p-2 shadow bg-base-100 rounded-box w-56",children:e.jsx("li",{children:e.jsxs("button",{onClick:()=>D(s),children:[e.jsx(P,{})," Konfirmasi"]})})})]})})]},s.id))})]})})]}),e.jsx(B,{show:H,onClose:_,children:e.jsx("form",{onSubmit:J,children:e.jsxs("div",{className:"p-5",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Konfirmasi Pengiriman Saldo Afiliasi"}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/4 flex justify-between",children:[e.jsx("div",{children:"No Ref"}),e.jsx("div",{children:":"})]}),e.jsx("div",{className:"w-3/4",children:i.no_ref})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/4 flex justify-between",children:[e.jsx("div",{children:"Tanggal Pengajuan"}),e.jsx("div",{children:":"})]}),e.jsx("div",{className:"w-3/4",children:i.date})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/4 flex justify-between",children:[e.jsx("div",{children:"Nama"}),e.jsx("div",{children:":"})]}),e.jsx("div",{className:"w-3/4",children:i.name.toUpperCase()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/4 flex justify-between",children:[e.jsx("div",{children:"Email"}),e.jsx("div",{children:":"})]}),e.jsx("div",{className:"w-3/4",children:i.email})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/4 flex justify-between",children:[e.jsx("div",{children:"Nilai Pengajuan"}),e.jsx("div",{children:":"})]}),e.jsxs("div",{className:"w-3/4",children:["IDR ",n(i.value)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/4 flex justify-between",children:[e.jsx("div",{children:"No. Rekening"}),e.jsx("div",{children:":"})]}),e.jsx("div",{className:"w-3/4",children:i.bank_account})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-1/4 flex justify-between",children:[e.jsx("div",{children:"Nama Bank"}),e.jsx("div",{children:":"})]}),e.jsx("div",{className:"w-3/4",children:i.bank_name})]}),e.jsxs("div",{className:"mt-6 flex sm:flex-row flex-col-reverse gap-2 sm:gap-0 sm:justify-end",children:[e.jsx(A,{onClick:_,children:e.jsx("div",{className:"w-full",children:"Batal"})}),e.jsx(p,{className:"sm:hidden",disabled:b,children:e.jsx("div",{className:"w-full",children:"Konfirmasi"})}),e.jsx(p,{className:"ms-3 hidden sm:block",disabled:b,children:"Konfirmasi"})]})]})]})})}),e.jsx(B,{show:K,onClose:()=>d(!1),children:e.jsx("form",{onSubmit:Z,children:e.jsxs("div",{className:"p-5",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filter"}),e.jsxs("section",{className:"mt-5 space-y-2",children:[e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-3/12 my-auto",children:"Affiliatior"}),e.jsx("div",{className:"w-8/12",children:e.jsx(fe,{resources:v,selected:u,setSelected:s=>X(s),maxHeight:"max-h-40",placeholder:"Cari Afiliator",isError:!1,id:"affiliator"})}),e.jsx("div",{className:"w-1/12 my-auto",children:u.id&&e.jsx("button",{type:"button",className:"text-red-500 text-xl hover:bg-slate-200 rounded-full p-2",onClick:w,children:e.jsx(te,{})})})]}),e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-3/12 my-auto",children:"Status"}),e.jsx("div",{className:"w-8/12",children:e.jsxs("select",{className:"w-full rounded-lg border-gray-300",onChange:s=>U({status:s.target.value}),value:N.status,children:[e.jsx("option",{value:"",children:"Semua"}),e.jsx("option",{value:"false",children:"Belum Dikirim"}),e.jsx("option",{value:"true",children:"Telah Dikirim"})]})}),e.jsx("div",{className:"w-1/12 my-auto"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(A,{onClick:()=>d(!1),children:"Batal"}),e.jsx(p,{className:"ms-3",children:"Filter"})]})]})})})]})}pe.layout=a=>e.jsx(le,{header:e.jsx(ie,{children:"Data Penarikan Saldo Afiliasi"}),children:a,user:a.props.auth.user,title:"Data Penarikan Saldo Afiliasi",backLink:e.jsx(t,{href:route("admin.user-master"),children:e.jsx(de,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(t,{href:route("admin.user-master"),children:"Data Master Pengguna"})}),e.jsx("li",{children:"Data Penarikan Saldo Afiliasi"})]})})});export{pe as default};
