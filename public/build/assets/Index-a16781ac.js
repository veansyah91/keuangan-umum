import{r as l,W as Q,y as g,j as e,Y as H,a as i}from"./app-c35e44ea.js";import{A as q}from"./AuthenticatedLayout-8650b6a1.js";import{H as z}from"./Header-8998d68d.js";import{I as c,a as d,h as G,b as L,f as V,c as W}from"./index.esm-7bb33f87.js";import{T as Y,C as J,a as U,P as X,b as Z}from"./ContentDesktop-e0960b1d.js";import{M as y}from"./Modal-baa06cb2.js";import{S as b}from"./SecondaryButton-d72803b0.js";import{P as x}from"./PrimaryButton-cf25e388.js";import{k as ee,Q as w}from"./react-toastify.esm-f4382caf.js";/* empty css                      */import ae from"./RegencyMobile-31beee61.js";import{C as se}from"./ContainerDesktop-77e31537.js";import te from"./RegencyDesktop-a365430d.js";import{o as S,u as re}from"./usePrevious-9cda1477.js";import{N as le,a as ie}from"./NavgroupRegional-5846a67a.js";import{G as ne}from"./GeneralSelectInput-6d8571e6.js";import"./index.esm-d7f28cc5.js";import"./iconBase-b0136dc9.js";import"./transition-eca15743.js";import"./dayjs.min-17ff4607.js";import"./formatNumber-b542c689.js";import"./active-element-history-c9a8d777.js";import"./keyboard-bf5f0610.js";import"./combobox-da4ed674.js";import"./use-resolve-button-type-6df5ca50.js";function oe({regencies:a,provinces:P,provinceFilter:k,searchFilter:K}){l.useState(!1);const[I,n]=l.useState(!1),[C,o]=l.useState(!1),[t,u]=l.useState(K||""),[r,p]=l.useState(""),[m,j]=l.useState(k||""),[F]=S(m,500),{data:ce,setData:D,post:$,progress:h,reset:M,processing:T}=Q({regency:""}),[_]=S(t,500),f=re(t);l.useEffect(()=>{f!==void 0&&v()},[_]),l.useEffect(()=>{f!==void 0&&B()},[F,r]);const v=()=>{g.reload({only:["regencies"],data:{search:t,province:r?r.id:""}})},B=()=>{g.reload({only:["provinces"],data:{searchProvince:m},preserveState:!0})},R=s=>{s.preventDefault(),o(!1),v()},E=s=>{s.preventDefault(),$(route("admin.data-master.regency.post"),{onSuccess:()=>{M(),n(!1),w.success("Kabupaten / Kota Berhasil Diimport",{position:w.POSITION.TOP_CENTER})}})},O=s=>{s.currentTarget.files&&D("regency",s.currentTarget.files[0])},A=()=>{p(""),j("")};return e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"Data Provinsi"}),e.jsx(ee,{}),e.jsx("div",{className:"btm-nav sm:hidden",children:e.jsx(le,{onClick:()=>n(!0)})}),e.jsx(Y,{zIndex:"z-50",search:t,setSearch:s=>u(s.target.value),pageBefore:a.links[0].url?e.jsx(i,{href:`/admin/data-master/regencies?page=${a.current_page-1}&search=${t}`,preserveState:!0,children:e.jsx(c,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(c,{})}),pageAfter:a.links[a.links.length-1].url?e.jsx(i,{href:`/admin/data-master/regencies?page=${a.current_page+1}&search=${t}`,only:["regencies"],preserveState:!0,children:e.jsx(d,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(d,{})}),page:e.jsxs(e.Fragment,{children:[a.current_page,"/",a.last_page]}),data:a,hasFilter:!0,showFilter:()=>o(!0)}),e.jsx(J,{children:a.data.map(s=>e.jsx(ae,{regency:s},s.id))}),e.jsxs(se,{children:[e.jsxs(U,{children:[e.jsx("div",{className:"my-auto w-6/12",children:e.jsx(x,{className:"py-3",onClick:()=>n(!0),children:"Import Kabupaten / Kota"})}),e.jsx("div",{className:"w-1/12 text-end",children:e.jsx("button",{className:"p-3 border rounded-lg",onClick:()=>o(!0),children:e.jsx(G,{})})}),e.jsxs("div",{className:"w-3/12 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(L,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari Kabupaten / Kota",className:"w-full border-none focus:outline-none focus:ring-0",value:t||"",onChange:s=>u(s.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(X,{data:a})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:a.links[0].url?e.jsx(i,{href:`/admin/data-master/regencies?page=${a.current_page-1}&search=${t}${r&&`&province=${r.id}`}`,preserveState:!0,children:e.jsx(c,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(c,{})})}),e.jsxs("div",{className:"my-auto",children:[a.current_page,"/",a.last_page]}),e.jsx("div",{className:"my-auto",children:a.links[a.links.length-1].url?e.jsx(i,{href:`/admin/data-master/regencies?page=${a.current_page+1}&search=${t}${r&&`&province=${r.id}`}`,only:["regencies"],preserveState:!0,children:e.jsx(d,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(d,{})})})]})]}),e.jsxs("div",{className:"sm:flex hidden gap-5",children:[e.jsx("div",{className:"w-11/12",children:e.jsx(Z,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"Kode"}),e.jsx("th",{className:"bg-gray-200",children:"Nama Kabupaten / Kota"}),e.jsx("th",{className:"bg-gray-200",children:"Nama Provinsi"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:a.data.map((s,N)=>e.jsx(te,{regency:s,className:`${N%2==0&&"bg-gray-100"}`},N))})]})})}),e.jsx("div",{className:"w-1/12 text-end",children:e.jsx(ie,{})})]})]}),e.jsx(y,{show:I,onClose:()=>n(!1),children:e.jsxs("form",{onSubmit:E,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Import Kabupaten / Kota"}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-1",children:[e.jsx("div",{className:"sm:w-1/4 w-full my-auto",children:"File Kabupaten / Kota"}),e.jsxs("div",{className:"sm:w-3/4 w-full",children:[e.jsx("input",{type:"file",className:"file-input file-input-bordered file-input-sm w-full",value:void 0,onChange:O}),h&&e.jsxs("progress",{value:h.percentage,max:"100",children:[h.percentage,"%"]})]})]})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(b,{onClick:()=>n(!1),children:"Batal"}),e.jsx(x,{className:"ms-3",disabled:T,children:"Import"})]})]})}),e.jsx(y,{show:C,onClose:()=>o(!1),children:e.jsxs("form",{onSubmit:R,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filter Kabupaten / Kota"}),e.jsx("div",{className:"mt-6 space-y-2",children:e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-3/12 my-auto",children:"Provinsi"}),e.jsx("div",{className:"w-8/12",children:e.jsx(ne,{data:P,selected:r,setSelected:p,query:m,setQuery:j,maxHeight:"max-h-40",placeholder:"Cari Provinsi"})}),e.jsx("div",{className:"w-1/12 my-auto",children:r&&e.jsx("button",{className:"p-2",onClick:A,children:e.jsx(V,{})})})]})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(b,{onClick:()=>o(!1),children:"Batal"}),e.jsx(x,{className:"ms-3",children:"Filter"})]})]})})]})}oe.layout=a=>e.jsx(q,{header:e.jsx(z,{children:"Data Kabupaten / Kota"}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(i,{href:route("admin.data-master"),children:"Data Master"})}),e.jsx("li",{children:"Data Kabupaten / Kota"})]})}),children:a,user:a.props.auth.user,title:"Data Kabupaten / Kota",backLink:e.jsx(i,{href:route("admin.data-master"),children:e.jsx(W,{})})});export{oe as default};
