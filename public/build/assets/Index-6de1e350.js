import{q as R,r,W as K,y as U,j as e,Y as V,a as i}from"./app-25f64d54.js";import{Q as d,k as W}from"./react-toastify.esm-3f4a13c0.js";/* empty css                      */import{t as u,k as Y,d as f,u as v,e as p,p as g,v as N,w as b,x as w,o as y}from"./index.esm-84724444.js";import{H as q}from"./Header-e7d93afa.js";import{P as L}from"./PrimaryButton-0083aeee.js";import{T as Q}from"./TextInput-d57c7828.js";import{o as G,u as J}from"./index.module-18ffa806.js";import{B as T}from"./BadgeSuccess-56e9f9bd.js";import{B as O}from"./BadgeWarning-dd1a24dd.js";import{B as k}from"./BadgeDanger-6dabd75d.js";import{M as X}from"./Modal-e5f95cec.js";import{S as Z}from"./SecondaryButton-d0536d1d.js";import{D as z}from"./DangerButton-a0b92c08.js";import{c as I}from"./index.esm-1a8a0131.js";import{S as ee}from"./SuccessButton-b625fc58.js";import"./iconBase-87fce0ec.js";import"./portal-a14208d5.js";import"./transition-6cf3d9d9.js";import"./close-provider-a1823dcd.js";function we({auth:a,organizations:h,searchFilter:_,affiliation:t}){var j;const{flash:l}=R().props,[S,n]=r.useState(!1),[c,B]=r.useState({}),[x,D]=r.useState(_||""),[P]=G(x,500),{data:se,setData:C,processing:E,delete:$,reset:A}=K({user_id:"",user_name:"",organization_id:"",role:""}),F=J(x);r.useLayoutEffect(()=>{const s=window.screen.height;document.getElementById("content").style.height=`${s-374}px`},[]),r.useEffect(()=>{l.success&&d.success(l.success,{position:d.POSITION.TOP_CENTER}),l.error&&d.error(l.error,{position:d.POSITION.TOP_CENTER})},[]),r.useEffect(()=>{F!==void 0&&H()},[P]);const H=s=>{U.reload({only:["organizations"],data:{search:x}})},m=s=>{B(s),C({user_id:a.user.id,organization_id:s.id}),n(!0)},M=s=>{s.preventDefault(),$(route("organization.share-to-other.delete",c.id),{onSuccess:()=>{d.success("Tautan Anda dan Organisasi Berhasil Dihapus",{position:d.POSITION.TOP_CENTER}),n(!1),A()}})};return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Organization"}),e.jsx(W,{}),e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx(q,{children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-t-lg",children:e.jsxs("div",{className:"sm:p-6 px-6 py-3 text-gray-800 flex-none sm:flex",children:[e.jsxs("div",{className:"sm:hidden text-gray-800 flex flex-col-reverse gap-5",children:[e.jsx("div",{className:"my-auto",children:"Daftar Organisasi / Bisnis"}),e.jsxs("div",{className:"flex flex-row-reverse text-end",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 text-sm",children:a.user.name}),e.jsx("div",{className:" text-xs text-green-400",children:a.user.email})]}),e.jsx("div",{className:"my-auto text-gray-400",children:e.jsx(i,{href:"/profile",children:e.jsx(u,{})})})]})]}),e.jsx("div",{className:"sm:flex-1 my-auto sm:block hidden",children:"Daftar Organisasi / Bisnis"}),e.jsx("div",{className:"sm:flex-1 sm:block hidden text-end text-gray-800",children:e.jsxs("div",{className:"flex flex-row-reverse",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:a.user.name}),e.jsx("div",{className:" text-sm text-green-400",children:a.user.email})]}),e.jsx("div",{className:"my-auto text-gray-400",children:e.jsx(i,{href:"/profile",children:e.jsx(u,{})})})]})})]})})}),e.jsx("div",{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"py-3 px-6 text-gray-900 flex-none sm:flex sm:flex-row-reserve sm:gap-2",children:[e.jsx("div",{className:"sm:flex-1 my-auto",children:e.jsx(Q,{value:x??"",placeholder:"Cari Organisasi",type:"search",className:"w-full",onChange:s=>D(s.target.value)})}),e.jsx("div",{className:"sm:flex-1 my-auto text-end hidden md:block",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[t&&e.jsx("div",{children:e.jsx(i,{href:route("affiliation.index",t.id),children:e.jsxs(ee,{className:"gap-2",children:[e.jsx(I,{})," Afiliasi"]})})}),e.jsx("div",{children:e.jsx(i,{href:"/organizations/create",children:e.jsx(L,{children:"Tambah Organisasi"})})})]})}),e.jsxs("div",{className:"md:hidden flex fixed left-2 bottom-2",children:[e.jsx("div",{children:e.jsx(i,{className:"btn btn-circle bg-gray-800 text-white",href:"/organizations/create",children:e.jsx("div",{className:"text-xl font-bold",children:e.jsx(Y,{height:20,width:20})})})}),t&&e.jsx("div",{children:e.jsx(i,{className:"btn btn-circle bg-green-800 text-white",href:route("affiliation.index",t.id),children:e.jsx("div",{className:"text-xl font-bold",children:e.jsx(I,{height:20,width:20})})})})]})]})}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm",children:e.jsxs("div",{className:"py-3 px-6 text-gray-800 flex text-lg font-bold border-b-2 border-gray-700",children:[e.jsx("div",{className:"w-6/12",children:"Nama Organisasi"}),e.jsx("div",{className:"w-3/12",children:"Kadaluarsa"}),e.jsx("div",{className:"w-3/12",children:"Status"}),e.jsx("div",{className:"w-1/12"})]})}),e.jsx("div",{className:"overflow-auto",id:"content",children:h.length<1?e.jsx("div",{className:"bg-white overflow-hidden shadow-sm border-b",children:e.jsx("div",{className:"py-3 px-6 text-gray-800 flex",children:e.jsx("div",{className:"w-full text-center italic",children:"Tidak Ada Data"})})}):h.map((s,o)=>e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsxs("div",{className:"py-3 px-6 text-gray-800 flex relative",children:[s.users[0].pivot.is_waiting?e.jsx("div",{className:"absolute top-0",children:e.jsx("div",{className:"text-xs bg-orange-600 text-white px-1 rounded-sm",children:"Permintaan Tautan Organisasi"})}):"",e.jsx("div",{className:"w-6/12 my-auto",children:s.name}),e.jsx("div",{className:"w-3/12 my-auto",children:s.expired}),e.jsxs("div",{className:"w-3/12 my-auto",children:[s.status=="trial"&&e.jsx(O,{children:"Trial"}),s.status=="active"&&e.jsx(T,{children:"Aktif"}),s.status=="deactive"&&e.jsx(k,{children:"Tidak Aktif"})]}),e.jsx("div",{className:"w-1/12 my-auto",children:e.jsxs("div",{className:"dropdown dropdown-left",children:[e.jsx("div",{tabIndex:0,role:"button",className:"bg-inherit border-none ",children:e.jsx(f,{})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:s.users[0].pivot.is_waiting?e.jsxs("li",{className:"flex justify-between flex-row",children:[e.jsx("div",{className:"bg-green-600 hover:bg-green-400 text-white",children:e.jsx(i,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!0,user_id:a.user.id,organization_id:s.id,is_waiting:!1},children:"Terima"})}),e.jsx("div",{className:"bg-red-600 hover:bg-red-400 text-white",children:e.jsx(i,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!1,user_id:a.user.id,organization_id:s.id,is_waiting:!1},children:"Tolak"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(i,{href:`/dashboard/${s.id}`,children:[e.jsx(v,{}),"Buka"]})}),s.users[0].pivot.role=="admin"?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/edit`,children:[e.jsx(p,{}),"Ubah"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}`,children:[e.jsx(g,{})," Detail"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/invoices/create`,children:[e.jsx(N,{})," Berlangganan"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/invoices`,children:[e.jsx(b,{})," Invoice"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/share-to-other`,children:[e.jsx(w,{})," Tautkan Pengguna"]})})]}):e.jsx("li",{children:e.jsxs("button",{onClick:()=>m(s),children:[e.jsx(y,{}),"Hapus Tautan"]})})]})})]})})]})},o))})]}),e.jsx("div",{className:"block md:hidden border-gray-100 border-y-2 mb-14 h-[100px]",children:h.map((s,o)=>e.jsxs("div",{className:"bg-white shadow-sm px-6 py-3 flex relative",children:[s.users[0].pivot.is_waiting?e.jsx("div",{className:"absolute top-0 right-6",children:e.jsx("div",{className:"text-xs bg-orange-600 text-white px-1 rounded-sm",children:"Permintaan Tautan Organisasi"})}):"",e.jsxs("div",{className:"w-11/12",children:[e.jsx("div",{className:"text-gray-800 font-bold",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Kadaluarsa : ",s.expired]}),e.jsxs("div",{className:"text-sm",children:[s.status=="trial"&&e.jsx(O,{children:"Trial"}),s.status=="active"&&e.jsx(T,{children:"Aktif"}),s.status=="deactive"&&e.jsx(k,{children:"Tidak Aktif"})]})]}),e.jsx("div",{className:"my-auto",children:e.jsxs("div",{className:"dropdown dropdown-left",children:[e.jsx("div",{tabIndex:0,role:"button",className:"bg-inherit border-none ",children:e.jsx(f,{})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 bg-base-100 rounded-box w-52 border-1 border-gray-900 shadow",children:s.users[0].pivot.is_waiting?e.jsxs("li",{className:"flex justify-between flex-row",children:[e.jsx("div",{className:"bg-green-600 hover:bg-green-400 text-white",children:e.jsx(i,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!0,user_id:a.user.id,organization_id:s.id,is_waiting:!1},children:"Terima"})}),e.jsx("div",{className:"bg-red-600 hover:bg-red-400 text-white",children:e.jsx(i,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!1,user_id:a.user.id,organization_id:s.id,is_waiting:!1},children:"Tolak"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(i,{href:`/dashboard/${s.id}`,children:[e.jsx(v,{}),"Buka"]})}),s.users[0].pivot.role=="admin"?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/edit`,children:[e.jsx(p,{}),"Ubah"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}`,children:[e.jsx(g,{})," Detail"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/invoices/create`,children:[e.jsx(N,{})," Berlangganan"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/invoices`,children:[e.jsx(b,{})," Invoice"]})}),e.jsx("li",{children:e.jsxs(i,{href:`/organizations/${s.id}/share-to-other`,children:[e.jsx(w,{})," Tautkan Pengguna"]})})]}):e.jsx("li",{children:e.jsxs("button",{onClick:()=>m(s),children:[e.jsx(y,{}),"Hapus Tautan"]})})]})})]})})]},o))})]})}),e.jsx(X,{show:S,onClose:()=>n(!1),children:e.jsxs("form",{onSubmit:M,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Konfirmasi Hapus Penautan"}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsxs("div",{className:"text-center",children:["Apakah Anda Yakin Menghapus Tautan Dengan"," ",e.jsx("span",{className:"font-bold",children:(j=c==null?void 0:c.name)==null?void 0:j.toUpperCase()})," ?"]}),e.jsxs("div",{className:"mt-10 py-10 sm:mx-3 flex flex-col-reverse justify-center sm:flex-row sm:justify-end",children:[e.jsx("div",{className:"text-center",children:e.jsx(Z,{className:"w-full mt-2 sm:mt-0",onClick:()=>n(!1),children:e.jsx("div",{className:"text-center w-full",children:"Batal"})})}),e.jsx("div",{className:"text-center",children:e.jsx(z,{className:"sm:ms-3 w-full",disabled:E,type:"submit",children:e.jsx("div",{className:"text-center w-full",children:"Hapus Tautan"})})})]})]})]})})]})}export{we as default};
