import{W as ae,r as d,y as A,j as e,Y as le,a as m}from"./app-932dac43.js";import{A as te}from"./AuthenticatedLayout-50777d53.js";import{H as ie}from"./Header-7a4c0d6b.js";import{I as N,a as v,h as re,b as de,c as ce}from"./index.esm-ab259f8a.js";import{k as ne,Q as c}from"./react-toastify.esm-e687779d.js";import{A as oe}from"./AddButtonMobile-bc0e517a.js";import{T as me,C as xe,a as he,P as ue,b as je}from"./ContentDesktop-f70268b2.js";import{o as pe,u as fe}from"./index.module-4b0a6979.js";import{M as g}from"./Modal-b686eba0.js";import{S as b}from"./SecondaryButton-467ac377.js";import{P as k}from"./PrimaryButton-3b78d5d6.js";import{C as Ne}from"./ContainerDesktop-f72d0e20.js";import{D as ve}from"./DangerButton-6f5cd659.js";import ge from"./ProgramDesktop-dc10f430.js";import be from"./ProgramMobile-97ac119f.js";import{I as D}from"./InputLabel-a51f7073.js";import{T as P}from"./TextInput-235f3e02.js";import{B as we}from"./BadgeSuccess-b5b851a0.js";import{B as ye}from"./BadgeDanger-ce5845c5.js";import"./ApplicationLogo-ab6856d2.js";import"./iconBase-d14e2caf.js";import"./transition-4af5feaf.js";/* empty css                      */import"./dayjs.min-d7aa8949.js";import"./formatNumber-b542c689.js";import"./keyboard-61ed8e30.js";function Se({role:t,organization:x,programs:l,searchFilter:R,code:ke}){const{data:i,setData:n,post:z,patch:H,delete:U,processing:C,errors:a,setError:L,reset:o}=ae({code:"",description:"",name:"",is_active:!0,user_name:""}),[Q,h]=d.useState(!1),[V,j]=d.useState(!1),[W,_]=d.useState(!1),[Y,u]=d.useState(!1),[p,T]=d.useState(!1),[w,I]=d.useState({id:0,name:""}),[r,E]=d.useState(R||""),[y,q]=d.useState({status:""}),[G]=pe(r,500),J=fe(r);d.useEffect(()=>{J!==void 0&&$()},[G]);const X=s=>{s.preventDefault(),p?H(route("data-master.program.update",{organization:x.id,program:w.id}),{onSuccess:()=>{c.success("Program Kegiatan Berhasil Diubah",{position:c.POSITION.TOP_CENTER}),o(),h(!1)}}):z(route("data-master.program.post",x.id),{onSuccess:()=>{c.success("Program Kegiatan Berhasil Ditambahkan",{position:c.POSITION.TOP_CENTER}),o(),h(!1)}})},Z=s=>{s.preventDefault(),U(route("data-master.program.destroy",{organization:x.id,program:w.id}),{onSuccess:()=>{c.success("Program Kegiatan Berhasil Dihapus",{position:c.POSITION.TOP_CENTER}),o(),j(!1)},onError:f=>{c.error(f.delete,{position:c.POSITION.TOP_CENTER}),o(),j(!1)}})},F=()=>{T(!1),h(!1),L({code:"",description:"",name:"",is_active:""}),o()},B=()=>{h(!0),se()},S=()=>{_(!1),o()},K=s=>{n({code:s.code||"",description:s.description||"",name:s.name||"",is_active:s.is_active,user_name:s.user.name}),_(!0)},M=s=>{h(!0),T(!0),I({id:s.id,name:s.name}),n({code:s.code||"",description:s.description||"",name:s.name||"",is_active:s.is_active})},O=s=>{j(!0),I({id:s.id,name:s.name})},ee=s=>{s.preventDefault(),$(),u(!1)},se=()=>{A.reload({only:["code"],onSuccess:s=>{n("code",s.props.code)}})},$=()=>{A.reload({only:["programs"],data:{search:r,is_active:y.status},preserveState:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Data Prgram Kegiatan"}),e.jsx(ne,{}),t!=="viewer"&&e.jsx(oe,{label:"Tambah",handleShowInputModal:B}),e.jsx(me,{zIndex:"z-50",search:r,setSearch:s=>E(s.target.value),pageBefore:l.links[0].url?e.jsx(m,{href:`/data-master/programs?page=${l.current_page-1}&search=${r}`,preserveState:!0,only:["programs"],children:e.jsx(N,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(N,{})}),pageAfter:l.links[l.links.length-1].url?e.jsx(m,{href:`/data-master/programs?page=${l.current_page+1}&search=${r}`,only:["programs"],preserveState:!0,children:e.jsx(v,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(v,{})}),page:e.jsxs(e.Fragment,{children:[l.current_page,"/",l.last_page]}),data:l,hasFilter:!0,showFilter:()=>u(!0)}),e.jsx(xe,{children:l.data.map(s=>e.jsx(be,{program:s,handleDelete:()=>O(s),handleEdit:()=>M(s),handleShow:()=>K(s),role:t},s.id))}),e.jsxs(Ne,{children:[e.jsxs(he,{children:[e.jsx("div",{className:"my-auto w-5/12",children:t!=="viewer"&&e.jsx(k,{className:"py-3",onClick:B,children:"Tambah Data"})}),e.jsx("div",{className:"my-auto w-4/12 gap-5 justify-end",children:e.jsx("div",{className:"text-end",children:e.jsx("button",{className:"py-3 px-3 border rounded-lg",onClick:()=>u(!0),children:e.jsx(re,{})})})}),e.jsxs("div",{className:"w-3/12 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(de,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari Program Kegiatan",className:"w-full border-none focus:outline-none focus:ring-0",value:r||"",onChange:s=>E(s.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(ue,{data:l})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:l.links[0].url?e.jsx(m,{href:`/data-master/${x.id}/programs?page=${l.current_page-1}&search=${r}`,preserveState:!0,only:["programs"],children:e.jsx(N,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(N,{})})}),e.jsxs("div",{className:"my-auto",children:[l.current_page,"/",l.last_page]}),e.jsx("div",{className:"my-auto",children:l.links[l.links.length-1].url?e.jsx(m,{href:`/data-master/${x.id}/programs?page=${l.current_page+1}&search=${r}`,only:["programs"],preserveState:!0,children:e.jsx(v,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(v,{})})})]})]}),e.jsx("div",{className:"sm:flex hidden gap-5",children:e.jsx("div",{className:"w-full",children:e.jsx(je,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"Kode"}),e.jsx("th",{className:"bg-gray-200",children:"Nama Proyek"}),e.jsx("th",{className:"bg-gray-200",children:"Deksripsi"}),e.jsx("th",{className:"bg-gray-200 text-center",children:"Status Aktif"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:l.data.map((s,f)=>e.jsx(ge,{program:s,className:`${f%2==0&&"bg-gray-100"}`,handleDelete:()=>O(s),handleEdit:()=>M(s),handleShow:()=>K(s),role:t},f))})]})})})})]}),e.jsx(g,{show:Q,onClose:F,children:e.jsxs("form",{onSubmit:X,className:"p-6",id:"Tambah",name:"Tambah",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:[p?"Edit":"Tambah"," Program Kegiatan"]}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-1/4 my-auto",children:e.jsx(D,{value:"Nama",className:" mx-auto my-auto",htmlFor:"name"})}),e.jsxs("div",{className:"w-3/4 relative",children:[e.jsx(P,{id:"name",name:"name",className:`w-full ${(a==null?void 0:a.name)&&"border-red-500"}`,placeholder:"Nama Program Kegiatan",value:i.name,onChange:s=>n("name",s.target.value.toUpperCase())}),(a==null?void 0:a.name)&&e.jsx("div",{className:"text-red-500 text-xs absolute",children:a.name})]})]})}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-1/4 my-auto",children:e.jsx(D,{value:"Kode",className:" mx-auto my-auto",htmlFor:"code"})}),e.jsxs("div",{className:"w-3/4 relative",children:[e.jsx(P,{id:"code",name:"code",className:`w-full ${(a==null?void 0:a.code)&&"border-red-500"}`,placeholder:"Kode",value:i.code,onChange:s=>n("code",s.target.value.toUpperCase()),autoComplete:"false"}),(a==null?void 0:a.code)&&e.jsx("div",{className:"text-red-500 text-xs absolute",children:a.code})]})]})}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-1/4 my-auto",children:e.jsx(D,{value:"Deskripsi",className:" mx-auto my-auto",htmlFor:"description"})}),e.jsxs("div",{className:"w-3/4 flex",children:[e.jsx(P,{id:"description",name:"description",className:`w-full ${(a==null?void 0:a.description)&&"border-red-500"}`,placeholder:"Deskripsi",value:i.description,onChange:s=>n("description",s.target.value.toUpperCase()),autoComplete:"false"}),(a==null?void 0:a.description)&&e.jsx("div",{className:"text-red-500 text-xs",children:a.description})]})]})}),p&&e.jsx("div",{className:"flex justify-start w-full gap-1 mt-5",children:e.jsxs("div",{className:"w-1/12",children:[e.jsx("div",{className:"form-control ",children:e.jsxs("label",{className:"label cursor-pointer gap-2",htmlFor:"is_active",children:[e.jsx("input",{type:"checkbox",className:"checkbox",id:"is_active",value:i.is_active,onChange:()=>n("is_active",!i.is_active),checked:i.is_active}),e.jsx("span",{className:"label-text font-bold",children:"Aktif"})]})}),a&&a.is_active&&e.jsx("div",{className:"-mb-3",children:e.jsx("div",{className:"text-xs text-red-500",children:a.is_active})})]})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(b,{onClick:F,children:"Batal"}),e.jsx(k,{className:"ms-3",disabled:C,children:p?"Edit":"Tambah"})]})]})}),e.jsx(g,{show:W,onClose:S,children:e.jsxs("div",{className:"px-5 py-2",children:[e.jsx("div",{className:"text-lg font-bold py-3 border-b",children:"Detail Program Kegiatan"}),e.jsxs("div",{className:"py-3 space-y-2",children:[e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal",children:"Nama Kegiatan"}),e.jsxs("div",{className:"sm:w-2/3 flex flex-row gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:": "}),i.name]})]}),e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal",children:"Kode"}),e.jsxs("div",{className:"sm:w-2/3 flex flex-row gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:": "}),i.code]})]}),e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal",children:"Deskripsi"}),e.jsxs("div",{className:"sm:w-2/3 flex flex-row gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:": "}),i.description]})]}),e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal",children:"Status"}),e.jsxs("div",{className:"sm:w-2/3 flex flex-row gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:": "}),i.is_active?e.jsx(we,{children:"Aktif"}):e.jsx(ye,{children:"Tidak Aktif"})]})]}),e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal",children:"Dibuat Oleh"}),e.jsxs("div",{className:"sm:w-2/3 flex flex-row gap-1",children:[e.jsx("span",{className:"hidden sm:block",children:": "}),i.user_name]})]}),e.jsxs("div",{className:"flex sm:gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/3 font-bold sm:font-normal"}),e.jsx("div",{className:"sm:w-2/3 text-end",children:e.jsx(b,{onClick:S,children:"Tutup"})})]})]})]})}),e.jsx(g,{show:V,onClose:S,children:e.jsxs("form",{onSubmit:Z,className:"p-6",id:"deleteForm",name:"deleteForm",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 text-center",children:["Hapus Program Kegiatan ",w.name]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(b,{onClick:()=>j(!1),children:"Batal"}),e.jsx(ve,{className:"ms-3",disabled:C,children:"Hapus"})]})]})}),e.jsx(g,{show:Y,onClose:()=>u(!1),children:e.jsxs("form",{onSubmit:ee,className:"p-6",id:"filter",name:"filter",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filter Proyek"}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex w-full gap-1",children:[e.jsx("div",{className:"w-1/4 my-auto",children:"Status"}),e.jsx("div",{className:"w-3/4 flex",children:e.jsxs("select",{className:"select select-bordered w-full",id:"status",value:y.status,onChange:s=>q({...y,status:s.target.value}),children:[e.jsx("option",{disabled:!0,value:"",children:"--Pilih Status Aktif--"}),e.jsx("option",{value:"",children:"Semua"}),e.jsx("option",{value:!0,children:"Aktif"}),e.jsx("option",{value:!1,children:"Tidak Aktif"})]})})]})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(b,{onClick:()=>u(!1),children:"Batal"}),e.jsx(k,{className:"ms-3",children:"Filter"})]})]})})]})}Se.layout=t=>e.jsx(te,{header:e.jsx(ie,{children:"Data Program Kegiatan"}),children:t,user:t.props.auth.user,organization:t.props.organization,title:"Data Program Kegiatan",backLink:e.jsx(m,{href:route("data-master",t.props.organization.id),children:e.jsx(ce,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(m,{href:route("data-master",t.props.organization.id),children:"Data Master"})}),e.jsx("li",{children:"Data Program Kegiatan"})]})}),role:t.props.role});export{Se as default};
