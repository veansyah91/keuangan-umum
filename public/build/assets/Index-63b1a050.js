import{q as H,r as d,W as R,y as K,j as e,Y as M,a}from"./app-fceea874.js";import{Q as r,k as U}from"./react-toastify.esm-336384b8.js";/* empty css                      */import{s as j,k as V,d as u,t as f,e as v,n as p,u as g,v as N,w as b,o as w}from"./index.esm-270bc969.js";import{H as W}from"./Header-bc47d342.js";import{P as Y}from"./PrimaryButton-2d7b644a.js";import{T as q}from"./TextInput-48efa2df.js";import{o as Q,u as G}from"./usePrevious-c8943eef.js";import{B as y}from"./BadgeSuccess-8a7a6956.js";import{B as T}from"./BadgeWarning-c1b600cb.js";import{B as O}from"./BadgeDanger-ce040d45.js";import{M as J}from"./Modal-ac67fdee.js";import{S as L}from"./SecondaryButton-108da301.js";import{D as X}from"./DangerButton-80b9b903.js";import"./iconBase-546c15a2.js";import"./transition-ba32288f.js";import"./keyboard-a973aaf4.js";function fe({auth:i,organizations:x,searchFilter:k}){var m;const{flash:l}=H().props,[_,t]=d.useState(!1),[n,I]=d.useState({}),[c,S]=d.useState(k||""),[B]=Q(c,500),{data:Z,setData:D,processing:P,delete:C,reset:$}=R({user_id:"",user_name:"",organization_id:"",role:""}),A=G(c);d.useEffect(()=>{l.success&&r.success(l.success,{position:r.POSITION.TOP_CENTER}),l.error&&r.error(l.error,{position:r.POSITION.TOP_CENTER})},[]),d.useEffect(()=>{A!==void 0&&E()},[B]);const E=s=>{K.reload({only:["organizations"],data:{search:c}})},o=s=>{I(s),D({user_id:i.user.id,organization_id:s.id}),t(!0)},F=s=>{s.preventDefault(),C(route("organization.share-to-other.delete",n.id),{onSuccess:()=>{r.success("Tautan Anda dan Organisasi Berhasil Dihapus",{position:r.POSITION.TOP_CENTER}),t(!1),$()}})};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Organization"}),e.jsx(U,{}),e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx(W,{children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-t-lg",children:e.jsxs("div",{className:"sm:p-6 px-6 py-3 text-gray-800 flex-none sm:flex",children:[e.jsxs("div",{className:"sm:hidden text-gray-800 flex flex-col-reverse gap-5",children:[e.jsx("div",{className:"my-auto",children:"Daftar Organisasi / Bisnis"}),e.jsxs("div",{className:"flex flex-row-reverse text-end",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 text-sm",children:i.user.name}),e.jsx("div",{className:" text-xs text-green-400",children:i.user.email})]}),e.jsx("div",{className:"my-auto text-gray-400",children:e.jsx(a,{href:"/profile",children:e.jsx(j,{})})})]})]}),e.jsx("div",{className:"sm:flex-1 my-auto sm:block hidden",children:"Daftar Organisasi / Bisnis"}),e.jsx("div",{className:"sm:flex-1 sm:block hidden text-end text-gray-800",children:e.jsxs("div",{className:"flex flex-row-reverse",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:i.user.name}),e.jsx("div",{className:" text-sm text-green-400",children:i.user.email})]}),e.jsx("div",{className:"my-auto text-gray-400",children:e.jsx(a,{href:"/profile",children:e.jsx(j,{})})})]})})]})})}),e.jsx("div",{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"py-3 px-6 text-gray-900 flex-none sm:flex sm:flex-row-reserve sm:gap-2",children:[e.jsx("div",{className:"sm:flex-1 my-auto",children:e.jsx(q,{value:c??"",placeholder:"Cari Organisasi",type:"search",className:"w-full",onChange:s=>S(s.target.value)})}),e.jsx("div",{className:"sm:flex-1 my-auto text-end hidden md:block",children:e.jsx(a,{href:"/organizations/create",children:e.jsx(Y,{children:"Tambah Organisasi"})})}),e.jsx("div",{className:"md:hidden block fixed left-2 bottom-2",children:e.jsx("div",{children:e.jsx(a,{className:"btn btn-circle bg-gray-800 text-white",href:"/organizations/create",children:e.jsx("div",{className:"text-xl font-bold",children:e.jsx(V,{height:20,width:20})})})})})]})}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm",children:e.jsxs("div",{className:"py-3 px-6 text-gray-800 flex text-lg font-bold border-b-2 border-gray-700",children:[e.jsx("div",{className:"w-6/12",children:"Nama Organisasi"}),e.jsx("div",{className:"w-3/12",children:"Kadaluarsa"}),e.jsx("div",{className:"w-3/12",children:"Status"}),e.jsx("div",{className:"w-1/12"})]})}),e.jsx("div",{className:"overflow-auto h-[23rem]",children:x.length<1?e.jsx("div",{className:"bg-white overflow-hidden shadow-sm border-b",children:e.jsx("div",{className:"py-3 px-6 text-gray-800 flex",children:e.jsx("div",{className:"w-full text-center italic",children:"Tidak Ada Data"})})}):x.map((s,h)=>e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsxs("div",{className:"py-3 px-6 text-gray-800 flex relative",children:[s.users[0].pivot.is_waiting?e.jsx("div",{className:"absolute top-0",children:e.jsx("div",{className:"text-xs bg-orange-600 text-white px-1 rounded-sm",children:"Permintaan Tautan Organisasi"})}):"",e.jsx("div",{className:"w-6/12 my-auto",children:s.name}),e.jsx("div",{className:"w-3/12 my-auto",children:s.expired}),e.jsxs("div",{className:"w-3/12 my-auto",children:[s.status=="trial"&&e.jsx(T,{children:"Trial"}),s.status=="active"&&e.jsx(y,{children:"Aktif"}),s.status=="deactive"&&e.jsx(O,{children:"Tidak Aktif"})]}),e.jsx("div",{className:"w-1/12 my-auto",children:e.jsxs("div",{className:"dropdown dropdown-left",children:[e.jsx("div",{tabIndex:0,role:"button",className:"bg-inherit border-none ",children:e.jsx(u,{})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:s.users[0].pivot.is_waiting?e.jsxs("li",{className:"flex justify-between flex-row",children:[e.jsx("div",{className:"bg-green-600 hover:bg-green-400 text-white",children:e.jsx(a,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!0,user_id:i.user.id,organization_id:s.id,is_waiting:!1},children:"Terima"})}),e.jsx("div",{className:"bg-red-600 hover:bg-red-400 text-white",children:e.jsx(a,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!1,user_id:i.user.id,organization_id:s.id,is_waiting:!1},children:"Tolak"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(a,{href:`/dashboard/${s.id}`,children:[e.jsx(f,{}),"Buka"]})}),s.users[0].pivot.role=="admin"?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(a,{href:`/organizations/${s.id}/edit`,children:[e.jsx(v,{}),"Ubah"]})}),e.jsx("li",{children:e.jsxs(a,{href:`/organizations/${s.id}`,children:[e.jsx(p,{})," Detail"]})}),e.jsx("li",{children:e.jsxs(a,{href:`/organizations/${s.id}/invoices/create`,children:[e.jsx(g,{})," Berlangganan"]})}),e.jsx("li",{children:e.jsxs(a,{href:`/organizations/${s.id}/invoices`,children:[e.jsx(N,{})," Invoice"]})}),e.jsx("li",{children:e.jsxs(a,{href:`/organizations/${s.id}/share-to-other`,children:[e.jsx(b,{})," Tautkan Pengguna"]})})]}):e.jsx("li",{children:e.jsxs("button",{onClick:()=>o(s),children:[e.jsx(w,{}),"Hapus Tautan"]})})]})})]})})]})},h))})]}),e.jsx("div",{className:"block md:hidden border-gray-100 border-y-2 mb-14 h-[100px]",children:x.map((s,h)=>e.jsxs("div",{className:"bg-white shadow-sm px-6 py-3 flex relative",children:[s.users[0].pivot.is_waiting?e.jsx("div",{className:"absolute top-0 right-6",children:e.jsx("div",{className:"text-xs bg-orange-600 text-white px-1 rounded-sm",children:"Permintaan Tautan Organisasi"})}):"",e.jsxs("div",{className:"w-11/12",children:[e.jsx("div",{className:"text-gray-800 font-bold",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Kadaluarsa : ",s.expired]}),e.jsxs("div",{className:"text-sm",children:[s.status=="trial"&&e.jsx(T,{children:"Trial"}),s.status=="active"&&e.jsx(y,{children:"Aktif"}),s.status=="deactive"&&e.jsx(O,{children:"Tidak Aktif"})]})]}),e.jsx("div",{className:"my-auto",children:e.jsxs("div",{className:"dropdown dropdown-left",children:[e.jsx("div",{tabIndex:0,role:"button",className:"bg-inherit border-none ",children:e.jsx(u,{})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 bg-base-100 rounded-box w-52 border-1 border-gray-900 shadow",children:s.users[0].pivot.is_waiting?e.jsxs("li",{className:"flex justify-between flex-row",children:[e.jsx("div",{className:"bg-green-600 hover:bg-green-400 text-white",children:e.jsx(a,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!0,user_id:i.user.id,organization_id:s.id,is_waiting:!1},children:"Terima"})}),e.jsx("div",{className:"bg-red-600 hover:bg-red-400 text-white",children:e.jsx(a,{href:route("organization.share-to-other.patch.confirmation",s.id),as:"button",method:"patch",data:{confirm:!1,user_id:i.user.id,organization_id:s.id,is_waiting:!1},children:"Tolak"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(a,{href:`/dashboard/${s.id}`,children:[e.jsx(f,{}),"Buka"]})}),s.users[0].pivot.role=="admin"?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs(a,{href:`/organizations/${s.id}/edit`,children:[e.jsx(v,{}),"Ubah"]})}),e.jsx("li",{children:e.jsxs(a,{href:`/organizations/${s.id}`,children:[e.jsx(p,{})," Detail"]})}),e.jsx("li",{children:e.jsxs(a,{href:`/organizations/${s.id}/invoices/create`,children:[e.jsx(g,{})," Berlangganan"]})}),e.jsx("li",{children:e.jsxs(a,{href:`/organizations/${s.id}/invoices`,children:[e.jsx(N,{})," Invoice"]})}),e.jsx("li",{children:e.jsxs(a,{href:`/organizations/${s.id}/share-to-other`,children:[e.jsx(b,{})," Tautkan Pengguna"]})})]}):e.jsx("li",{children:e.jsxs("button",{onClick:()=>o(s),children:[e.jsx(w,{}),"Hapus Tautan"]})})]})})]})})]},h))})]})}),e.jsx(J,{show:_,onClose:()=>t(!1),children:e.jsxs("form",{onSubmit:F,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Konfirmasi Hapus Penautan"}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsxs("div",{className:"text-center",children:["Apakah Anda Yakin Menghapus Tautan Dengan ",e.jsx("span",{className:"font-bold",children:(m=n==null?void 0:n.name)==null?void 0:m.toUpperCase()})," ?"]}),e.jsxs("div",{className:"mt-10 py-10 sm:mx-3 flex flex-col-reverse justify-center sm:flex-row sm:justify-end",children:[e.jsx("div",{className:"text-center",children:e.jsx(L,{className:"w-full mt-2 sm:mt-0",onClick:()=>t(!1),children:e.jsx("div",{className:"text-center w-full",children:"Batal"})})}),e.jsx("div",{className:"text-center",children:e.jsx(X,{className:"sm:ms-3 w-full",disabled:P,type:"submit",children:e.jsx("div",{className:"text-center w-full",children:"Hapus Tautan"})})})]})]})]})})]})}export{fe as default};
