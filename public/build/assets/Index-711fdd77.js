import{r as o,y as v,j as e,Y as b,a as l}from"./app-19cc42c0.js";import{A as S}from"./AuthenticatedLayout-0f051064.js";import{H as k}from"./Header-e19b5266.js";import{k as F}from"./react-toastify.esm-279d9fcf.js";/* empty css                      */import{I as d,a as c,h as P,b as I,c as C}from"./index.esm-d808fa7e.js";import{M as _}from"./Modal-e90f7b2d.js";import{S as B}from"./SecondaryButton-3f5c1688.js";import{P as z}from"./PrimaryButton-4b9deb73.js";import{C as M}from"./ContainerDesktop-ce606a2e.js";import{T,C as D,a as A,P as E,b as L}from"./ContentDesktop-03e4f6bc.js";import R from"./StudentEntryReceivableMobile-cf61f804.js";import H from"./StudentEntryReceivableDesktop-6f7cca86.js";import{u as K,o as J}from"./index.module-a867e08c.js";import"./ApplicationLogo-b7dc7d00.js";import"./iconBase-5b9c9066.js";import"./transition-7f6e4608.js";import"./dayjs.min-5950c255.js";import"./portal-9b44cf17.js";import"./close-provider-57089e59.js";import"./formatNumber-b542c689.js";function O({organization:t,role:u,receivables:a,searchFilter:p,type:j}){const[r,x]=o.useState(p||""),[f,n]=o.useState(!1),[m,g]=o.useState({type:j}),y=K(r),[N]=J(r,500);o.useEffect(()=>{y!==void 0&&h({search:r})},[N]);const w=s=>{s.preventDefault();let i={type:m.type};h(i),n(!1)},h=s=>{v.reload({only:["receivables"],data:s})};return e.jsxs(e.Fragment,{children:[e.jsx(b,{title:"Piutang Iuran Siswa"}),e.jsx(F,{}),e.jsx(T,{zIndex:"z-50",search:r,setSearch:s=>x(s.target.value),pageBefore:a.links[0].url?e.jsx(l,{href:route("cashflow.student-entry-receivable",{organization:t.id,page:a.current_page-1,search:r}),preserveState:!0,only:["receivables"],children:e.jsx(d,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(d,{})}),pageAfter:a.links[a.links.length-1].url?e.jsx(l,{href:route("cashflow.student-entry-receivable",{organization:t.id,page:a.current_page+1,search:r}),only:["receivables"],preserveState:!0,children:e.jsx(c,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(c,{})}),page:e.jsxs(e.Fragment,{children:[a.current_page,"/",a.last_page]}),data:a,hasFilter:!0,showFilter:()=>n(!0)}),e.jsx(D,{children:a.data.map(s=>e.jsx(R,{receivable:s,role:u},s.id))}),e.jsxs(M,{children:[e.jsxs(A,{children:[e.jsx("div",{className:"my-auto w-7/12",children:u!=="viewer"&&e.jsx("div",{className:"space-x-2"})}),e.jsx("div",{className:"my-auto w-4/12 flex gap-5 justify-end",children:e.jsx("button",{className:"py-3 px-3 border rounded-lg h-full",onClick:()=>n(!0),children:e.jsx(P,{})})}),e.jsxs("div",{className:"w-3/12 border flex rounded-lg",children:[e.jsx("label",{htmlFor:"search-input",className:"my-auto ml-2",children:e.jsx(I,{})}),e.jsx("input",{id:"search-input",name:"search-input",type:"search",placeholder:"Cari Siswa",className:"w-full border-none focus:outline-none focus:ring-0",value:r||"",onChange:s=>x(s.target.value)})]}),e.jsx("div",{className:"italic text-xs my-auto w-1/12 text-center",children:e.jsx(E,{data:a})}),e.jsxs("div",{className:"my-auto flex space-x-2 w-1/12",children:[e.jsx("div",{className:"my-auto",children:a.links[0].url?e.jsx(l,{href:route("cashflow.student-entry-receivable",{organization:t.id,page:a.current_page-1,search:r}),preserveState:!0,only:["receivables"],children:e.jsx(d,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(d,{})})}),e.jsxs("div",{className:"my-auto",children:[a.current_page,"/",a.last_page]}),e.jsx("div",{className:"my-auto",children:a.links[a.links.length-1].url?e.jsx(l,{href:route("cashflow.student-entry-receivable",{organization:t.id,page:a.current_page+1,search:r}),only:["receivables"],preserveState:!0,children:e.jsx(c,{})}):e.jsx("div",{className:"text-gray-300",children:e.jsx(c,{})})})]})]}),e.jsx("div",{className:"sm:flex hidden gap-5",children:e.jsx("div",{className:"w-full",children:e.jsx(L,{children:e.jsxs("table",{className:"table table-pin-rows table-pin-cols text-base",children:[e.jsx("thead",{className:"text-base text-gray-900",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"bg-gray-200",children:"Siswa"}),e.jsx("th",{className:"bg-gray-200",children:"Kelas"}),e.jsx("th",{className:"bg-gray-200 text-end",children:"Jumlah"}),e.jsx("th",{className:"bg-gray-200"})]})}),e.jsx("tbody",{children:a.data.map((s,i)=>e.jsx(H,{receivable:s,className:`${i%2==0&&"bg-gray-100"} text-sm`,role:u},i))})]})})})})]}),e.jsx(_,{show:f,onClose:()=>n(!1),children:e.jsxs("form",{onSubmit:w,className:"p-6",id:"filter",name:"filter",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filter Piutang Iuran Bulanan"}),e.jsx("div",{className:"mt-6 ",children:e.jsxs("div",{className:"flex flex-col sm:flex-row w-full gap-1",children:[e.jsx("div",{className:"sm:w-1/4 w-full my-auto font-bold",children:"Tipe"}),e.jsx("div",{className:"sm:w-3/4 w-full flex",children:e.jsxs("select",{className:"select select-bordered w-full",value:m.type,onChange:s=>g({...m,type:s.target.value}),id:"study_year",children:[e.jsx("option",{value:"all",children:"Semua"}),e.jsx("option",{value:"paid",children:"Lunas"}),e.jsx("option",{value:"unpaid",children:"Belum Lunas"})]})})]})}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(B,{onClick:()=>n(!1),children:"Batal"}),e.jsx(z,{className:"ms-3",children:"Filter"})]})]})})]})}O.layout=t=>e.jsx(S,{header:e.jsx(k,{children:"Piutang Iuran Tahunan Siswa"}),children:t,user:t.props.auth.user,organization:t.props.organization,title:"Piutang Iuran Tahunan Siswa",backLink:e.jsx(l,{href:route("cashflow",t.props.organization.id),children:e.jsx(C,{})}),breadcrumbs:e.jsx("div",{className:"text-sm breadcrumbs",children:e.jsxs("ul",{children:[e.jsx("li",{className:"font-bold",children:e.jsx(l,{href:route("cashflow",t.props.organization.id),children:"Arus Kas"})}),e.jsx("li",{children:"Piutang Iuran Tahunan Siswa"})]})}),role:t.props.role});export{O as default};
