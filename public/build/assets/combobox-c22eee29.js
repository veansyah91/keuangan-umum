import{r as f,b as Pe,R as V}from"./app-494cfc61.js";import{s as Ie,b as A,o as g,O as pe,U as q,u as K,p as ae,g as $e,e as te,x as Fe,C as H,y as Y,d as Ae,c as he}from"./transition-c5d5c5d7.js";import{d as De,c as _e,u as ke,a as Le,I as G,n as Ne,m as me,o as L,t as ve,r as Ve,e as je,f as Be}from"./keyboard-c60468bf.js";function X(e,r,t){let n=t.initialDeps??[],o;return()=>{var i,l,a,u;let c;t.key&&((i=t.debug)!=null&&i.call(t))&&(c=Date.now());const p=e();if(!(p.length!==n.length||p.some((s,h)=>n[h]!==s)))return o;n=p;let R;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(R=Date.now()),o=r(...p),t.key&&((a=t.debug)!=null&&a.call(t))){const s=Math.round((Date.now()-c)*100)/100,h=Math.round((Date.now()-R)*100)/100,I=h/16,x=(v,M)=>{for(v=String(v);v.length<M;)v=" "+v;return v};console.info(`%c⏱ ${x(h,5)} /${x(s,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*I,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,o),o}}function le(e,r){if(e===void 0)throw new Error(`Unexpected undefined${r?`: ${r}`:""}`);return e}const We=(e,r)=>Math.abs(e-r)<1,Ue=(e,r,t)=>{let n;return function(...o){e.clearTimeout(n),n=e.setTimeout(()=>r.apply(this,o),t)}},Ke=e=>e,qe=e=>{const r=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let o=r;o<=t;o++)n.push(o);return n},He=(e,r)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const o=l=>{const{width:a,height:u}=l;r({width:Math.round(a),height:Math.round(u)})};if(o(t.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const i=new n.ResizeObserver(l=>{const a=l[0];if(a!=null&&a.borderBoxSize){const u=a.borderBoxSize[0];if(u){o({width:u.inlineSize,height:u.blockSize});return}}o(t.getBoundingClientRect())});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},be={passive:!0},Je=typeof window>"u"?!0:"onscrollend"in window,Xe=(e,r)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let o=0;const i=Je?()=>{}:Ue(n,()=>{r(o,!1)},e.options.isScrollingResetDelay),l=c=>()=>{o=t[e.options.horizontal?"scrollLeft":"scrollTop"],i(),r(o,c)},a=l(!0),u=l(!1);return u(),t.addEventListener("scroll",a,be),t.addEventListener("scrollend",u,be),()=>{t.removeEventListener("scroll",a),t.removeEventListener("scrollend",u)}},Ye=(e,r,t)=>{if(r!=null&&r.borderBoxSize){const n=r.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},Ge=(e,{adjustments:r=0,behavior:t},n)=>{var o,i;const l=e+r;(i=(o=n.scrollElement)==null?void 0:o.scrollTo)==null||i.call(o,{[n.options.horizontal?"left":"top"]:l,behavior:t})};class Qe{constructor(r){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(o=>{o.forEach(i=>{this._measureElement(i.target,i)})}));return{disconnect:()=>{var o;return(o=n())==null?void 0:o.disconnect()},observe:o=>{var i;return(i=n())==null?void 0:i.observe(o,{box:"border-box"})},unobserve:o=>{var i;return(i=n())==null?void 0:i.unobserve(o)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,o])=>{typeof o>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ke,rangeExtractor:qe,onChange:()=>{},measureElement:Ye,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,...t}},this.notify=(t,n)=>{var o,i;const{startIndex:l,endIndex:a}=this.range??{startIndex:void 0,endIndex:void 0},u=this.calculateRange();(t||l!==(u==null?void 0:u.startIndex)||a!==(u==null?void 0:u.endIndex))&&((i=(o=this.options).onChange)==null||i.call(o,this,n))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.observer.disconnect(),this.elementsCache.clear()},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.notify(!1,!1);return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(o,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o;const l=this.isScrolling;this.isScrolling=i,this.notify(l!==i,i)}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const o=new Map,i=new Map;for(let l=n-1;l>=0;l--){const a=t[l];if(o.has(a.lane))continue;const u=i.get(a.lane);if(u==null||a.end>u.end?i.set(a.lane,a):a.end<u.end&&o.set(a.lane,!0),o.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,a)=>l.end===a.end?l.index-a.index:l.end-a.end)[0]:void 0},this.getMeasurementOptions=X(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,n,o,i,l)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:o,getItemKey:i,enabled:l}),{key:!1}),this.getMeasurements=X(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:o,getItemKey:i,enabled:l},a)=>{var u;if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(m=>{this.itemSizeCache.set(m.key,m.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const p=this.measurementsCache.slice(0,c);for(let m=c;m<t;m++){let R=(u=this.measurementsCache[m])==null?void 0:u.measureElement;R||(R=C=>{const z=i(m),D=this.elementsCache.get(z);if(!C){D&&(this.observer.unobserve(D),this.elementsCache.delete(z));return}D!==C&&(D&&this.observer.unobserve(D),this.observer.observe(C),this.elementsCache.set(z,C)),C.isConnected&&this.resizeItem(m,this.options.measureElement(C,void 0,this))});const s=i(m),h=this.options.lanes===1?p[m-1]:this.getFurthestMeasurement(p,m),I=h?h.end+this.options.gap:n+o,x=a.get(s),v=typeof x=="number"?x:this.options.estimateSize(m),M=I+v,w=h?h.lane:m%this.options.lanes;p[m]={index:m,start:I,size:v,end:M,key:s,lane:w,measureElement:R}}return this.measurementsCache=p,p},{key:!1,debug:()=>this.options.debug}),this.calculateRange=X(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,n,o)=>this.range=t.length>0&&n>0?Ze({measurements:t,outerSize:n,scrollOffset:o}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=X(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,n,o,i)=>n===null?[]:t({startIndex:n.startIndex,endIndex:n.endIndex,overscan:o,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,o=t.getAttribute(n);return o?parseInt(o,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const o=this.indexFromElement(t),i=this.getMeasurements()[o];if(!i||!t.isConnected){this.elementsCache.forEach((a,u)=>{a===t&&(this.observer.unobserve(t),this.elementsCache.delete(u))});return}const l=this.elementsCache.get(i.key);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.elementsCache.set(i.key,t)),this.resizeItem(o,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const o=this.getMeasurements()[t];if(!o)return;const i=this.itemSizeCache.get(o.key)??o.size,l=n-i;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,l,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,n)),this.notify(!0,!1))},this.measureElement=t=>{t&&this._measureElement(t,void 0)},this.getVirtualItems=X(()=>[this.getIndexes(),this.getMeasurements()],(t,n)=>{const o=[];for(let i=0,l=t.length;i<l;i++){const a=t[i],u=n[a];o.push(u)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return le(n[Se(0,n.length-1,o=>le(n[o]).start,t)])},this.getOffsetForAlignment=(t,n)=>{const o=this.getSize(),i=this.getScrollOffset();n==="auto"&&(t<=i?n="start":t>=i+o?n="end":n="start"),n==="start"?t=t:n==="end"?t=t-o:n==="center"&&(t=t-o/2);const l=this.options.horizontal?"scrollWidth":"scrollHeight",u=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[l]:this.scrollElement[l]:0)-o;return Math.max(Math.min(u,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const o=this.getMeasurements()[t];if(!o)return;const i=this.getSize(),l=this.getScrollOffset();if(n==="auto")if(o.end>=l+i-this.options.scrollPaddingEnd)n="end";else if(o.start<=l+this.options.scrollPaddingStart)n="start";else return[l,n];const a=n==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,n),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:n="start",behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:o})},this.scrollToIndex=(t,{align:n="auto",behavior:o}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(t,n);if(!i)return;const[l,a]=i;this._scrollToOffset(l,{adjustments:void 0,behavior:o}),o!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[c]=le(this.getOffsetForIndex(t,a));We(c,this.getScrollOffset())||this.scrollToIndex(t,{align:a,behavior:o})}else this.scrollToIndex(t,{align:a,behavior:o})}))},this.scrollBy=(t,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let o;return n.length===0?o=this.options.paddingStart:o=this.options.lanes===1?((t=n[n.length-1])==null?void 0:t.end)??0:Math.max(...n.slice(-this.options.lanes).map(i=>i.end)),o-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(t,{adjustments:n,behavior:o})=>{this.options.scrollToFn(t,{behavior:o,adjustments:n},this)},this.measure=()=>{var t,n;this.itemSizeCache=new Map,(n=(t=this.options).onChange)==null||n.call(t,this,!1)},this.setOptions(r)}}const Se=(e,r,t,n)=>{for(;e<=r;){const o=(e+r)/2|0,i=t(o);if(i<n)e=o+1;else if(i>n)r=o-1;else return o}return e>0?e-1:0};function Ze({measurements:e,outerSize:r,scrollOffset:t}){const n=e.length-1,i=Se(0,n,a=>e[a].start,t);let l=i;for(;l<n&&e[l].end<t+r;)l++;return{startIndex:i,endIndex:l}}const et=typeof document<"u"?f.useLayoutEffect:f.useEffect;function tt(e){const r=f.useReducer(()=>({}),{})[1],t={...e,onChange:(o,i)=>{var l;i?Pe.flushSync(r):r(),(l=e.onChange)==null||l.call(e,o,i)}},[n]=f.useState(()=>new Qe(t));return n.setOptions(t),f.useEffect(()=>n._didMount(),[]),et(()=>n._willUpdate()),n}function nt(e){return tt({observeElementRect:He,observeElementOffset:Xe,scrollToFn:Ge,...e})}function ue(e,r){let[t,n]=f.useState(e),o=Ie(e);return A(()=>n(o.current),[o,n,...r]),t}function ot(e,r,t){let[n,o]=f.useState(t),i=e!==void 0,l=f.useRef(i),a=f.useRef(!1),u=f.useRef(!1);return i&&!l.current&&!a.current?(a.current=!0,l.current=i,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!i&&l.current&&!u.current&&(u.current=!0,l.current=i,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[i?e:n,g(c=>(i||o(c),r==null?void 0:r(c)))]}function ge(e){var r;if(e.type)return e.type;let t=(r=e.as)!=null?r:"button";if(typeof t=="string"&&t.toLowerCase()==="button")return"button"}function it(e,r){let[t,n]=f.useState(()=>ge(e));return A(()=>{n(ge(e))},[e.type,e.as]),A(()=>{t||r.current&&r.current instanceof HTMLButtonElement&&!r.current.hasAttribute("type")&&n("button")},[t,r]),t}function xe(e){return[e.screenX,e.screenY]}function rt(){let e=f.useRef([-1,-1]);return{wasMoved(r){let t=xe(r);return e.current[0]===t[0]&&e.current[1]===t[1]?!1:(e.current=t,!0)},update(r){e.current=xe(r)}}}function lt({container:e,accept:r,walk:t,enabled:n=!0}){let o=f.useRef(r),i=f.useRef(t);f.useEffect(()=>{o.current=r,i.current=t},[r,t]),A(()=>{if(!e||!n)return;let l=De(e);if(!l)return;let a=o.current,u=i.current,c=Object.assign(m=>a(m),{acceptNode:a}),p=l.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,c,!1);for(;p.nextNode();)u(p.currentNode)},[e,n,o,i])}function st(e){throw new Error("Unexpected object: "+e)}var y=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(y||{});function Oe(e,r){let t=r.resolveItems();if(t.length<=0)return null;let n=r.resolveActiveIndex(),o=n??-1;switch(e.focus){case 0:{for(let i=0;i<t.length;++i)if(!r.resolveDisabled(t[i],i,t))return i;return n}case 1:{for(let i=o-1;i>=0;--i)if(!r.resolveDisabled(t[i],i,t))return i;return n}case 2:{for(let i=o+1;i<t.length;++i)if(!r.resolveDisabled(t[i],i,t))return i;return n}case 3:{for(let i=t.length-1;i>=0;--i)if(!r.resolveDisabled(t[i],i,t))return i;return n}case 4:{for(let i=0;i<t.length;++i)if(r.resolveId(t[i],i,t)===e.id)return i;return n}case 5:return null;default:st(e)}}function Re(e={},r=null,t=[]){for(let[n,o]of Object.entries(e))Te(t,Ce(r,n),o);return t}function Ce(e,r){return e?e+"["+r+"]":r}function Te(e,r,t){if(Array.isArray(t))for(let[n,o]of t.entries())Te(e,Ce(r,n.toString()),o);else t instanceof Date?e.push([r,t.toISOString()]):typeof t=="boolean"?e.push([r,t?"1":"0"]):typeof t=="string"?e.push([r,t]):typeof t=="number"?e.push([r,`${t}`]):t==null?e.push([r,""]):Re(t,r,e)}var at=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(at||{}),ut=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(ut||{}),ct=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(ct||{}),dt=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.RegisterOption=3]="RegisterOption",e[e.UnregisterOption=4]="UnregisterOption",e[e.RegisterLabel=5]="RegisterLabel",e[e.SetActivationTrigger=6]="SetActivationTrigger",e[e.UpdateVirtualOptions=7]="UpdateVirtualOptions",e))(dt||{});function se(e,r=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=r(e.options.slice()),o=n.length>0&&n[0].dataRef.current.order!==null?n.sort((l,a)=>l.dataRef.current.order-a.dataRef.current.order):Be(n,l=>l.dataRef.current.domRef.current),i=t?o.indexOf(t):null;return i===-1&&(i=null),{options:o,activeOptionIndex:i}}let ft={1(e){var r;return(r=e.dataRef.current)!=null&&r.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1}},0(e){var r,t;if((r=e.dataRef.current)!=null&&r.disabled||e.comboboxState===0)return e;if((t=e.dataRef.current)!=null&&t.value){let n=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(n!==-1)return{...e,activeOptionIndex:n,comboboxState:0}}return{...e,comboboxState:0}},2(e,r){var t,n,o,i,l;if((t=e.dataRef.current)!=null&&t.disabled||(n=e.dataRef.current)!=null&&n.optionsRef.current&&!((o=e.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let p=r.focus===y.Specific?r.idx:Oe(r,{resolveItems:()=>e.virtual.options,resolveActiveIndex:()=>{var R,s;return(s=(R=e.activeOptionIndex)!=null?R:e.virtual.options.findIndex(h=>!e.virtual.disabled(h)))!=null?s:null},resolveDisabled:e.virtual.disabled,resolveId(){throw new Error("Function not implemented.")}}),m=(i=r.trigger)!=null?i:2;return e.activeOptionIndex===p&&e.activationTrigger===m?e:{...e,activeOptionIndex:p,activationTrigger:m}}let a=se(e);if(a.activeOptionIndex===null){let p=a.options.findIndex(m=>!m.dataRef.current.disabled);p!==-1&&(a.activeOptionIndex=p)}let u=r.focus===y.Specific?r.idx:Oe(r,{resolveItems:()=>a.options,resolveActiveIndex:()=>a.activeOptionIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled}),c=(l=r.trigger)!=null?l:2;return e.activeOptionIndex===u&&e.activationTrigger===c?e:{...e,...a,activeOptionIndex:u,activationTrigger:c}},3:(e,r)=>{var t,n,o;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:[...e.options,r.payload]};let i=r.payload,l=se(e,u=>(u.push(i),u));e.activeOptionIndex===null&&(n=e.dataRef.current)!=null&&n.isSelected(r.payload.dataRef.current.value)&&(l.activeOptionIndex=l.options.indexOf(i));let a={...e,...l,activationTrigger:2};return(o=e.dataRef.current)!=null&&o.__demoMode&&e.dataRef.current.value===void 0&&(a.activeOptionIndex=0),a},4:(e,r)=>{var t;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:e.options.filter(o=>o.id!==r.id)};let n=se(e,o=>{let i=o.findIndex(l=>l.id===r.id);return i!==-1&&o.splice(i,1),o});return{...e,...n,activationTrigger:2}},5:(e,r)=>e.labelId===r.id?e:{...e,labelId:r.id},6:(e,r)=>e.activationTrigger===r.trigger?e:{...e,activationTrigger:r.trigger},7:(e,r)=>{var t;if(((t=e.virtual)==null?void 0:t.options)===r.options)return e;let n=e.activeOptionIndex;if(e.activeOptionIndex!==null){let o=r.options.indexOf(e.virtual.options[e.activeOptionIndex]);o!==-1?n=o:n=null}return{...e,activeOptionIndex:n,virtual:Object.assign({},e.virtual,{options:r.options})}}},ce=f.createContext(null);ce.displayName="ComboboxActionsContext";function Q(e){let r=f.useContext(ce);if(r===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Q),t}return r}let Ee=f.createContext(null);function pt(e){var r;let t=B("VirtualProvider"),[n,o]=f.useMemo(()=>{let u=t.optionsRef.current;if(!u)return[0,0];let c=window.getComputedStyle(u);return[parseFloat(c.paddingBlockStart||c.paddingTop),parseFloat(c.paddingBlockEnd||c.paddingBottom)]},[t.optionsRef.current]),i=nt({scrollPaddingStart:n,scrollPaddingEnd:o,count:t.virtual.options.length,estimateSize(){return 40},getScrollElement(){var u;return(u=t.optionsRef.current)!=null?u:null},overscan:12}),[l,a]=f.useState(0);return A(()=>{a(u=>u+1)},[(r=t.virtual)==null?void 0:r.options]),V.createElement(Ee.Provider,{value:i},V.createElement("div",{style:{position:"relative",width:"100%",height:`${i.getTotalSize()}px`},ref:u=>{if(u){if(typeof process<"u"&&{}.JEST_WORKER_ID!==void 0||t.activationTrigger===0)return;t.activeOptionIndex!==null&&t.virtual.options.length>t.activeOptionIndex&&i.scrollToIndex(t.activeOptionIndex)}}},i.getVirtualItems().map(u=>{var c;return V.createElement(f.Fragment,{key:u.key},V.cloneElement((c=e.children)==null?void 0:c.call(e,{option:t.virtual.options[u.index],open:t.comboboxState===0}),{key:`${l}-${u.key}`,"data-index":u.index,"aria-setsize":t.virtual.options.length,"aria-posinset":u.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${u.start}px)`,overflowAnchor:"none"}}))})))}let de=f.createContext(null);de.displayName="ComboboxDataContext";function B(e){let r=f.useContext(de);if(r===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,B),t}return r}function ht(e,r){return K(r.type,ft,e,r)}let mt=f.Fragment;function vt(e,r){let{value:t,defaultValue:n,onChange:o,form:i,name:l,by:a=null,disabled:u=!1,__demoMode:c=!1,nullable:p=!1,multiple:m=!1,immediate:R=!1,virtual:s=null,...h}=e,I=!1,x=null,[v=m?[]:void 0,M]=ot(t,o,n),[w,C]=f.useReducer(ht,{dataRef:f.createRef(),comboboxState:c?0:1,options:[],virtual:null,activeOptionIndex:null,activationTrigger:2,labelId:null}),z=f.useRef(!1),D=f.useRef({static:!1,hold:!1}),W=f.useRef(null),U=f.useRef(null),J=f.useRef(null),T=f.useRef(null),S=g(typeof a=="string"?(b,O)=>{let F=a;return(b==null?void 0:b[F])===(O==null?void 0:O[F])}:a??((b,O)=>b===O)),_=g(b=>w.options.findIndex(O=>S(O.dataRef.current.value,b))),ne=f.useCallback(b=>K(d.mode,{1:()=>v.some(O=>S(O,b)),0:()=>S(v,b)}),[v]),oe=g(b=>w.activeOptionIndex===_(b)),d=f.useMemo(()=>({...w,immediate:I,optionsPropsRef:D,labelRef:W,inputRef:U,buttonRef:J,optionsRef:T,value:v,defaultValue:n,disabled:u,mode:m?1:0,virtual:w.virtual,get activeOptionIndex(){if(z.current&&w.activeOptionIndex===null&&w.options.length>0){let b=w.options.findIndex(O=>!O.dataRef.current.disabled);if(b!==-1)return b}return w.activeOptionIndex},calculateIndex:_,compare:S,isSelected:ne,isActive:oe,nullable:p,__demoMode:c}),[v,n,u,m,p,c,w,x]);A(()=>{},[x,void 0]),A(()=>{w.dataRef.current=d},[d]),_e([d.buttonRef,d.inputRef,d.optionsRef],()=>re.closeCombobox(),d.comboboxState===0);let $=f.useMemo(()=>{var b,O,F;return{open:d.comboboxState===0,disabled:u,activeIndex:d.activeOptionIndex,activeOption:d.activeOptionIndex===null?null:d.virtual?d.virtual.options[(b=d.activeOptionIndex)!=null?b:0]:(F=(O=d.options[d.activeOptionIndex])==null?void 0:O.dataRef.current.value)!=null?F:null,value:v}},[d,u,v]),P=g(()=>{if(d.activeOptionIndex!==null){if(d.virtual)ie(d.virtual.options[d.activeOptionIndex]);else{let{dataRef:b}=d.options[d.activeOptionIndex];ie(b.current.value)}re.goToOption(y.Specific,d.activeOptionIndex)}}),N=g(()=>{C({type:0}),z.current=!0}),E=g(()=>{C({type:1}),z.current=!1}),k=g((b,O,F)=>(z.current=!1,b===y.Specific?C({type:2,focus:y.Specific,idx:O,trigger:F}):C({type:2,focus:b,trigger:F}))),j=g((b,O)=>(C({type:3,payload:{id:b,dataRef:O}}),()=>{d.isActive(O.current.value)&&(z.current=!0),C({type:4,id:b})})),ye=g(b=>(C({type:5,id:b}),()=>C({type:5,id:null}))),ie=g(b=>K(d.mode,{0(){return M==null?void 0:M(b)},1(){let O=d.value.slice(),F=O.findIndex(ee=>S(ee,b));return F===-1?O.push(b):O.splice(F,1),M==null?void 0:M(O)}})),Me=g(b=>{C({type:6,trigger:b})}),re=f.useMemo(()=>({onChange:ie,registerOption:j,registerLabel:ye,goToOption:k,closeCombobox:E,openCombobox:N,setActivationTrigger:Me,selectActiveOption:P}),[]),we=r===null?{}:{ref:r},Z=f.useRef(null),ze=ae();return f.useEffect(()=>{Z.current&&n!==void 0&&ze.addEventListener(Z.current,"reset",()=>{M==null||M(n)})},[Z,M]),V.createElement(ce.Provider,{value:re},V.createElement(de.Provider,{value:d},V.createElement($e,{value:K(d.comboboxState,{0:te.Open,1:te.Closed})},l!=null&&v!=null&&Re({[l]:v}).map(([b,O],F)=>V.createElement(ke,{features:Le.Hidden,ref:F===0?ee=>{var fe;Z.current=(fe=ee==null?void 0:ee.closest("form"))!=null?fe:null}:void 0,...Fe({key:b,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,disabled:u,name:b,value:O})})),H({ourProps:we,theirProps:h,slot:$,defaultTag:mt,name:"Combobox"}))))}let bt="input";function gt(e,r){var t,n,o,i,l;let a=G(),{id:u=`headlessui-combobox-input-${a}`,onChange:c,displayValue:p,type:m="text",...R}=e,s=B("Combobox.Input"),h=Q("Combobox.Input"),I=Y(s.inputRef,r),x=Ne(s.inputRef),v=f.useRef(!1),M=ae(),w=g(()=>{h.onChange(null),s.optionsRef.current&&(s.optionsRef.current.scrollTop=0),h.goToOption(y.Nothing)}),C=function(){var d;return typeof p=="function"&&s.value!==void 0?(d=p(s.value))!=null?d:"":typeof s.value=="string"?s.value:""}();me(([d,$],[P,N])=>{if(v.current)return;let E=s.inputRef.current;E&&((N===0&&$===1||d!==P)&&(E.value=d),requestAnimationFrame(()=>{if(v.current||!E||(x==null?void 0:x.activeElement)!==E)return;let{selectionStart:k,selectionEnd:j}=E;Math.abs((j??0)-(k??0))===0&&k===0&&E.setSelectionRange(E.value.length,E.value.length)}))},[C,s.comboboxState,x]),me(([d],[$])=>{if(d===0&&$===1){if(v.current)return;let P=s.inputRef.current;if(!P)return;let N=P.value,{selectionStart:E,selectionEnd:k,selectionDirection:j}=P;P.value="",P.value=N,j!==null?P.setSelectionRange(E,k,j):P.setSelectionRange(E,k)}},[s.comboboxState]);let z=f.useRef(!1),D=g(()=>{z.current=!0}),W=g(()=>{M.nextFrame(()=>{z.current=!1})}),U=g(d=>{switch(v.current=!0,d.key){case L.Enter:if(v.current=!1,s.comboboxState!==0||z.current)return;if(d.preventDefault(),d.stopPropagation(),s.activeOptionIndex===null){h.closeCombobox();return}h.selectActiveOption(),s.mode===0&&h.closeCombobox();break;case L.ArrowDown:return v.current=!1,d.preventDefault(),d.stopPropagation(),K(s.comboboxState,{0:()=>h.goToOption(y.Next),1:()=>h.openCombobox()});case L.ArrowUp:return v.current=!1,d.preventDefault(),d.stopPropagation(),K(s.comboboxState,{0:()=>h.goToOption(y.Previous),1:()=>{h.openCombobox(),M.nextFrame(()=>{s.value||h.goToOption(y.Last)})}});case L.Home:if(d.shiftKey)break;return v.current=!1,d.preventDefault(),d.stopPropagation(),h.goToOption(y.First);case L.PageUp:return v.current=!1,d.preventDefault(),d.stopPropagation(),h.goToOption(y.First);case L.End:if(d.shiftKey)break;return v.current=!1,d.preventDefault(),d.stopPropagation(),h.goToOption(y.Last);case L.PageDown:return v.current=!1,d.preventDefault(),d.stopPropagation(),h.goToOption(y.Last);case L.Escape:return v.current=!1,s.comboboxState!==0?void 0:(d.preventDefault(),s.optionsRef.current&&!s.optionsPropsRef.current.static&&d.stopPropagation(),s.nullable&&s.mode===0&&s.value===null&&w(),h.closeCombobox());case L.Tab:if(v.current=!1,s.comboboxState!==0)return;s.mode===0&&s.activationTrigger!==1&&h.selectActiveOption(),h.closeCombobox();break}}),J=g(d=>{c==null||c(d),s.nullable&&s.mode===0&&d.target.value===""&&w(),h.openCombobox()}),T=g(d=>{var $,P,N;let E=($=d.relatedTarget)!=null?$:ve.find(k=>k!==d.currentTarget);if(v.current=!1,!((P=s.optionsRef.current)!=null&&P.contains(E))&&!((N=s.buttonRef.current)!=null&&N.contains(E))&&s.comboboxState===0)return d.preventDefault(),s.mode===0&&(s.nullable&&s.value===null?w():s.activationTrigger!==1&&h.selectActiveOption()),h.closeCombobox()}),S=g(d=>{var $,P,N;let E=($=d.relatedTarget)!=null?$:ve.find(k=>k!==d.currentTarget);(P=s.buttonRef.current)!=null&&P.contains(E)||(N=s.optionsRef.current)!=null&&N.contains(E)||s.disabled||s.immediate&&s.comboboxState!==0&&(h.openCombobox(),M.nextFrame(()=>{h.setActivationTrigger(1)}))}),_=ue(()=>{if(s.labelId)return[s.labelId].join(" ")},[s.labelId]),ne=f.useMemo(()=>({open:s.comboboxState===0,disabled:s.disabled}),[s]),oe={ref:I,id:u,role:"combobox",type:m,"aria-controls":(t=s.optionsRef.current)==null?void 0:t.id,"aria-expanded":s.comboboxState===0,"aria-activedescendant":s.activeOptionIndex===null?void 0:s.virtual?(n=s.options.find(d=>{var $;return!(($=s.virtual)!=null&&$.disabled(d.dataRef.current.value))&&s.compare(d.dataRef.current.value,s.virtual.options[s.activeOptionIndex])}))==null?void 0:n.id:(o=s.options[s.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":_,"aria-autocomplete":"list",defaultValue:(l=(i=e.defaultValue)!=null?i:s.defaultValue!==void 0?p==null?void 0:p(s.defaultValue):null)!=null?l:s.defaultValue,disabled:s.disabled,onCompositionStart:D,onCompositionEnd:W,onKeyDown:U,onChange:J,onFocus:S,onBlur:T};return H({ourProps:oe,theirProps:R,slot:ne,defaultTag:bt,name:"Combobox.Input"})}let xt="button";function Ot(e,r){var t;let n=B("Combobox.Button"),o=Q("Combobox.Button"),i=Y(n.buttonRef,r),l=G(),{id:a=`headlessui-combobox-button-${l}`,...u}=e,c=ae(),p=g(I=>{switch(I.key){case L.ArrowDown:return I.preventDefault(),I.stopPropagation(),n.comboboxState===1&&o.openCombobox(),c.nextFrame(()=>{var x;return(x=n.inputRef.current)==null?void 0:x.focus({preventScroll:!0})});case L.ArrowUp:return I.preventDefault(),I.stopPropagation(),n.comboboxState===1&&(o.openCombobox(),c.nextFrame(()=>{n.value||o.goToOption(y.Last)})),c.nextFrame(()=>{var x;return(x=n.inputRef.current)==null?void 0:x.focus({preventScroll:!0})});case L.Escape:return n.comboboxState!==0?void 0:(I.preventDefault(),n.optionsRef.current&&!n.optionsPropsRef.current.static&&I.stopPropagation(),o.closeCombobox(),c.nextFrame(()=>{var x;return(x=n.inputRef.current)==null?void 0:x.focus({preventScroll:!0})}));default:return}}),m=g(I=>{if(Ve(I.currentTarget))return I.preventDefault();n.comboboxState===0?o.closeCombobox():(I.preventDefault(),o.openCombobox()),c.nextFrame(()=>{var x;return(x=n.inputRef.current)==null?void 0:x.focus({preventScroll:!0})})}),R=ue(()=>{if(n.labelId)return[n.labelId,a].join(" ")},[n.labelId,a]),s=f.useMemo(()=>({open:n.comboboxState===0,disabled:n.disabled,value:n.value}),[n]),h={ref:i,id:a,type:it(e,n.buttonRef),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(t=n.optionsRef.current)==null?void 0:t.id,"aria-expanded":n.comboboxState===0,"aria-labelledby":R,disabled:n.disabled,onClick:m,onKeyDown:p};return H({ourProps:h,theirProps:u,slot:s,defaultTag:xt,name:"Combobox.Button"})}let It="label";function St(e,r){let t=G(),{id:n=`headlessui-combobox-label-${t}`,...o}=e,i=B("Combobox.Label"),l=Q("Combobox.Label"),a=Y(i.labelRef,r);A(()=>l.registerLabel(n),[n]);let u=g(()=>{var p;return(p=i.inputRef.current)==null?void 0:p.focus({preventScroll:!0})}),c=f.useMemo(()=>({open:i.comboboxState===0,disabled:i.disabled}),[i]);return H({ourProps:{ref:a,id:n,onClick:u},theirProps:o,slot:c,defaultTag:It,name:"Combobox.Label"})}let Rt="ul",Ct=pe.RenderStrategy|pe.Static;function Tt(e,r){let t=G(),{id:n=`headlessui-combobox-options-${t}`,hold:o=!1,...i}=e,l=B("Combobox.Options"),a=Y(l.optionsRef,r),u=Ae(),c=(()=>u!==null?(u&te.Open)===te.Open:l.comboboxState===0)();A(()=>{var s;l.optionsPropsRef.current.static=(s=e.static)!=null?s:!1},[l.optionsPropsRef,e.static]),A(()=>{l.optionsPropsRef.current.hold=o},[l.optionsPropsRef,o]),lt({container:l.optionsRef.current,enabled:l.comboboxState===0,accept(s){return s.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}});let p=ue(()=>{var s,h;return(h=l.labelId)!=null?h:(s=l.buttonRef.current)==null?void 0:s.id},[l.labelId,l.buttonRef.current]),m=f.useMemo(()=>({open:l.comboboxState===0,option:void 0}),[l]),R={"aria-labelledby":p,role:"listbox","aria-multiselectable":l.mode===1?!0:void 0,id:n,ref:a};return l.virtual&&l.comboboxState===0&&Object.assign(i,{children:V.createElement(pt,null,i.children)}),H({ourProps:R,theirProps:i,slot:m,defaultTag:Rt,features:Ct,visible:c,name:"Combobox.Options"})}let Et="li";function yt(e,r){var t;let n=G(),{id:o=`headlessui-combobox-option-${n}`,disabled:i=!1,value:l,order:a=null,...u}=e,c=B("Combobox.Option"),p=Q("Combobox.Option"),m=c.virtual?c.activeOptionIndex===c.calculateIndex(l):c.activeOptionIndex===null?!1:((t=c.options[c.activeOptionIndex])==null?void 0:t.id)===o,R=c.isSelected(l),s=f.useRef(null),h=Ie({disabled:i,value:l,domRef:s,order:a}),I=f.useContext(Ee),x=Y(r,s,I?I.measureElement:null),v=g(()=>p.onChange(l));A(()=>p.registerOption(o,h),[h,o]);let M=f.useRef(!(c.virtual||c.__demoMode));A(()=>{if(!c.virtual||!c.__demoMode)return;let T=he();return T.requestAnimationFrame(()=>{M.current=!0}),T.dispose},[c.virtual,c.__demoMode]),A(()=>{if(!M.current||c.comboboxState!==0||!m||c.activationTrigger===0)return;let T=he();return T.requestAnimationFrame(()=>{var S,_;(_=(S=s.current)==null?void 0:S.scrollIntoView)==null||_.call(S,{block:"nearest"})}),T.dispose},[s,m,c.comboboxState,c.activationTrigger,c.activeOptionIndex]);let w=g(T=>{var S;if(i||(S=c.virtual)!=null&&S.disabled(l))return T.preventDefault();v(),je()||requestAnimationFrame(()=>{var _;return(_=c.inputRef.current)==null?void 0:_.focus({preventScroll:!0})}),c.mode===0&&requestAnimationFrame(()=>p.closeCombobox())}),C=g(()=>{var T;if(i||(T=c.virtual)!=null&&T.disabled(l))return p.goToOption(y.Nothing);let S=c.calculateIndex(l);p.goToOption(y.Specific,S)}),z=rt(),D=g(T=>z.update(T)),W=g(T=>{var S;if(!z.wasMoved(T)||i||(S=c.virtual)!=null&&S.disabled(l)||m)return;let _=c.calculateIndex(l);p.goToOption(y.Specific,_,0)}),U=g(T=>{var S;z.wasMoved(T)&&(i||(S=c.virtual)!=null&&S.disabled(l)||m&&(c.optionsPropsRef.current.hold||p.goToOption(y.Nothing)))}),J=f.useMemo(()=>({active:m,selected:R,disabled:i}),[m,R,i]);return H({ourProps:{id:o,ref:x,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":R,disabled:void 0,onClick:w,onFocus:C,onPointerEnter:D,onMouseEnter:D,onPointerMove:W,onMouseMove:W,onPointerLeave:U,onMouseLeave:U},theirProps:u,slot:J,defaultTag:Et,name:"Combobox.Option"})}let Mt=q(vt),wt=q(Ot),zt=q(gt),Pt=q(St),$t=q(Tt),Ft=q(yt),kt=Object.assign(Mt,{Input:zt,Button:wt,Label:Pt,Options:$t,Option:Ft});export{it as T,kt as q};
